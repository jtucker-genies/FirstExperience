!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["genies-typescript-compiler"]=t():e["genies-typescript-compiler"]=t()}(this,(()=>(()=>{"use strict";var e={71:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.convertToAssetsRelativePath=t.updateImportsToRelativePaths=t.isGeniesScriptType=t.getGeniesScriptTypeFromType=t.getIsUnityAPIDeclaration=t.getIsUnityAPIType=t.getIsValidUnityGenericTypeArg=t.extractProperties=t.getFullTypeName=t.getTypeNameAndEnsureImported=t.getUnaryOperatorMethodReturnType=t.isOrInheritsFromGameObjectOrComponent=t.getOperatorMethodReturnType=t.isGeniesEventType=t.isSignalBusType=t.getOperatorMethodName=t.traversePrototypeChain=t.removeDecorators=t.extendsScriptableObject=t.extendsMonoBehaviour=t.GeniesScriptType=t.UiInterfaceToEnumMap=t.AllowedUiInterfaces=t.GeniesScriptUiEvents=t.componentMethods=t.SET_ITEM_NAME=t.GET_ITEM_NAME=t.TooltipDecorator=t.SpaceDecorator=t.HeaderDecorator=t.SerializeFieldDecorator=t.HideInInspectorDecorator=t.NonSerializedDecorator=t.ScriptableObjectTypeName=t.MonobehaviourTypeName=t.GeniesInstancePropName=t.GeniesDeclarationFileAnnotation=void 0;const i=n(710),a=o(n(928));var l,c;function g(e){let t=e.getBaseClass();for(;t;){if("MonoBehaviour"===t.getName())return!0;t=t.getBaseClass()}return!1}function p(e){let t=e.getBaseClass();for(;t;){if("ScriptableObject"===t.getName())return!0;t=t.getBaseClass()}return!1}function u(e,t,n){var r;const s=function(e,t){const n=[],r=e.getSymbol();if(!r)return n;const s=r.getDeclarations();if(!s)return n;for(const e of s)if(i.Node.isClassDeclaration(e)){const r=e.getHeritageClauses();for(const e of r){const r=e.getTypeNodes();for(const e of r){const r=t.typeChecker.getTypeAtLocation(e);r&&n.push(r)}}}return n}(e,n);for(const e of s){const s=null===(r=e.getSymbol())||void 0===r?void 0:r.getName();if(s&&t.includes(s))return!0;if(u(e,t,n))return!0}return!1}function d(e,t=!0,n=!0){let r="";const s=e.getAliasSymbol();if(r=s?s.getName():e.getText(),["float","int","double","long","bool","string"].includes(r))switch(r){case"int":return"System.Int32";case"string":return"System.String";case"bool":return"System.Boolean";case"float":return"System.Single";case"long":return"System.Int64";case"double":return"System.Double";default:return r}const o=e.getSymbol();if(!o)return r;if(S(e))r=o.getFullyQualifiedName().replace(/['"]/g,"");else{const e=o.getDeclarations();let t=!1;if(e.forEach((e=>{(i.Node.isInterfaceDeclaration(e)||i.Node.isClassDeclaration(e))&&(t=e.isExported())})),!t&&e.length>0){const t=e[0].getSourceFile(),n=t.getFilePath(),s=v(t.getDirectoryPath(),n),i=a.parse(s),l=a.join(i.dir,i.name);r=`${l}.${o.getFullyQualifiedName().replace(/['"]/g,"")}`}else r=o.getFullyQualifiedName().replace(/['"]/g,"");r.indexOf("Assets/")>=0&&(r=r.slice(r.indexOf("Assets"))),r.indexOf("PackageCache/")>=0&&(r=r.slice(r.indexOf("PackageCache")).replace("PackageCache","Packages")),r.indexOf("GeniesSharedPackages/")>=0&&(r=r.slice(r.indexOf("GeniesSharedPackages")).replace("GeniesSharedPackages","Packages"))}const l=/\$\d+$/;if(t&&l.test(r)&&(r=r.replace(l,""),n)){const t=e.getTypeArguments();t.length>0&&(r+="<",t.forEach(((e,n)=>{let s=d(e);r+=s,n<t.length-1&&(r+=", ")})),r+=">")}return r}function y(e,n="",r=new Map){const s=[];return e.getProperties().forEach((e=>{const o=e.getScope(),a=A(e);if("private"===o&&!a.some((e=>e.Type===t.SerializeFieldDecorator)))return;if("public"===o&&a.some((e=>e.Type===t.NonSerializedDecorator)))return;const l=h(e.getType(),r),c=l.isArray(),g=T(l,r),p=d(g),u=e.getName();let y=n?`${n}.${u}`:u;function x(e){if(e.getKind()===i.SyntaxKind.NewExpression){const t=e;return`new ${d(t.getType())}(${t.getArguments().map((e=>e.getText())).join(", ")});`}return e.getText()}const S=[];if(e.hasInitializer()){const t=e.getInitializer();if(t)if(t.getKind()===i.SyntaxKind.ArrayLiteralExpression){const e=t;for(let t=0;t<e.getElements().length;t++){const n=e.getElements()[t];S.push(x(n))}}else S.push(x(t))}const E={Path:y,Name:u,TypeName:p,ChildProperties:[],IsArray:c,IsEnum:!1,EnumKeys:[],EnumValues:[],Decorators:A(e),IsGeniesBehaviourRef:!1,IsGeniesScriptableObjectRef:!1,Initializers:S,ArrayElementInitializer:void 0,ArrayDimension:-1};if(c){let e=1;return E.ArrayElementInitializer=f(l,p,u,y,e,r),E.ArrayDimension=e,void s.push(E)}m(g,E,r),s.push(E)})),s}function m(e,t,n){const r=e.isEnum(),s=e.getSymbol()||e.getAliasSymbol();if(!s)return;const o=s.getDeclarations()[0],a=E(o),l=N(o,a);if(t.IsGeniesBehaviourRef=l==c.Monobehaviour,t.IsGeniesScriptableObjectRef=l==c.ScriptableObject,!a&&l===c.None&&(r&&function(e,t){const{keys:n,values:r}=function(e){const t=e.getSymbol(),n=null==t?void 0:t.getDeclarations().find((e=>e.getKind()===i.SyntaxKind.EnumDeclaration));return n?{keys:n.getMembers().map((e=>e.getName())),values:n.getMembers().map((e=>e.getValue()))}:{keys:[],values:[]}}(t);e.EnumKeys=n,e.EnumValues=r.map((e=>void 0===e?"":e.toString())),e.IsEnum=!0}(t,e),s.getDeclarations().some((e=>i.Node.isClassDeclaration(e))))){const r=s.getDeclarations().find(i.Node.isClassDeclaration),o=r.getTypeParameters(),a=e.getTypeArguments(),l=new Map(n);o.forEach(((e,t)=>{const n=`${e.getName()}_${r.getName()}`;l.set(n,a[t])}));const c=[];let g=r;for(;g;){g.getName(),c.unshift(...y(g,t.Path,l));let e=g.getBaseClass();if(void 0===e)break;g=e}t.ChildProperties=c}}function f(e,t,n,r,s,o){let i=e.isArray()?e.getArrayElementType():e;i.isArray()||(i=T(i,o));let a=s;const l={Path:r+"_D"+s,Name:n,TypeName:t,ArrayDimension:s,ChildProperties:[],IsArray:i.isArray(),IsEnum:i.isEnum(),EnumKeys:[],EnumValues:[],Decorators:[],IsGeniesBehaviourRef:!1,IsGeniesScriptableObjectRef:!1,Initializers:[],ArrayElementInitializer:void 0};return i.isArray()?l.ArrayElementInitializer=f(i,t,n,r,++a,o):m(i,l,o),l}function h(e,t){var n,r;let s=e;if(s.isTypeParameter()){const e=null===(n=s.getSymbol())||void 0===n?void 0:n.getName(),o=null===(r=s.getSymbol())||void 0===r?void 0:r.getDeclarations()[0].getParent(),a=`${e}_${o&&i.Node.isClassDeclaration(o)?o.getName():""}`;a&&t.has(a)&&(s=t.get(a))}return s}function T(e,t){let n=e;for(;null==n?void 0:n.isArray();)n=n.getArrayElementType();return n=h(n,t),n}function x(e){const n=e.getFirstChild();if(!n)return console.log("No nodes found in the file."),!1;const r=n.getLeadingCommentRanges();return r.length>0&&r[0].getText()===t.GeniesDeclarationFileAnnotation}function S(e){const t=e.getSymbol();if(t)return x(t.getDeclarations()[0].getSourceFile())}function E(e){return x(e.getSourceFile())}function N(e,t){if(e.getKind()!==i.SyntaxKind.ClassDeclaration||t)return c.None;const n=e,r=g(n),s=p(n);return r?c.Monobehaviour:s?c.ScriptableObject:c.None}function b(e){const t=e.getSymbol();if(!t)return c.None;const n=t.getDeclarations();if(0===n.length)return c.None;const r=n[0];return N(r,E(r))}function v(e,t){const n=a.resolve(e,t),r=a.resolve("Assets");let s=a.relative(r,n);return s.startsWith("Assets"+a.sep)||(s=a.join("Assets",s)),s.split(a.sep).join("/")}function A(e){return e.getDecorators().map((e=>({Type:e.getName(),Args:e.getArguments().map((e=>e.getText()))})))}t.GeniesDeclarationFileAnnotation="//@Genies-UnityApiInterface",t.GeniesInstancePropName="__geniesInstance__",t.MonobehaviourTypeName="MonoBehaviour",t.ScriptableObjectTypeName="ScriptableObject",t.NonSerializedDecorator="NonSerialized",t.HideInInspectorDecorator="HideInInspector",t.SerializeFieldDecorator="SerializeField",t.HeaderDecorator="Header",t.SpaceDecorator="Space",t.TooltipDecorator="Tooltip",t.GET_ITEM_NAME="get_Item",t.SET_ITEM_NAME="set_Item",t.componentMethods=new Set(["GetComponent","TryGetComponent","GetComponentInChildren","GetComponentsInChildren","GetComponentInParent","GetComponentsInParent","GetComponents","AddComponent"]),function(e){e[e.None=0]="None",e[e.PointerClick=1]="PointerClick",e[e.PointerDown=2]="PointerDown",e[e.PointerEnter=4]="PointerEnter",e[e.PointerExit=8]="PointerExit",e[e.PointerUp=16]="PointerUp",e[e.BeginDrag=32]="BeginDrag",e[e.Deselect=64]="Deselect",e[e.Drag=128]="Drag",e[e.Drop=256]="Drop",e[e.EndDrag=512]="EndDrag",e[e.InitializePotentialDrag=1024]="InitializePotentialDrag",e[e.Scroll=2048]="Scroll",e[e.Select=4096]="Select",e[e.Submit=8192]="Submit",e[e.UpdateSelected=16384]="UpdateSelected",e[e.Move=32768]="Move",e[e.Cancel=65536]="Cancel"}(l||(t.GeniesScriptUiEvents=l={})),t.AllowedUiInterfaces=new Set(["UnityEngine.EventSystems.IPointerClickHandler","UnityEngine.EventSystems.IPointerDownHandler","UnityEngine.EventSystems.IPointerEnterHandler","UnityEngine.EventSystems.IPointerExitHandler","UnityEngine.EventSystems.IPointerUpHandler","UnityEngine.EventSystems.IBeginDragHandler","UnityEngine.EventSystems.IDeselectHandler","UnityEngine.EventSystems.IDragHandler","UnityEngine.EventSystems.IDropHandler","UnityEngine.EventSystems.IEndDragHandler","UnityEngine.EventSystems.IInitializePotentialDragHandler","UnityEngine.EventSystems.IScrollHandler","UnityEngine.EventSystems.ISelectHandler","UnityEngine.EventSystems.ISubmitHandler","UnityEngine.EventSystems.IUpdateSelectedHandler","UnityEngine.EventSystems.IMoveHandler","UnityEngine.EventSystems.ICancelHandler"]),t.UiInterfaceToEnumMap=new Map([["UnityEngine.EventSystems.IPointerClickHandler",l.PointerClick],["UnityEngine.EventSystems.IPointerDownHandler",l.PointerDown],["UnityEngine.EventSystems.IPointerEnterHandler",l.PointerEnter],["UnityEngine.EventSystems.IPointerExitHandler",l.PointerExit],["UnityEngine.EventSystems.IPointerUpHandler",l.PointerUp],["UnityEngine.EventSystems.IBeginDragHandler",l.BeginDrag],["UnityEngine.EventSystems.IDeselectHandler",l.Deselect],["UnityEngine.EventSystems.IDragHandler",l.Drag],["UnityEngine.EventSystems.IDropHandler",l.Drop],["UnityEngine.EventSystems.IEndDragHandler",l.EndDrag],["UnityEngine.EventSystems.IInitializePotentialDragHandler",l.InitializePotentialDrag],["UnityEngine.EventSystems.IScrollHandler",l.Scroll],["UnityEngine.EventSystems.ISelectHandler",l.Select],["UnityEngine.EventSystems.ISubmitHandler",l.Submit],["UnityEngine.EventSystems.IUpdateSelectedHandler",l.UpdateSelected],["UnityEngine.EventSystems.IMoveHandler",l.Move],["UnityEngine.EventSystems.ICancelHandler",l.Cancel]]),function(e){e[e.None=0]="None",e[e.Monobehaviour=1]="Monobehaviour",e[e.ScriptableObject=2]="ScriptableObject"}(c||(t.GeniesScriptType=c={})),t.extendsMonoBehaviour=g,t.extendsScriptableObject=p,t.removeDecorators=function(e,t){e.forEach((e=>{t(e)&&e.remove()}))},t.traversePrototypeChain=function(e){const t=new Set;let n=e;for(;n;){const e=d(n.getType());e&&t.add(e),n.getImplements().forEach((e=>{const n=[e.getType()];for(;n.length>0;){const e=n.shift();if(!e)continue;const r=d(e);r&&!t.has(r)&&(t.add(r),e.getBaseTypes().forEach((e=>{n.push(e)})))}})),n=n.getBaseClass()}return Array.from(t)},t.getOperatorMethodName=function(e){switch(e){case i.SyntaxKind.EqualsEqualsToken:return"op_Equality";case i.SyntaxKind.ExclamationEqualsToken:return"op_Inequality";case i.SyntaxKind.GreaterThanToken:return"op_GreaterThan";case i.SyntaxKind.LessThanToken:return"op_LessThan";case i.SyntaxKind.GreaterThanEqualsToken:return"op_GreaterThanOrEqual";case i.SyntaxKind.LessThanEqualsToken:return"op_LessThanOrEqual";case i.SyntaxKind.AmpersandToken:return"op_BitwiseAnd";case i.SyntaxKind.BarToken:return"op_BitwiseOr";case i.SyntaxKind.PlusToken:return"op_Addition";case i.SyntaxKind.MinusToken:return"op_Subtraction";case i.SyntaxKind.SlashToken:return"op_Division";case i.SyntaxKind.PercentToken:return"op_Modulus";case i.SyntaxKind.AsteriskToken:return"op_Multiply";case i.SyntaxKind.LessThanLessThanToken:return"op_LeftShift";case i.SyntaxKind.GreaterThanGreaterThanToken:return"op_RightShift";case i.SyntaxKind.CaretToken:return"op_ExclusiveOr";case i.SyntaxKind.ExclamationToken:return"op_LogicalNot";case i.SyntaxKind.TildeToken:return"op_OnesComplement";case i.SyntaxKind.PlusPlusToken:return"op_Increment";case i.SyntaxKind.MinusMinusToken:return"op_Decrement";default:return}},t.isSignalBusType=function(e){const t=e.getSymbol();return!!t&&"SignalBus"===t.getName()},t.isGeniesEventType=function(e){const t=e.getSymbol();return!!t&&"GeniesEvent"===t.getName()},t.getOperatorMethodReturnType=function(e,t,n){const r=e.getSymbol();if(!r)return null;let s=e.getText(),o=n.getText();const a=r.getDeclarations();for(const e of a)if(i.Node.isClassDeclaration(e)){const n=e.getMethods().filter((e=>e.getName()===t&&0===e.getTypeParameters().length));for(const e of n){const t=e.getParameters();if(2===t.length){const n=t[0].getType(),r=t[1].getType();if(n.getText()===s&&r.getText()===o)return e.getReturnType()}}}return null},t.isOrInheritsFromGameObjectOrComponent=function(e,t){if(!e)return!1;const n=e.getSymbol();return!!n&&(!!["GameObject","Component","MonoBehaviour"].includes(n.getName())||u(e,["GameObject","Component","MonoBehaviour"],t))},t.getUnaryOperatorMethodReturnType=function(e,t){const n=e.getSymbol();if(!n)return null;const r=n.getDeclarations();for(const n of r)if(i.Node.isClassDeclaration(n)){const r=n.getMethods().filter((e=>e.getName()===t&&0===e.getTypeParameters().length));for(const t of r){const n=t.getParameters();if(1===n.length&&n[0].getType().getText()===e.getText())return t.getReturnType()}}return null},t.getTypeNameAndEnsureImported=function(e,t){let n=e.getText(void 0,i.TypeFormatFlags.None),r="";if(["float","int","double","long","bool","string","number"].includes(n)){switch(n){case"int":n="Int32";break;case"bool":n="Boolean";break;case"float":n="Single";break;case"long":n="Int64";break;case"double":case"number":n="Double";break;case"string":n="String"}r="System"}else{const t=b(e);if(t!==c.None)switch(t){case c.Monobehaviour:n="MonoBehaviour",r="UnityEngine";break;case c.ScriptableObject:n="ScriptableObject",r="UnityEngine"}else{if(!S(e))throw new Error("Can't use non CSharp types");{const t=d(e),n=t.lastIndexOf(".");r=t.substring(0,n)}}}const s=t.getImportDeclarations().find((e=>e.getModuleSpecifierValue()===r));if(s)s.getNamedImports().some((e=>e.getName()===n))||s.addNamedImport(n);else{const e={kind:i.StructureKind.ImportDeclaration,moduleSpecifier:r,namedImports:[{name:n}]};t.addImportDeclaration(e)}return n},t.getFullTypeName=d,t.extractProperties=y,t.getIsValidUnityGenericTypeArg=function(e){let t="";const n=e.getAliasSymbol();return t=n?n.getName():e.getText(),!!["float","int","double","long","bool","string","number"].includes(t)||b(e)!==c.None||S(e)},t.getIsUnityAPIType=S,t.getIsUnityAPIDeclaration=E,t.getGeniesScriptTypeFromType=b,t.isGeniesScriptType=function(e){let t=b(e);return t===c.Monobehaviour||t===c.ScriptableObject},t.updateImportsToRelativePaths=function(e){const t=e.getDirectoryPath();e.getImportDeclarations().forEach((e=>{const n=e.getModuleSpecifierValue();if(n.startsWith("./")||n.startsWith("../")){const r=v(t,n);e.setModuleSpecifier(r)}}))},t.convertToAssetsRelativePath=v},105:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGeniesSemanticDiagnostics=void 0;const s=n(710),o=r(n(985)),i=n(71),a=10001,l=10002,c=10003,g=10004,p=10005,u=10006,d=new Set(["MonoBehaviour","ScriptableObject"]),y=new Set(["GetComponent","TryGetComponent","GetComponentInChildren","GetComponentsInChildren","GetComponentInParent","GetComponentsInParent","GetComponents","AddComponent"]);function m(e,t,n,r){const s=t.getStart(),i=t.getWidth(),a={file:t.getSourceFile().compilerNode,start:s,length:i,messageText:n,category:o.default.DiagnosticCategory.Error,code:r,source:"Genies"};e.push(a)}t.getGeniesSemanticDiagnostics=function(e,t){if(!e)return[];const n=[];return function(e,t){e.getClasses().forEach((n=>{const r=n.getBaseClass(),s=n.getImplements(),c=null==r?void 0:r.getName();if(r&&(0,i.getIsUnityAPIType)(r.getType())&&c&&!d.has(c)){const s=r.getStart(),i=r.getWidth(),l=`Class '${n.getName()}' inherits from a Unity type '${r.getName()}' that is not 'MonoBehaviour' or 'ScriptableObject'.`,c={file:e.compilerNode,start:s,length:i,messageText:l,category:o.default.DiagnosticCategory.Error,code:a,source:"Genies"};t.push(c)}s.forEach((r=>{if((0,i.getIsUnityAPIType)(r.getType())){const s=(0,i.getFullTypeName)(r.getType());if(i.AllowedUiInterfaces.has(s))return;const a=r.getStart(),c=r.getWidth(),g=`Class '${n.getName()}' implements a forbidden Unity interface '${r.getText()}'.`,p={file:e.compilerNode,start:a,length:c,messageText:g,category:o.default.DiagnosticCategory.Error,code:l,source:"Genies"};t.push(p)}}))}))}(e,n),function(e,t){e.getDescendantsOfKind(s.SyntaxKind.CallExpression).forEach((e=>{!function(e,t){const n=e.getExpression();let r=[];if(s.Node.isPropertyAccessExpression(n)||s.Node.isIdentifier(n)){const e=n.getSymbol();e&&(r=e.getDeclarations().filter((e=>s.Node.isMethodDeclaration(e))))}if(0===r.length)return;if(!(r.filter((e=>e.getTypeParameters().length>0)).length>0))return;if(r=r.filter((e=>(0,i.getIsUnityAPIDeclaration)(e))),0===r.length)return;const o=function(e){return s.Node.isPropertyAccessExpression(e)?e.getName():s.Node.isIdentifier(e)?e.getText():""}(n);if(function(e,t){const n=t.getArguments().map((e=>e.getType())),r=t.getProject().getTypeChecker();return e.some((e=>{if(e.getTypeParameters().length>0)return!1;const t=e.getParameters();if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++){const s=t[e].getType(),o=n[e];if(!r.isTypeAssignableTo(o,s))return!1}return!0}))}(r,e))return;const a=e.getTypeArguments();if(0===a.length)return void m(t,e,`Generic method '${o}' must be called with type arguments.`,c);let l=r.map((e=>e.getTypeParameters().length));l.includes(a.length)||m(t,e,`Generic method '${o}' was provided the wrong number of arguments. Valid args counts: '${l.join(", ")}'`,u),y.has(o)?a.forEach((e=>{(function(e){const t=e.getType();if((0,i.getIsUnityAPIType)(t))return!0;if((0,i.getGeniesScriptTypeFromType)(t)===i.GeniesScriptType.Monobehaviour)return!0;const n=t.getSymbol();if(n){const e=n.getDeclarations();if(e&&e.length>0&&s.Node.isInterfaceDeclaration(e[0]))return!0}return!1})(e)||m(t,e,`Type arguments for method '${o}' must be a Unity API type, an interface, or a type that extends MonoBehaviour.`,g)})):a.forEach((e=>{const n=e.getType();(0,i.getIsValidUnityGenericTypeArg)(n)||m(t,e,`Type arguments for method '${o}' must be Unity API types.`,g)}))}(e,t)}))}(e,n),function(e,t){e.getDescendantsOfKind(s.SyntaxKind.NewExpression).forEach((e=>{const n=e.getType().getSymbol();if(!n)return;const r=n.getDeclarations();if(!r||0===r.length)return;const o=r.filter((e=>s.Node.isClassDeclaration(e)&&(0,i.getIsUnityAPIDeclaration)(e)&&e.getTypeParameters().length>0));if(0===o.length)return;const a=o[0].getTypeParameters().length,l=e.getTypeArguments(),c=l.length;0===c?m(t,e,`Generic class '${(0,i.getFullTypeName)(e.getType())}' must be instantiated with ${a} type argument(s).`,p):(c!==a&&m(t,e,`Generic class '${(0,i.getFullTypeName)(e.getType())}' expects ${a} type argument(s), but got ${c}.`,u),l.forEach((n=>{const r=n.getType();(0,i.getIsValidUnityGenericTypeArg)(r)||m(t,n,`Type arguments for type '${(0,i.getFullTypeName)(e.getType())}' must be Unity API types.`,u)})))}))}(e,n),n}},150:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(899)),a=n(71),l=n(710),c=n(113),g=n(538),p=n(340),u=n(780),d=n(195),y=n(371),m=n(58),f=n(551),h=n(452),T=n(821),x=n(24),S=n(105),E=n(286),N=n(682),b=n(325);t.default=class{constructor(e){this.project=new l.Project({tsConfigFilePath:e,skipAddingFilesFromTsConfig:!0});const t=this.project.getTypeChecker();this.transformationContext=new m.TransformationContext(t),this.transformers=[{phase:1,transformer:new p.RefTransformer},{phase:1,transformer:new x.EventContextTransformer},{phase:1,transformer:new E.DelegateToArrowFunctionTransformer},{phase:1,transformer:new b.BracketAccessTransformer},{phase:1,transformer:new c.PromiseWrapperTransformer},{phase:1,transformer:new g.ComponentCallTransformer},{phase:1,transformer:new h.ScriptableObjectCreateInstanceTransformer},{phase:1,transformer:new y.ExtensionMethodTransformer},{phase:1,transformer:new f.GeniesInstanceTransformer},{phase:2,transformer:new u.GenericTypeTransformer},{phase:3,transformer:new T.OperatorOverloadingTransformer},{phase:4,transformer:new N.NumericOverloadResolutionTransformer},{phase:5,transformer:new d.GenericMethodTransformer}]}compile(e,t){this.project.addSourceFilesAtPaths(e),this.project.addSourceFilesAtPaths(t);let n=new Set,r=new Set,s=new Map;e.forEach((e=>{const t=this.project.getSourceFileOrThrow(e);this.collectFiles(t,n,r,s)}));const o=this.topologicalSort(Array.from(n),s);let i=new Map;return o.forEach((e=>{this.setDefaultExport(e),(0,a.updateImportsToRelativePaths)(e),this.initializeCompileOutput(i,e)})),n.forEach((e=>{this.emit(i,e)})),JSON.stringify({outputs:[...i.values()]})}setDefaultExport(e){const t=e.getDefaultExportSymbol();let n=null;if(t&&(n=t.getDeclarations().find((e=>e.getKind()===i.SyntaxKind.ClassDeclaration))),null==n)for(const t of e.getClasses())if(((0,a.extendsMonoBehaviour)(t)||(0,a.extendsScriptableObject)(t))&&!t.isDefaultExport()){t.setIsDefaultExport(!0);break}}groupTransformersByPhase(){return this.transformers.reduce(((e,t)=>{const{phase:n}=t;return e[n]||(e[n]=[]),e[n].push(t),e}),{})}runTransformers(e){const t=this.groupTransformersByPhase();for(const n of Object.keys(t).sort(((e,t)=>Number(e)-Number(t)))){const r=Number(n),s=t[r];let o=0,i=!0;for(;i;){i=!1,o++;const t=e.getDescendants();for(let e=0;e<t.length;e++){let n=t[e],r=n;if(i)break;s.forEach((({transformer:s})=>{r.wasForgotten()?i=!0:!r.wasForgotten()&&s.nodeTypes.includes(r.getKind())&&(r=s.transformNode(r,this.transformationContext),r!==n&&(i=!0,t[e]=r))}))}i&&console.log(`Phase ${r}: Retrying transformation due to forgotten nodes. Attempt ${o}`)}}}initializeCompileOutput(e,t){const n=this.getGeniesDiagnostics(t);0===n.length&&this.runTransformers(t);const r=t.getDefaultExportSymbol();let s;r&&(s=r.getDeclarations().find((e=>e.getKind()===i.SyntaxKind.ClassDeclaration)));let o=!1,l=!1,c="";void 0!==s&&(o=(0,a.extendsMonoBehaviour)(s),l=(0,a.extendsScriptableObject)(s),c=(0,a.getFullTypeName)(s.getType()));const g=[];let p=[],u=a.GeniesScriptUiEvents.None;if(o||l&&s){let e=s;for(;e;){const t=e.getName();if(t==a.MonobehaviourTypeName||t==a.ScriptableObjectTypeName)break;g.unshift(...(0,a.extractProperties)(e)),e=e.getBaseClass()}p=(0,a.traversePrototypeChain)(s),(null==p?void 0:p.length)>0&&p.forEach((e=>{a.UiInterfaceToEnumMap.has(e)&&(u|=a.UiInterfaceToEnumMap.get(e))}))}e.set(t,{FilePath:t.getFilePath(),IsSuccessful:!1,Errors:n,JsSource:"",IsMonobehaviour:o,IsScriptableObj:l,Properties:g,Id:t.getFilePath(),DefaultTypeName:c,InheritanceChain:p,SupportedUiEvents:u})}emit(e,t){var n;const r=[a.NonSerializedDecorator,a.HideInInspectorDecorator,a.SerializeFieldDecorator,a.HeaderDecorator,a.SpaceDecorator,a.TooltipDecorator];t.getClasses().forEach((e=>{(0,a.removeDecorators)(e.getDecorators(),(e=>r.includes(e.getName()))),e.getProperties().forEach((e=>{(0,a.removeDecorators)(e.getDecorators(),(e=>r.includes(e.getName())))}))}));const s=this.getDiagnostics(t);let o=t.getEmitOutput().getOutputFiles()[0].getText();if(e.has(t)){let r=e.get(t),i=(null!==(n=r.Errors)&&void 0!==n?n:[]).concat(s);r.IsSuccessful=0===i.length,r.Errors=i,r.JsSource=o}else e.set(t,{FilePath:t.getFilePath(),IsSuccessful:0===s.length,Errors:s,JsSource:o,IsMonobehaviour:!1,IsScriptableObj:!1,Properties:[],Id:t.getFilePath(),DefaultTypeName:"",InheritanceChain:[],SupportedUiEvents:a.GeniesScriptUiEvents.None})}getGeniesDiagnostics(e){return(0,S.getGeniesSemanticDiagnostics)(e,this.project.getTypeChecker()).map((t=>{var n;const r=null!==(n=t.start)&&void 0!==n?n:0,{line:s,column:o}=e.getLineAndColumnAtPos(r),i=this.flattenDiagnosticMessageText(t.messageText);return`${e.getFilePath()} (${s},${o}): ${i}`}))}getDiagnostics(e){return e.getPreEmitDiagnostics().map((e=>e.compilerObject)).map((t=>{var n;const r=null!==(n=t.start)&&void 0!==n?n:0,{line:s,column:o}=e.getLineAndColumnAtPos(r),i=this.flattenDiagnosticMessageText(t.messageText);return`${e.getFilePath()} (${s},${o}): ${i}`}))}flattenDiagnosticMessageText(e){return"string"==typeof e?e:i.flattenDiagnosticMessageText(e,"\n")}collectFiles(e,t,n,r){const s=e.getFilePath();n.has(s)||(n.add(s),t.add(e),r.has(e)||r.set(e,new Set),e.getReferencingSourceFiles().forEach((s=>{this.collectFiles(s,t,n,r),r.has(s)||r.set(s,new Set),r.get(s).add(e)})))}topologicalSort(e,t){try{return this.topologicalSortWithTarjan(e,t)}catch(e){return console.error(`Topological Sort Failed: ${e}`),[]}}topologicalSortWithCycles(e,t){const n=new Map,r=new Map,s={value:0},o=[],i=new Set,a=[],l=e=>{if(n.set(e,s.value),r.set(e,s.value),s.value++,o.push(e),i.add(e),(t.get(e)||new Set).forEach((t=>{n.has(t)?i.has(t)&&r.set(e,Math.min(r.get(e),n.get(t))):(l(t),r.set(e,Math.min(r.get(e),r.get(t))))})),r.get(e)===n.get(e)){const t=[];let n;do{if(n=o.pop(),void 0===n)break;i.delete(n),t.push(n)}while(n!==e);a.push(t)}};return e.forEach((e=>{n.has(e)||l(e)})),a}topologicalSortWithTarjan(e,t){const n=this.topologicalSortWithCycles(e,t),r=[];for(let e=n.length-1;e>=0;e--)r.push(...n[e]);return r}}},229:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(150));!function(){const e=process.argv.slice(2);let t,n=[],r=[],o=null;for(const s of e)"--tsconfig"===s||"-t"===s?o="tsconfig":"-c"===s||"--compile"===s?o="compile":"-p"===s||"--project"===s?o="project":"tsconfig"===o?(t=s,o=null):"compile"===o?n.push(s):"project"===o&&r.push(s);t&&0!==n.length||(console.error("Usage: node index.js --tsconfig <tsconfigPath> -c <file1> [<file2> [...]] -p <additionalFile1> [<additionalFile2> [...]]"),process.exit(1));try{const e=new s.default(t).compile(n,r);process.stdout.write(e.toString())}catch(e){console.error("Compilation failed:",e),process.exit(1)}}()},325:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BracketAccessTransformer=void 0;const r=n(710),s=n(71);t.BracketAccessTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.ElementAccessExpression]}transformNode(e,t){if(!r.Node.isElementAccessExpression(e))return e;const n=e,o=n.getExpression(),i=n.getArgumentExpression();if(!i)return e;const a=o.getType();if(!(0,s.getIsUnityAPIType)(a))return e;const l=a.getSymbol();if(!l)return e;const c=l.getDeclarations().filter((e=>r.Node.isClassDeclaration(e)||r.Node.isInterfaceDeclaration(e)));if(0===c.length)return e;const g=[],p=[],u=new Set;if(c.forEach((e=>{e.getMethods().forEach((e=>{var t;const n=e.getName();if(n===s.GET_ITEM_NAME||n===s.SET_ITEM_NAME){const r=null===(t=e.getSignature().getDeclaration())||void 0===t?void 0:t.getText();r&&!u.has(r)&&(n===s.GET_ITEM_NAME?g.push(e):p.push(e),u.add(r))}}))})),0===g.length&&0===p.length)return e;const d=n.getParent();if(r.Node.isBinaryExpression(d)&&d.getOperatorToken().getKind()===r.SyntaxKind.EqualsToken&&d.getLeft()===n){if(0===p.length)return e;const n=d.getRight();if(!p.find((e=>{const r=e.getParameters();if(2!==r.length)return!1;const s=r[0].getType(),o=r[1].getType(),a=i.getType(),l=n.getType(),c=t.typeChecker;return c.isTypeAssignableTo(a,s)&&c.isTypeAssignableTo(l,o)})))return e;const r=o.getText(),a=i.getText(),l=n.getText(),c=`${r}.${s.SET_ITEM_NAME}(${a}, ${l})`;return d.replaceWithText(c),d}{if(0===g.length)return e;if(!g.find((e=>{const n=e.getParameters();if(1!==n.length)return!1;const r=n[0].getType(),s=i.getType();return t.typeChecker.isTypeAssignableTo(s,r)})))return e;const r=o.getText(),a=i.getText(),l=`${r}.${s.GET_ITEM_NAME}(${a})`;return n.replaceWithText(l),n}}}},538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCallTransformer=void 0;const r=n(710),s=n(71);t.ComponentCallTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){let n=e;if(r.Node.isCallExpression(e)){const o=e,i=o.getExpression(),a=o.getTypeArguments(),l=o.getArguments();if(a.length>0||this.isTypeofArgument(l)){const e=i.getLastChildByKind(r.SyntaxKind.Identifier);if(!e)return n;const c=e.getText();if(s.componentMethods.has(c)){const e=i.getFirstChild();if(!e)return n;const r=t.typeChecker.getTypeAtLocation(e);if((0,s.isOrInheritsFromGameObjectOrComponent)(r,t)){const e=t.typeChecker.getTypeAtLocation(o);if(a.length>0){const r=a[0],s=t.typeChecker.getTypeAtLocation(r);n=this.processTypeArgument(o,s,!1,e)}else if(this.isTypeofArgument(l)){const r=this.getTypeFromTypeofArgument(l[0]);if(r){const s=t.typeChecker.getTypeAtLocation(r);n=this.processTypeArgument(o,s,!0,e)}}}}}}return n}isTypeofArgument(e){return e.length>0&&e[0].getText().startsWith("$typeof(")}getTypeFromTypeofArgument(e){const t=e.getFirstChildByKind(r.SyntaxKind.CallExpression);if(t){const e=t.getArguments()[0];if(r.Node.isTypeNode(e))return e}}processTypeArgument(e,t,n,r){if((0,s.getIsUnityAPIType)(t)){if(n)return e;const o=t.isInterface()?`$typeof("${(0,s.getFullTypeName)(t)}")`:`$typeof(${this.getTypeName(t)})`;return this.createOverloadedCallExpression(e,`${o}`,r)}if(t.isInterface()){const n=(0,s.getFullTypeName)(t);return this.createOverloadedCallExpression(e,`"${n}"`,r,!0)}if((0,s.getGeniesScriptTypeFromType)(t)===s.GeniesScriptType.Monobehaviour){const n=(0,s.getFullTypeName)(t);return this.createOverloadedCallExpression(e,`"${n}"`,r,!0)}return e}getTypeName(e){const t=e.getSymbol();return t?t.getName():e.getText()}createOverloadedCallExpression(e,t,n,r=!1){const s=n.getText();e.getTypeArguments().forEach((t=>{e.removeTypeArgument(t)})),e.insertArgument(0,t);const o=`(${e.getText()} as ${s})`,i=e.replaceWithText(o);if(r){const e=i.getSourceFile(),t=i.getStart();e.insertText(t,"// @ts-ignore\n")}return i}}},286:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DelegateToArrowFunctionTransformer=void 0;const r=n(710),s=n(71);t.DelegateToArrowFunctionTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.typeChecker,i=n.getExpression();if(r.Node.isPropertyAccessExpression(i)){const t=i.getExpression(),n=o.getTypeAtLocation(t);if((0,s.isSignalBusType)(n)||(0,s.isGeniesEventType)(n))return e}const a=o.getResolvedSignature(n);if(!a)return e;const l=a.getParameters();return n.getArguments().map(((e,t)=>{const s=l[t];if(s){const t=o.getTypeOfSymbolAtLocation(s,n);if(this.isDelegateType(t)&&!r.Node.isArrowFunction(e))return this.wrapInArrowFunction(e,t)}return e})),n}isDelegateType(e){return e.getCallSignatures().length>0}wrapInArrowFunction(e,t){const n=t.getCallSignatures();if(0===n.length)throw new Error("Expected delegate type to have call signatures.");const r=n[0].getParameters().map((e=>e.getName())).join(", "),s=`(${r}) => ${e.getText()}(${r})`;return console.log(`Wrapping in arrow function: ${s}`),e.replaceWithText(s)}}},24:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventContextTransformer=void 0;const r=n(710),s=n(71);t.EventContextTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.typeChecker,i=n.getExpression();if(r.Node.isPropertyAccessExpression(i)){const e=i.getName(),t=i.getExpression(),a=o.getTypeAtLocation(t),l=(0,s.isSignalBusType)(a)&&("subscribe"===e||"unsubscribe"===e),c=(0,s.isGeniesEventType)(a)&&("addListener"===e||"removeListener"===e);if(l||c){const e=n.getArguments(),t=l?1:0;if(e.length>t&&r.Node.isPropertyAccessExpression(e[t])){const r=e[t],s=this.getContextExpression(r);n.addArgument(`//@ts-ignore\n${s.getText()}`)}}}return n}getContextExpression(e){return r.Node.isPropertyAccessExpression(e)?e.getExpression():e}}},371:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionMethodTransformer=void 0;const r=n(710),s=n(71);t.ExtensionMethodTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){let n=e;if(e.getKind()===r.SyntaxKind.CallExpression){const t=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.getExpression();if(o.getKind()===r.SyntaxKind.PropertyAccessExpression){const i=o.asKindOrThrow(r.SyntaxKind.PropertyAccessExpression),a=i.getName(),l=i.getExpression(),c=l.getType(),g=i.getSymbol();if(g){const o=g.getDeclarations().filter((e=>e.getKind()==r.SyntaxKind.MethodSignature)).map((e=>e));let i;if(!(o.length>0))return n;if(o.filter((e=>!(e.getJsDocs().flatMap((e=>e.getTags()))||[]).some((e=>"extension"===e.getTagName())))).length>0)return n;if(i=o[0],i){const r=(i.getJsDocs().flatMap((e=>e.getTags()))||[]).find((e=>"extension"===e.getTagName()));if(r){const o=r.getCommentText(),{extensionClass:g,extensionMethod:p,typeParameters:u}=this.parseExtensionComment(o,a),d=e.getSourceFile(),y=this.extractAndOrderTypeArguments(l,t,i,u),m=t.getArguments(),f=g.split("."),h=f.pop()||"",T=f.join(".");this.ensureImport(d,h,T);const x=(0,s.isGeniesScriptType)(c)?"//@ts-ignore\n"+l.getText()+"."+s.GeniesInstancePropName:l.getText(),S=m.map((e=>e.getFullText())).join(", "),E=y.length>0?`${h}.${p}<${y.join(", ")}>(${x}, ${S})`:`${h}.${p}(${x}, ${S})`;n=t.replaceWithText(E)}}}}}return n}parseExtensionComment(e,t){if(!e)return{extensionClass:"",extensionMethod:t,typeParameters:[]};const n=e.match(/^(?<namespace>[a-zA-Z_]\w*(?:\.[a-zA-Z_]\w*)*)\.(?<method>[a-zA-Z_]\w*)\s*(?:<(?<arguments>[^>]*)>)?$/);if(n&&n.groups){const{namespace:e,method:t,arguments:r}=n.groups;return{extensionClass:e,extensionMethod:t,typeParameters:r?r.split(",").map((e=>e.trim())):[]}}return{extensionClass:"",extensionMethod:t,typeParameters:[]}}ensureImport(e,t,n){const r=e.getImportDeclarations();let s=!1;for(const e of r)if(e.getModuleSpecifier().getLiteralText()===n){s=!0,e.getNamedImports().some((e=>e.getName()===t))||e.addNamedImport(t);break}s||e.addImportDeclaration({namedImports:[{name:t}],moduleSpecifier:n})}extractAndOrderTypeArguments(e,t,n,r){const s=e.getType(),o=s.getTypeArguments(),i=s.getSymbolOrThrow().getDeclaredType().getTypeArguments(),a=new Map;o.forEach(((e,t)=>{const n=i[t];n&&a.set(n.getText(),e.getText())}));const l=t.getTypeArguments(),c=n.getTypeParameters();return l.forEach(((e,t)=>{const n=c[t];n&&a.set(n.getText(),e.getText())})),r.map((e=>a.get(e)||e))}}},195:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericMethodTransformer=void 0;const r=n(710),s=n(71);t.GenericMethodTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression],this.sourceFileGenericMap=new Map}transformNode(e,t){let n=e;if(e.getKind()===r.SyntaxKind.CallExpression){const o=e.asKindOrThrow(r.SyntaxKind.CallExpression),i=o.getExpression(),a=i.getLastChildByKind(r.SyntaxKind.Identifier);if(a){const e=a.getText();if(s.componentMethods.has(e)){const e=i.getFirstChild();if(e){const r=t.typeChecker.getTypeAtLocation(e);if((0,s.isOrInheritsFromGameObjectOrComponent)(r,t))return n}}}if(i.getKind()===r.SyntaxKind.PropertyAccessExpression){const a=i.asKindOrThrow(r.SyntaxKind.PropertyAccessExpression);let l=a.getName();const c=a.getSymbol(),g=a.getExpression(),p=g.getType();if(!c)return n;const u=t.getSwapOverload(o);u&&(l=u.methodSwapValue);const d=c.getDeclarations();if(!(d.length>0))return n;{const r=d[0];if(!(0,s.getIsUnityAPIDeclaration)(r))return n;const i=r.getParent().getType(),a=o.getArguments(),c=o.getTypeArguments();if(c.length>0){const u=e.getSourceFile();this.sourceFileGenericMap.has(u)||this.sourceFileGenericMap.set(u,new Map);const d=c.map((e=>e.getType()));if(this.hasMatchingNonGenericOverload(r,d,a))n=this.replaceWithNonGenericCall(o,d,a,t);else{let e=[];const d=this.createGenericMethodVariable(i,l,c,u,e,t);let y;y=t.lastGenericTypeVarIndex.has(u)?t.lastGenericTypeVarIndex.get(u):this.getLastImportIndex(u)+1;const m=u.getStatements().length;y=Math.min(y,m),u.insertVariableStatements(y,e),t.lastGenericTypeVarIndex.set(u,y+e.length);const f=a.map((e=>e.getFullText())).join(", "),h=r.isStatic(),T=(0,s.isGeniesScriptType)(p)&&!h?"//@ts-ignore\n"+g.getText()+"."+s.GeniesInstancePropName:g.getText(),x=h?`${d}(${f})`:`${d}.call(${T}, ${f})`;n=o.replaceWithText(x)}}}}}return n}getTypeName(e){var t,n;return null!==(n=null===(t=e.getSymbol())||void 0===t?void 0:t.getName())&&void 0!==n?n:e.getText()}getTypeKey(e,t){return`${this.getTypeName(e)}$${t.map((e=>{let t=e.getTypeArguments();return t.length>0?this.getTypeKey(e,t):this.getTypeName(e)})).join("$")}`}getKey(e,t,n){return`${this.getTypeName(e)}$${t}$${n.map((e=>this.getTypeName(e.getType()))).join("$")}`}createGenericMethodVariable(e,t,n,o,i,a){const l=this.getTypeName(e),c=this.getKey(e,t,n),g=this.sourceFileGenericMap.get(o);if(!g.has(c)){const e=`$genericMethod(${l}, "${t}", ${n.map((e=>(0,s.getIsUnityAPIType)(e.getType())&&e.getType().isInterface()?`$typeof("${(0,s.getFullTypeName)(e.getType())}")`:this.getTypeNameAndEnsureImported(e.getType(),o,a))).join(", ")})`,p=`_${c.replace(/\$/g,"_")}`;g.set(c,p),i.push({declarationKind:r.VariableDeclarationKind.Const,declarations:[{name:p,initializer:e}]})}return g.get(c)}getTypeNameAndEnsureImported(e,t,n){if(n.sourceFileGenericTypeMap.has(t)){let r=n.sourceFileGenericTypeMap.get(t),s=e.getTypeArguments(),o=this.getTypeKey(e,s);if(r.has(o))return r.get(o)}return(0,s.getTypeNameAndEnsureImported)(e,t)}getLastImportIndex(e){const t=e.getStatements();let n=-1;return t.forEach(((e,t)=>{e.getKind()===r.SyntaxKind.ImportDeclaration&&(n=t)})),n}hasMatchingNonGenericOverload(e,t,n){const r=e.getParent(),o=e.getName(),i=r.getMethods().filter((e=>e.getName()===o&&0===e.getTypeParameters().length)),a="System.Type";for(const e of i){const r=e.getParameters();if(r.filter((e=>(0,s.getFullTypeName)(e.getType())===a)).length===t.length&&r.length===t.length+n.length)return r.every(((e,r)=>r<t.length?(0,s.getFullTypeName)(e.getType())===a:e.getType().getText()===n[r-t.length].getType().getText()))}return!1}replaceWithNonGenericCall(e,t,n,o){const i=e.asKindOrThrow(r.SyntaxKind.CallExpression),a=i.getExpression().asKindOrThrow(r.SyntaxKind.PropertyAccessExpression),l=a.getName(),c=a.getExpression().getText(),g=t.map((t=>(0,s.getIsUnityAPIType)(t)&&t.isInterface()?`$typeof("${(0,s.getFullTypeName)(t)}")`:`$typeof(${this.getTypeNameAndEnsureImported(t,e.getSourceFile(),o)})`)).join(", "),p=n.map((e=>e.getText())).join(", "),u=`${c}.${l}(${g}${p?`, ${p}`:""}) as ${i.getReturnType().getText()}`;return e.replaceWithText(u)}}},780:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericTypeTransformer=void 0;const r=n(710),s=n(71);t.GenericTypeTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.NewExpression]}transformNode(e,t){let n=e;if(e.getKind()===r.SyntaxKind.NewExpression){const o=e.asKindOrThrow(r.SyntaxKind.NewExpression),i=o.getType(),a=o.getTypeArguments().map((e=>e.getType())),l=o.getArguments();if((0,s.getIsUnityAPIType)(i)&&a.length>0){const r=e.getSourceFile();t.sourceFileGenericTypeMap.has(r)||t.sourceFileGenericTypeMap.set(r,new Map);let s=[];const c=this.createGenericVariable(i,a,r,s,t);let g;g=t.lastGenericTypeVarIndex.has(r)?t.lastGenericTypeVarIndex.get(r):this.getLastImportIndex(r)+1;const p=r.getStatements().length;g=Math.min(g,p),r.insertVariableStatements(g,s),t.lastGenericTypeVarIndex.set(r,g+s.length);const u=`new ${c}(${l.map((e=>e.getFullText())).join(", ")}) as ${i.getText()}`;n=o.replaceWithText(u)}}return n}getTypeName(e){var t,n;return null!==(n=null===(t=e.getSymbol())||void 0===t?void 0:t.getName())&&void 0!==n?n:e.getText()}getKey(e,t){return`${this.getTypeName(e)}$${t.map((e=>{let t=e.getTypeArguments();return t.length>0?this.getKey(e,t):this.getTypeName(e)})).join("$")}`}createGenericVariable(e,t,n,s,o){const i=this.getTypeName(e),a=this.getKey(e,t),l=o.sourceFileGenericTypeMap.get(n);if(!l.has(a)){const e=`$generic(${i}, ${t.map((e=>this.getTypeNameAndEnsureImported(e,n,s,o))).join(", ")})`,c=`_${a.replace(/\$/g,"_")}`;l.set(a,c),s.push({declarationKind:r.VariableDeclarationKind.Const,declarations:[{name:c,initializer:e}]})}return l.get(a)}getTypeNameAndEnsureImported(e,t,n,r){return e.getTypeArguments().length>0?this.createGenericVariable(e,e.getTypeArguments(),t,n,r):(0,s.getTypeNameAndEnsureImported)(e,t)}getLastImportIndex(e){const t=e.getStatements();let n=-1;return t.forEach(((e,t)=>{e.getKind()===r.SyntaxKind.ImportDeclaration&&(n=t)})),n}}},551:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeniesInstanceTransformer=void 0;const r=n(710),s=n(71);t.GeniesInstanceTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e.asKindOrThrow(r.SyntaxKind.CallExpression),o=t.typeChecker,i=o.getTypeAtLocation(n.getExpression());if(!(0,s.getIsUnityAPIType)(i))return e;const a=n.getArguments();return a.forEach(((e,t)=>{const n=o.getTypeAtLocation(e);if((0,s.isGeniesScriptType)(n)){const n=`//@ts-ignore\n${e.getText()}.${s.GeniesInstancePropName}`;a[t]=e.replaceWithText(n)}})),n}}},682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumericOverloadResolutionTransformer=void 0;const r=n(710),s=n(71);t.NumericOverloadResolutionTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){if(!r.Node.isCallExpression(e))return e;const n=e,o=n.getExpression();if(!r.Node.isPropertyAccessExpression(o)&&!r.Node.isIdentifier(o))return e;const i=(r.Node.isPropertyAccessExpression(o)?o.getNameNode():o).getSymbol();if(!i)return e;const a=i.getDeclarations().filter((e=>r.Node.isMethodDeclaration(e)));if(0===a.length)return e;const l=a[0];if(!(0,s.getIsUnityAPIDeclaration)(l))return e;const c=t.typeChecker,g=n.getArguments().map((e=>this.inferPossibleTypes(e,c,n))),p=this.selectBestOverload(a,g,c);if(!p)return e;const u=p.getJsDocs();let d;for(const e of u){const t=e.getTags();for(const e of t)if("methodSwap"===e.getTagName()){d=e.getCommentText();break}if(d)break}if(!d)return e;if(p.getTypeParameters().length>0)return t.setSwapOverload(n,{declaration:p,methodSwapValue:d}),e;const y=n.getArguments().map(((e,t)=>{const n=g[t],r=c.getTypeAtLocation(p.getParameters()[t]);return n.find((e=>this.typesAreEqual(e,r)))?e.getFullText():(n.some((e=>this.isCastable(e,r))),`(${e.getFullText()}) as ${r.getText()}`)}));let m;m=r.Node.isPropertyAccessExpression(o)?`${o.getExpression().getText()}.${d}`:d;const f=`// @ts-ignore\n${m}(${y.join(", ")})`;return n.replaceWithText(f)}inferPossibleTypes(e,t,n){const r=[],s=t.getTypeAtLocation(e);let o=[];const i=this.getNumericValue(e,n);if(void 0!==i)o=this.inferTypesFromNumericInfo(i);else{const e=this.getBrandedTypes(s,t);if(e.length>0)r.push(...e);else{if(!this.isNumberType(s))return r.push(s),r;o=["byte","sbyte","short","ushort","int","uint","float","double"]}}for(const e of o){const n=this.getTypeByName(e,t);n&&r.push(n)}return r}getNumericValue(e,t){const n=this.getNumericLiteralInfo(e);if(void 0!==n)return n;if(r.Node.isIdentifier(e)||r.Node.isPropertyAccessExpression(e)){const n=e.getSymbol();if(n){const e=n.getDeclarations();if(e&&e.length>0){const s=e[0];if(r.Node.isVariableDeclaration(s)||r.Node.isPropertyDeclaration(s)){const e=this.performFlowAnalysis(n,s,t);if(e)return e}}}}}performFlowAnalysis(e,t,n){let s;const o=t.getInitializer();if(o){const r=this.getNumericValueFromExpression(o,e,t,n);r&&(s=r)}const i=n.getFirstAncestorByKind(r.SyntaxKind.MethodDeclaration);if(!i)return s;const a=i.getStatements()||[],l=n.getStart();for(const o of a){if(o.getStart()>l)break;{const i=o.getDescendants().filter((e=>r.Node.isBinaryExpression(e)||r.Node.isPrefixUnaryExpression(e)||r.Node.isPostfixUnaryExpression(e)));for(const o of i)if(r.Node.isBinaryExpression(o)){const i=o.getOperatorToken().getKind(),a=o.getLeft(),l=o.getRight();if(this.isAssignmentToSymbol(a,e))if(i===r.SyntaxKind.EqualsToken){s=this.getNumericValueFromExpression(l,e,t,n,s)||void 0}else if([r.SyntaxKind.PlusEqualsToken,r.SyntaxKind.MinusEqualsToken,r.SyntaxKind.AsteriskEqualsToken,r.SyntaxKind.SlashEqualsToken,r.SyntaxKind.PercentEqualsToken].includes(i)){const r=this.getNumericValueFromExpression(l,e,t,n,s);if(r&&s){s=this.evaluateCompoundAssignment(i,s,r)||void 0}else s=void 0}}else if(r.Node.isPrefixUnaryExpression(o)||r.Node.isPostfixUnaryExpression(o)){const t=o.getOperatorToken(),n=o.getOperand();if(this.isAssignmentToSymbol(n,e))if(s){let e=t===r.SyntaxKind.PlusPlusToken?1:-1;s={value:s.value+e,hasDecimal:s.hasDecimal}}else s=void 0}}}return s}isAssignmentToSymbol(e,t){if(r.Node.isPropertyAccessExpression(e)){const n=e.getExpression();if(r.Node.isThisExpression(n))return e.getNameNode().getSymbol()===t}else if(r.Node.isIdentifier(e))return e.getSymbol()===t;return!1}getNumericValueFromExpression(e,t,n,s,o){if(r.Node.isNumericLiteral(e))return this.getNumericLiteralInfo(e);if(r.Node.isIdentifier(e)||r.Node.isPropertyAccessExpression(e)){if(this.isAssignmentToSymbol(e,t))return o;{const t=e.getSymbol();if(t){const n=t.getDeclarations();if(n&&n.length>0){const s=n[0];if(r.Node.isVariableDeclaration(s)||r.Node.isPropertyDeclaration(s))return this.performFlowAnalysis(t,s,e)}}}}else if(r.Node.isBinaryExpression(e)){const r=this.getNumericValueFromExpression(e.getLeft(),t,n,s,o),i=this.getNumericValueFromExpression(e.getRight(),t,n,s,o);if(r&&i){const t=e.getOperatorToken().getKind();return this.evaluateBinaryOperation(t,r,i)}}}evaluateCompoundAssignment(e,t,n){const s={[r.SyntaxKind.PlusEqualsToken]:r.SyntaxKind.PlusToken,[r.SyntaxKind.MinusEqualsToken]:r.SyntaxKind.MinusToken,[r.SyntaxKind.AsteriskEqualsToken]:r.SyntaxKind.AsteriskToken,[r.SyntaxKind.SlashEqualsToken]:r.SyntaxKind.SlashToken,[r.SyntaxKind.PercentEqualsToken]:r.SyntaxKind.PercentToken}[e];if(void 0!==s)return this.evaluateBinaryOperation(s,t,n)}evaluateBinaryOperation(e,t,n){let s,o=t.hasDecimal||n.hasDecimal;switch(e){case r.SyntaxKind.PlusToken:s=t.value+n.value;break;case r.SyntaxKind.MinusToken:s=t.value-n.value;break;case r.SyntaxKind.AsteriskToken:s=t.value*n.value;break;case r.SyntaxKind.SlashToken:s=t.value/n.value,o=!0;break;case r.SyntaxKind.PercentToken:s=t.value%n.value;break;default:return}if(void 0!==s)return{value:s,hasDecimal:o}}getNumericLiteralInfo(e){if(r.Node.isNumericLiteral(e)){const t=e.getText();return{value:Number(t),hasDecimal:t.includes(".")}}if(r.Node.isPrefixUnaryExpression(e)&&e.getOperatorToken()===r.SyntaxKind.MinusToken){const t=e.getOperand();if(r.Node.isNumericLiteral(t)){const e=t.getText();return{value:-Number(e),hasDecimal:e.includes(".")}}}}inferTypesFromNumericInfo(e){const{value:t,hasDecimal:n}=e,r=new Set;return n?(r.add("float"),r.add("double")):(t>=-2147483648&&t<=2147483647&&r.add("int"),t>=-32768&&t<=32767&&r.add("short"),t>=-128&&t<=127&&r.add("sbyte"),t>=0&&t<=255&&r.add("byte"),t>=0&&t<=65535&&r.add("ushort"),t>=0&&t<=4294967295&&r.add("uint")),Array.from(r)}isNumberType(e){return"number"===this.cleanTypeText(e.getText())}getTypeByName(e,t){const n=t.resolveName(e,void 0,r.SymbolFlags.All,!1);if(n)return t.getDeclaredTypeOfSymbol(n);console.log(`Global type '${e}' not found.`)}selectBestOverload(e,t,n){let r,s=-1;for(const o of e){const e=this.scoreOverload(o,t,n);e>s&&(s=e,r=o)}return r}scoreOverload(e,t,n){const r=e.getParameters();if(r.length!==t.length)return-1;let s=0;for(let e=0;e<r.length;e++){const o=n.getTypeAtLocation(r[e]),i=t[e];let a=-1;if(this.isValidType(o)){for(const e of i)this.typesAreEqual(e,o)?a=Math.max(a,2):this.isCastable(e,o)&&(a=Math.max(a,1));if(-1===a)return-1;s+=a}}return s}isValidType(e){if(e.isTypeParameter())return!1;const t=this.cleanTypeText(e.getText());return["byte","sbyte","short","ushort","int","uint","float","double","number"].includes(t)}typesAreEqual(e,t){return this.cleanTypeText(e.getText())===this.cleanTypeText(t.getText())}isCastable(e,t){var n,r;const s=this.cleanTypeText(e.getText()),o=this.cleanTypeText(t.getText());return null!==(r=null===(n={byte:["short","ushort","int","uint","float","double","number"],sbyte:["short","int","float","double","number"],short:["int","float","double","number"],ushort:["int","uint","float","double","number"],int:["float","double","number"],uint:["float","double","number"],float:["double","number"],double:["number"],number:["byte","sbyte","short","ushort","int","uint","float","double"]}[s])||void 0===n?void 0:n.includes(o))&&void 0!==r&&r}cleanTypeText(e){return e.replace(/&\s*\{[^}]*\}/,"").trim()}getBrandedTypes(e,t){const n=[],r=e.getText().match(/number\s*&\s*\{\s*__([a-zA-Z]+)Brand\?:\s*undefined\s*\}/);if(r){const e=r[1],s=this.getTypeByName(e,t);s&&n.push(s)}return n}}},821:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorOverloadingTransformer=void 0;const r=n(710),s=n(71);t.OperatorOverloadingTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.BinaryExpression,r.SyntaxKind.PrefixUnaryExpression,r.SyntaxKind.PostfixUnaryExpression]}transformNode(e,t){return r.Node.isBinaryExpression(e)?this.transformBinaryExpression(e,t):r.Node.isPrefixUnaryExpression(e)||r.Node.isPostfixUnaryExpression(e)?this.transformUnaryExpression(e,t):e}transformBinaryExpression(e,t){var n,o;const i=e.getOperatorToken().getKind(),a=(0,s.getOperatorMethodName)(i);if(a){if(i===r.SyntaxKind.EqualsEqualsEqualsToken||i===r.SyntaxKind.EqualsEqualsToken||i===r.SyntaxKind.ExclamationEqualsEqualsToken||i==r.SyntaxKind.ExclamationEqualsToken){const t=this.unwrapParenthesizedExpression(e.getRight());if(r.Node.isNullLiteral(t)||r.Node.isUndefinedKeyword(t))return e}const l=this.unwrapParenthesizedExpression(e.getLeft()),c=this.unwrapParenthesizedExpression(e.getRight()),g=this.transformNodeIfNeeded(l,t),p=this.transformNodeIfNeeded(c,t);let u=t.typeChecker.getTypeAtLocation(g),d=t.typeChecker.getTypeAtLocation(p);if(d.isLiteral()&&(d=t.typeChecker.getBaseTypeOfLiteralType(d)),u.isLiteral()&&(u=t.typeChecker.getBaseTypeOfLiteralType(u)),!(0,s.getIsUnityAPIType)(u)&&!(0,s.getIsUnityAPIType)(d))return e;const y=g.getText(),m=p.getText(),f=`${null===(n=u.getSymbol())||void 0===n?void 0:n.getName()}.${a}(${y}, ${m})`;if(this.isCompoundAssignment(i)){const t=l.getText(),n=this.getEquivalentOperatorKind(i),r=(0,s.getOperatorMethodName)(n),a=`${t} = ${null===(o=u.getSymbol())||void 0===o?void 0:o.getName()}.${r}(${t}, ${m})`;return e.replaceWithText(a)}if(r.Node.isBinaryExpression(g)||r.Node.isBinaryExpression(p)){const t=`(${f})`;return e.replaceWithText(t)}return e.replaceWithText(f)}return e}transformUnaryExpression(e,t){var n;const r=this.unwrapParenthesizedExpression(e.getOperand()),o=e.getOperatorToken(),i=(0,s.getOperatorMethodName)(o);if(i){const o=t.typeChecker.getTypeAtLocation(r);if((0,s.getUnaryOperatorMethodReturnType)(o,i)){const t=r.getText(),s=`(${null===(n=o.getSymbol())||void 0===n?void 0:n.getName()}.${i}(${t}))`;return e.replaceWithText(s)}}return e}transformNodeIfNeeded(e,t){const n=this.unwrapParenthesizedExpression(e);return r.Node.isBinaryExpression(n)||r.Node.isPrefixUnaryExpression(n)||r.Node.isPostfixUnaryExpression(n)?this.transformNode(n,t):n}unwrapParenthesizedExpression(e){return r.Node.isParenthesizedExpression(e)?this.unwrapParenthesizedExpression(e.getExpression()):e}isCompoundAssignment(e){return e>=r.SyntaxKind.FirstCompoundAssignment&&e<=r.SyntaxKind.LastCompoundAssignment}getEquivalentOperatorKind(e){switch(e){case r.SyntaxKind.PlusEqualsToken:return r.SyntaxKind.PlusToken;case r.SyntaxKind.MinusEqualsToken:return r.SyntaxKind.MinusToken;case r.SyntaxKind.AsteriskEqualsToken:return r.SyntaxKind.AsteriskToken;case r.SyntaxKind.SlashEqualsToken:return r.SyntaxKind.SlashToken;case r.SyntaxKind.PercentEqualsToken:return r.SyntaxKind.PercentToken;case r.SyntaxKind.AmpersandEqualsToken:return r.SyntaxKind.AmpersandToken;case r.SyntaxKind.BarEqualsToken:return r.SyntaxKind.BarToken;case r.SyntaxKind.CaretEqualsToken:return r.SyntaxKind.CaretToken;case r.SyntaxKind.LessThanLessThanEqualsToken:return r.SyntaxKind.LessThanLessThanToken;case r.SyntaxKind.GreaterThanGreaterThanEqualsToken:return r.SyntaxKind.GreaterThanGreaterThanToken;case r.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken:return r.SyntaxKind.GreaterThanGreaterThanGreaterThanToken;default:throw new Error(`Unsupported compound operator: ${r.SyntaxKind[e]}`)}}}},113:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseWrapperTransformer=void 0;const r=n(710);t.PromiseWrapperTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.AwaitExpression,r.SyntaxKind.CallExpression]}transformNode(e,t){const n=t.typeChecker;if(r.Node.isAwaitExpression(e)){const t=e,r=t.getExpression(),s=n.getTypeAtLocation(r);if(this.isPromise(s)){const e=this.getPromiseTypeArgument(s,n),o=e?`await $promise(${r.getText()}) as ${e}`:`await $promise(${r.getText()})`;return t.replaceWithText(`${o}`)}}else if(r.Node.isCallExpression(e)){const t=e,s=t.getExpression();if(r.Node.isPropertyAccessExpression(s)){const e=s.getName(),r=s.getExpression(),o=n.getTypeAtLocation(r);if(this.isPromise(o)&&this.isPromiseMethod(e)){this.getPromiseTypeArgument(o,n);const e=`$promise(${r.getText()})${t.getText().substring(r.getText().length)}`;return t.replaceWithText(e)}}}return e}isPromise(e){const t=e.getSymbol();if(!t)return!1;const n=t.getName();return"Task"===n||"Task$1"===n||"UniTask"===n||"UniTask$1"===n||"YieldAwaitable"===n}isPromiseMethod(e){return["then","catch","finally"].includes(e)}getPromiseTypeArgument(e,t){const n=e.getTypeArguments();if(1===n.length){const e=n[0],t=e.getSymbol();return t?t.getName():e.getText()}}}},340:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefTransformer=void 0;const r=n(710);t.RefTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.BinaryExpression,r.SyntaxKind.PropertyAccessExpression]}transformNode(e,t){let n=e;if(r.Node.isBinaryExpression(e)&&e.getOperatorToken().getKind()===r.SyntaxKind.EqualsToken){const s=e,o=s.getLeft(),i=s.getRight();if(r.Node.isPropertyAccessExpression(o)&&"value"===o.getName()&&this.isRefType(o.getExpression(),t.typeChecker)){const t=o.getExpression().getText(),r=i.getText();n=e.replaceWithText(`$set(${t}, ${r})`)}}else if(r.Node.isPropertyAccessExpression(e)){const r=e;if("value"===r.getName()&&this.isRefType(r.getExpression(),t.typeChecker)){const t=r.getExpression().getText();n=e.replaceWithText(`$unref(${t})`)}}return n}isRefType(e,t){const n=t.getTypeAtLocation(e).getSymbol();return!!n&&"$Ref"===n.getName()}}},452:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptableObjectCreateInstanceTransformer=void 0;const r=n(710),s=n(71);t.ScriptableObjectCreateInstanceTransformer=class{constructor(){this.nodeTypes=[r.SyntaxKind.CallExpression]}transformNode(e,t){let n=e;if(r.Node.isCallExpression(e)){const s=e,o=s.getExpression(),i=s.getTypeArguments(),a=s.getArguments();if(i.length>0||this.isTypeofArgument(a)){const e=o.getLastChildByKind(r.SyntaxKind.Identifier);if(!e)return n;const l=e.getText();if("CreateInstance"===l){const e=o.getFirstChild();if(!e)return n;const r=t.typeChecker.getTypeAtLocation(e);if(this.isScriptableObject(r,t)){const r=t.typeChecker.getTypeAtLocation(s);if(i.length>0){const o=i[0],a=t.typeChecker.getTypeAtLocation(o);n=this.processTypeArgument(s,a,!1,l,e,r)}else if(this.isTypeofArgument(a)){const o=this.getTypeFromTypeofArgument(a[0]);if(o){const i=t.typeChecker.getTypeAtLocation(o);n=this.processTypeArgument(s,i,!0,l,e,r)}}}}}}return n}isTypeofArgument(e){return e.length>0&&e[0].getText().startsWith("$typeof(")}getTypeFromTypeofArgument(e){const t=e.getFirstChildByKind(r.SyntaxKind.CallExpression);if(t){const e=t.getArguments()[0];if(r.Node.isTypeNode(e))return e}}processTypeArgument(e,t,n,r,o,i){if((0,s.getIsUnityAPIType)(t)){if(n)return e;const s=this.getTypeName(t),a=this.createOverloadedCallExpression(e,`$typeof(${s})`,r,o,i);return e.replaceWithText(a)}if((0,s.getGeniesScriptTypeFromType)(t)===s.GeniesScriptType.ScriptableObject){const n=this.getRelativePath(t),s=this.createOverloadedCallExpression(e,`"${n}"`,r,o,i,!0);return e.replaceWithText(s)}return e}isScriptableObject(e,t){if(!e)return!1;const n=e.getSymbol();return!!n&&("ScriptableObject"===n.getName()||this.inheritsFrom(e,["ScriptableObject"],t))}inheritsFrom(e,t,n){var r;const s=this.getBaseTypes(e,n);for(const e of s){const s=null===(r=e.getSymbol())||void 0===r?void 0:r.getName();if(s&&t.includes(s))return!0;if(this.inheritsFrom(e,t,n))return!0}return!1}getBaseTypes(e,t){const n=[],s=e.getSymbol();if(!s)return n;const o=s.getDeclarations();if(!o)return n;for(const e of o)if(r.Node.isClassDeclaration(e)){const r=e.getHeritageClauses();for(const e of r){const r=e.getTypeNodes();for(const e of r){const r=t.typeChecker.getTypeAtLocation(e);r&&n.push(r)}}}return n}getRelativePath(e){const t=e.getSymbol();if(!t)return"";const n=t.getDeclarations();if(0===n.length)return"";const r=n[0].getSourceFile(),o=r.getFilePath();return(0,s.convertToAssetsRelativePath)(r.getDirectoryPath(),o)}getTypeName(e){const t=e.getSymbol();return t?t.getName():e.getText()}createOverloadedCallExpression(e,t,n,r,s,o=!1){const i=e.getArguments().map((e=>e.getText())).join(", "),a=s.getText();let l=`(${r.getFullText()}.${n}(${t}${i?", "+i:""}) as ${a})`;return o&&(l=`${l}`),l}}},58:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformationContext=void 0,t.TransformationContext=class{constructor(e){this.sourceFileGenericTypeMap=new Map,this.lastGenericTypeVarIndex=new Map,this.overloadMap=new Map,this.typeChecker=e}setSwapOverload(e,t){this.overloadMap.set(e,t)}getSwapOverload(e){return this.overloadMap.get(e)}}},710:e=>{e.exports=require("ts-morph")},899:e=>{e.exports=require("typescript")},985:e=>{e.exports=require("typescript/lib/tsserverlibrary")},928:e=>{e.exports=require("path")}},t={};return function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(229)})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FHakRwekIsUUFBUyxDQUFDLEdBT1gsT0FIQXN6QixFQUFvQkYsR0FBVUcsS0FBS3R6QixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTbXpCLEdBR3BFbHpCLEVBQU9ELE9BQ2YsQ0NuQjBCbXpCLENBQW9CLEkiLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy9Db21waWxlclV0aWxzLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3Qvc3JjL0dlbmllc0RpYWdub3N0aWNzVXRpbHMudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9zcmMvY29tcGlsZXIvQ29tcGlsZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9zcmMvaW5kZXgudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9zcmMvdHJhbnNmb3JtZXJzL0JyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy90cmFuc2Zvcm1lcnMvQ29tcG9uZW50Q2FsbFRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3Qvc3JjL3RyYW5zZm9ybWVycy9EZWxlZ2F0ZVRvQXJyb3dGdW5jdGlvblRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3Qvc3JjL3RyYW5zZm9ybWVycy9FdmVudENvbnRleHRUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy90cmFuc2Zvcm1lcnMvRXh0ZW5zaW9uTWV0aG9kVHJhbnNmb3JtZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9zcmMvdHJhbnNmb3JtZXJzL0dlbmVyaWNNZXRob2RUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy90cmFuc2Zvcm1lcnMvR2VuZXJpY1R5cGVUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy90cmFuc2Zvcm1lcnMvR2VuaWVzSW5zdGFuY2VUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy90cmFuc2Zvcm1lcnMvTnVtZXJpY092ZXJsb2FkUmVzb2x1dGlvblRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3Qvc3JjL3RyYW5zZm9ybWVycy9PcGVyYXRvck92ZXJsb2FkaW5nVHJhbnNmb3JtZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9zcmMvdHJhbnNmb3JtZXJzL1Byb21pc2VXcmFwcGVyVHJhbnNmb3JtZXIudHMiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9zcmMvdHJhbnNmb3JtZXJzL1JlZlRyYW5zZm9ybWVyLnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3Qvc3JjL3RyYW5zZm9ybWVycy9TY3JpcHRhYmxlT2JqZWN0Q3JlYXRlSW5zdGFuY2VUcmFuc2Zvcm1lci50cyIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3NyYy90cmFuc2Zvcm1lcnMvVHJhbnNmb3JtYXRpb25Db250ZXh0LnRzIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3QvZXh0ZXJuYWwgY29tbW9uanMgXCJ0cy1tb3JwaFwiIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3QvZXh0ZXJuYWwgY29tbW9uanMgXCJ0eXBlc2NyaXB0XCIiLCJmaWxlOi8vL1VzZXJzL3JkYWxhcS9EZXNrdG9wL1Byb2plY3RzL2Rldi1raXQtdW5pdHktc2RrL0dlbmllc1NoYXJlZFBhY2thZ2VzL2NvbS5nZW5pZXMuY29tcG9uZW50cy5zZGsuc2NyaXB0aW5nL0ludGVybmFsL1R5cGVTY3JpcHQvQ29tcGlsZXIvUHJvamVjdC9leHRlcm5hbCBjb21tb25qcyBcInR5cGVzY3JpcHQvbGliL3Rzc2VydmVybGlicmFyeVwiIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3QvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcInBhdGhcIiIsImZpbGU6Ly8vVXNlcnMvcmRhbGFxL0Rlc2t0b3AvUHJvamVjdHMvZGV2LWtpdC11bml0eS1zZGsvR2VuaWVzU2hhcmVkUGFja2FnZXMvY29tLmdlbmllcy5jb21wb25lbnRzLnNkay5zY3JpcHRpbmcvSW50ZXJuYWwvVHlwZVNjcmlwdC9Db21waWxlci9Qcm9qZWN0L3dlYnBhY2svYm9vdHN0cmFwIiwiZmlsZTovLy9Vc2Vycy9yZGFsYXEvRGVza3RvcC9Qcm9qZWN0cy9kZXYta2l0LXVuaXR5LXNkay9HZW5pZXNTaGFyZWRQYWNrYWdlcy9jb20uZ2VuaWVzLmNvbXBvbmVudHMuc2RrLnNjcmlwdGluZy9JbnRlcm5hbC9UeXBlU2NyaXB0L0NvbXBpbGVyL1Byb2plY3Qvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImdlbmllcy10eXBlc2NyaXB0LWNvbXBpbGVyXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImdlbmllcy10eXBlc2NyaXB0LWNvbXBpbGVyXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgKCkgPT4ge1xucmV0dXJuICIsImltcG9ydCB7XG4gICAgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbixcbiAgICBDbGFzc0RlY2xhcmF0aW9uLFxuICAgIERlY29yYXRvcixcbiAgICBFbnVtRGVjbGFyYXRpb24sXG4gICAgRXhwcmVzc2lvbiwgSW1wb3J0RGVjbGFyYXRpb25TdHJ1Y3R1cmUsXG4gICAgTWV0aG9kRGVjbGFyYXRpb24sXG4gICAgTmV3RXhwcmVzc2lvbixcbiAgICBOb2RlLFxuICAgIFByb3BlcnR5RGVjbGFyYXRpb24sXG4gICAgU291cmNlRmlsZSwgU3RydWN0dXJlS2luZCxcbiAgICBTeW50YXhLaW5kLFxuICAgIFR5cGUsIFR5cGVGb3JtYXRGbGFnc1xufSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vdHJhbnNmb3JtZXJzL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuXG5leHBvcnQgY29uc3QgR2VuaWVzRGVjbGFyYXRpb25GaWxlQW5ub3RhdGlvbiA9IFwiLy9AR2VuaWVzLVVuaXR5QXBpSW50ZXJmYWNlXCI7XG5leHBvcnQgY29uc3QgR2VuaWVzSW5zdGFuY2VQcm9wTmFtZSA9IFwiX19nZW5pZXNJbnN0YW5jZV9fXCI7XG5leHBvcnQgY29uc3QgTW9ub2JlaGF2aW91clR5cGVOYW1lID0gXCJNb25vQmVoYXZpb3VyXCI7XG5leHBvcnQgY29uc3QgU2NyaXB0YWJsZU9iamVjdFR5cGVOYW1lID0gXCJTY3JpcHRhYmxlT2JqZWN0XCI7XG5leHBvcnQgY29uc3QgTm9uU2VyaWFsaXplZERlY29yYXRvciA9IFwiTm9uU2VyaWFsaXplZFwiO1xuZXhwb3J0IGNvbnN0IEhpZGVJbkluc3BlY3RvckRlY29yYXRvciA9IFwiSGlkZUluSW5zcGVjdG9yXCI7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplRmllbGREZWNvcmF0b3IgPSBcIlNlcmlhbGl6ZUZpZWxkXCI7XG5leHBvcnQgY29uc3QgSGVhZGVyRGVjb3JhdG9yID0gXCJIZWFkZXJcIjtcbmV4cG9ydCBjb25zdCBTcGFjZURlY29yYXRvciA9IFwiU3BhY2VcIjtcbmV4cG9ydCBjb25zdCBUb29sdGlwRGVjb3JhdG9yID0gXCJUb29sdGlwXCI7XG5cbmV4cG9ydCBjb25zdCBHRVRfSVRFTV9OQU1FID0gXCJnZXRfSXRlbVwiO1xuZXhwb3J0IGNvbnN0IFNFVF9JVEVNX05BTUUgPSBcInNldF9JdGVtXCI7XG5cbmV4cG9ydCBjb25zdCBjb21wb25lbnRNZXRob2RzID0gbmV3IFNldChbXG4gICAgJ0dldENvbXBvbmVudCcsXG4gICAgJ1RyeUdldENvbXBvbmVudCcsXG4gICAgJ0dldENvbXBvbmVudEluQ2hpbGRyZW4nLFxuICAgICdHZXRDb21wb25lbnRzSW5DaGlsZHJlbicsXG4gICAgJ0dldENvbXBvbmVudEluUGFyZW50JyxcbiAgICAnR2V0Q29tcG9uZW50c0luUGFyZW50JyxcbiAgICAnR2V0Q29tcG9uZW50cycsXG4gICAgJ0FkZENvbXBvbmVudCdcbl0pO1xuXG5leHBvcnQgZW51bSBHZW5pZXNTY3JpcHRVaUV2ZW50cyB7XG4gICAgTm9uZSA9IDAsXG4gICAgUG9pbnRlckNsaWNrID0gMSA8PCAwLCAvLyAxXG4gICAgUG9pbnRlckRvd24gPSAxIDw8IDEsIC8vIDJcbiAgICBQb2ludGVyRW50ZXIgPSAxIDw8IDIsIC8vIDRcbiAgICBQb2ludGVyRXhpdCA9IDEgPDwgMywgLy8gOFxuICAgIFBvaW50ZXJVcCA9IDEgPDwgNCwgLy8gMTZcbiAgICBCZWdpbkRyYWcgPSAxIDw8IDUsIC8vIDMyXG4gICAgRGVzZWxlY3QgPSAxIDw8IDYsIC8vIDY0XG4gICAgRHJhZyA9IDEgPDwgNywgLy8gMTI4XG4gICAgRHJvcCA9IDEgPDwgOCwgLy8gMjU2XG4gICAgRW5kRHJhZyA9IDEgPDwgOSwgLy8gNTEyXG4gICAgSW5pdGlhbGl6ZVBvdGVudGlhbERyYWcgPSAxIDw8IDEwLCAvLyAxMDI0XG4gICAgU2Nyb2xsID0gMSA8PCAxMSwgLy8gMjA0OFxuICAgIFNlbGVjdCA9IDEgPDwgMTIsIC8vIDQwOTZcbiAgICBTdWJtaXQgPSAxIDw8IDEzLCAvLyA4MTkyXG4gICAgVXBkYXRlU2VsZWN0ZWQgPSAxIDw8IDE0LCAvLyAxNjM4NFxuICAgIE1vdmUgPSAxIDw8IDE1LCAvLyAzMjc2OFxuICAgIENhbmNlbCA9IDEgPDwgMTYgLy8gNjU1MzZcbn1cblxuZXhwb3J0IGNvbnN0IEFsbG93ZWRVaUludGVyZmFjZXMgPSBuZXcgU2V0KFtcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyQ2xpY2tIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyRG93bkhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVBvaW50ZXJFbnRlckhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVBvaW50ZXJFeGl0SGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlclVwSGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JQmVnaW5EcmFnSGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JRGVzZWxlY3RIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklEcmFnSGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JRHJvcEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUVuZERyYWdIYW5kbGVyJyxcbiAgICAnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklJbml0aWFsaXplUG90ZW50aWFsRHJhZ0hhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVNjcm9sbEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVNlbGVjdEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVN1Ym1pdEhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVVwZGF0ZVNlbGVjdGVkSGFuZGxlcicsXG4gICAgJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JTW92ZUhhbmRsZXInLFxuICAgICdVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUNhbmNlbEhhbmRsZXInLFxuXSk7XG5cbmV4cG9ydCBjb25zdCBVaUludGVyZmFjZVRvRW51bU1hcCA9IG5ldyBNYXAoW1xuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyQ2xpY2tIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuUG9pbnRlckNsaWNrXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlckRvd25IYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuUG9pbnRlckRvd25dLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyRW50ZXJIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuUG9pbnRlckVudGVyXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JUG9pbnRlckV4aXRIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuUG9pbnRlckV4aXRdLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklQb2ludGVyVXBIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuUG9pbnRlclVwXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JQmVnaW5EcmFnSGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLkJlZ2luRHJhZ10sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSURlc2VsZWN0SGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLkRlc2VsZWN0XSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JRHJhZ0hhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5EcmFnXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JRHJvcEhhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5Ecm9wXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JRW5kRHJhZ0hhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5FbmREcmFnXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JSW5pdGlhbGl6ZVBvdGVudGlhbERyYWdIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuSW5pdGlhbGl6ZVBvdGVudGlhbERyYWddLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklTY3JvbGxIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuU2Nyb2xsXSxcbiAgICBbJ1VuaXR5RW5naW5lLkV2ZW50U3lzdGVtcy5JU2VsZWN0SGFuZGxlcicsIEdlbmllc1NjcmlwdFVpRXZlbnRzLlNlbGVjdF0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSVN1Ym1pdEhhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5TdWJtaXRdLFxuICAgIFsnVW5pdHlFbmdpbmUuRXZlbnRTeXN0ZW1zLklVcGRhdGVTZWxlY3RlZEhhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5VcGRhdGVTZWxlY3RlZF0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSU1vdmVIYW5kbGVyJywgR2VuaWVzU2NyaXB0VWlFdmVudHMuTW92ZV0sXG4gICAgWydVbml0eUVuZ2luZS5FdmVudFN5c3RlbXMuSUNhbmNlbEhhbmRsZXInLCBHZW5pZXNTY3JpcHRVaUV2ZW50cy5DYW5jZWxdLFxuXSk7XG5cblxuZXhwb3J0IGVudW0gR2VuaWVzU2NyaXB0VHlwZSB7XG4gICAgTm9uZSA9IDAsXG4gICAgTW9ub2JlaGF2aW91ciA9IDEsXG4gICAgU2NyaXB0YWJsZU9iamVjdCA9IDJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eUluZm8ge1xuICAgIFBhdGg6IHN0cmluZztcbiAgICBOYW1lOiBzdHJpbmc7XG4gICAgVHlwZU5hbWU6IHN0cmluZztcbiAgICBDaGlsZFByb3BlcnRpZXM6IFByb3BlcnR5SW5mb1tdO1xuICAgIElzQXJyYXk6IGJvb2xlYW47XG4gICAgSXNFbnVtOiBib29sZWFuO1xuICAgIEVudW1LZXlzOiBzdHJpbmdbXTtcbiAgICBFbnVtVmFsdWVzOiBzdHJpbmdbXTtcbiAgICBEZWNvcmF0b3JzOiBQcm9wZXJ0eURlY29yYXRvckluZm9bXTtcbiAgICBJc0dlbmllc0JlaGF2aW91clJlZjogYm9vbGVhbjtcbiAgICBJc0dlbmllc1NjcmlwdGFibGVPYmplY3RSZWY6IGJvb2xlYW47XG4gICAgSW5pdGlhbGl6ZXJzOiBzdHJpbmdbXTtcbiAgICBBcnJheUVsZW1lbnRJbml0aWFsaXplcjogUHJvcGVydHlJbmZvIHwgdW5kZWZpbmVkO1xuICAgIEFycmF5RGltZW5zaW9uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlEZWNvcmF0b3JJbmZvIHtcbiAgICBUeXBlOiBzdHJpbmc7XG4gICAgQXJnczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUNvbXBpbGVPdXRwdXQge1xuICAgIEZpbGVQYXRoOiBzdHJpbmc7XG4gICAgSXNTdWNjZXNzZnVsOiBib29sZWFuO1xuICAgIEVycm9ycz86IHN0cmluZ1tdO1xuICAgIEJhc2VUeXBlcz86IHN0cmluZ1tdO1xuICAgIEpzU291cmNlOiBzdHJpbmc7XG4gICAgSXNTY3JpcHRhYmxlT2JqOiBib29sZWFuO1xuICAgIElzTW9ub2JlaGF2aW91cjogYm9vbGVhbjtcbiAgICBQcm9wZXJ0aWVzOiBQcm9wZXJ0eUluZm9bXTtcbiAgICBJZDogc3RyaW5nO1xuICAgIERlZmF1bHRUeXBlTmFtZTogc3RyaW5nO1xuICAgIEluaGVyaXRhbmNlQ2hhaW46IHN0cmluZ1tdO1xuICAgIFN1cHBvcnRlZFVpRXZlbnRzOiBHZW5pZXNTY3JpcHRVaUV2ZW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZHNNb25vQmVoYXZpb3VyKGNsYXNzRGVjbDogQ2xhc3NEZWNsYXJhdGlvbik6IGJvb2xlYW4ge1xuICAgIGxldCBiYXNlQ2xhc3MgPSBjbGFzc0RlY2wuZ2V0QmFzZUNsYXNzKCk7XG4gICAgd2hpbGUgKGJhc2VDbGFzcykge1xuICAgICAgICBpZiAoYmFzZUNsYXNzLmdldE5hbWUoKSA9PT0gXCJNb25vQmVoYXZpb3VyXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGJhc2VDbGFzcyA9IGJhc2VDbGFzcy5nZXRCYXNlQ2xhc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kc1NjcmlwdGFibGVPYmplY3QoY2xhc3NEZWNsOiBDbGFzc0RlY2xhcmF0aW9uKTogYm9vbGVhbiB7XG4gICAgbGV0IGJhc2VDbGFzcyA9IGNsYXNzRGVjbC5nZXRCYXNlQ2xhc3MoKTtcbiAgICB3aGlsZSAoYmFzZUNsYXNzKSB7XG4gICAgICAgIGlmIChiYXNlQ2xhc3MuZ2V0TmFtZSgpID09PSBcIlNjcmlwdGFibGVPYmplY3RcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYmFzZUNsYXNzID0gYmFzZUNsYXNzLmdldEJhc2VDbGFzcygpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVEZWNvcmF0b3JzKGRlY29yYXRvcnM6IERlY29yYXRvcltdLCBjb25kaXRpb246IChkZWNvcmF0b3I6IERlY29yYXRvcikgPT4gYm9vbGVhbikge1xuICAgIGRlY29yYXRvcnMuZm9yRWFjaChkZWNvcmF0b3IgPT4ge1xuICAgICAgICBpZiAoY29uZGl0aW9uKGRlY29yYXRvcikpIHtcbiAgICAgICAgICAgIGRlY29yYXRvci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyB0aGUgZnVsbCBwcm90b3R5cGUgY2hhaW4gb2YgYSBjbGFzcywgaW5jbHVkaW5nIGJhc2UgY2xhc3NlcyBhbmQgaW1wbGVtZW50ZWQgaW50ZXJmYWNlcy5cbiAqIEBwYXJhbSBjbGFzc0RlY2xhcmF0aW9uIFRoZSBDbGFzc0RlY2xhcmF0aW9uIHRvIHRyYXZlcnNlLlxuICogQHJldHVybnMgVGhlIFByb3RvdHlwZUNoYWluIGNvbnRhaW5pbmcgYWxsIGJhc2UgY2xhc3NlcyBhbmQgaW50ZXJmYWNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYXZlcnNlUHJvdG90eXBlQ2hhaW4oY2xhc3NEZWNsYXJhdGlvbjogQ2xhc3NEZWNsYXJhdGlvbik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZXN1bHRTZXQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpOyAvLyBUbyBzdG9yZSB1bmlxdWUgdHlwZSBuYW1lc1xuXG4gICAgbGV0IGN1cnJlbnRDbGFzczogQ2xhc3NEZWNsYXJhdGlvbiB8IHVuZGVmaW5lZCA9IGNsYXNzRGVjbGFyYXRpb247XG5cbiAgICB3aGlsZSAoY3VycmVudENsYXNzKSB7XG4gICAgICAgIC8vIEFkZCB0aGUgY3VycmVudCBjbGFzcydzIGZ1bGwgdHlwZSBuYW1lXG4gICAgICAgIGNvbnN0IGNsYXNzVHlwZU5hbWUgPSBnZXRGdWxsVHlwZU5hbWUoY3VycmVudENsYXNzLmdldFR5cGUoKSk7XG4gICAgICAgIGlmIChjbGFzc1R5cGVOYW1lKSB7XG4gICAgICAgICAgICByZXN1bHRTZXQuYWRkKGNsYXNzVHlwZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyBhbGwgaW1wbGVtZW50ZWQgaW50ZXJmYWNlc1xuICAgICAgICBjb25zdCBpbXBsZW1lbnRlZEludGVyZmFjZXMgPSBjdXJyZW50Q2xhc3MuZ2V0SW1wbGVtZW50cygpO1xuXG4gICAgICAgIGltcGxlbWVudGVkSW50ZXJmYWNlcy5mb3JFYWNoKGltcGxlbWVudENsYXVzZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZmFjZVR5cGUgPSBpbXBsZW1lbnRDbGF1c2UuZ2V0VHlwZSgpO1xuXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHF1ZXVlIHdpdGggdGhlIGN1cnJlbnQgaW50ZXJmYWNlIHR5cGVcbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlOiBUeXBlW10gPSBbaWZhY2VUeXBlXTtcblxuICAgICAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SWZhY2VUeXBlID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJZmFjZVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaWZhY2VOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKGN1cnJlbnRJZmFjZVR5cGUpO1xuICAgICAgICAgICAgICAgIGlmICghaWZhY2VOYW1lIHx8IHJlc3VsdFNldC5oYXMoaWZhY2VOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcCBpZiBhbHJlYWR5IHByb2Nlc3NlZCBvciBuYW1lIGlzIGludmFsaWRcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHRTZXQuYWRkKGlmYWNlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBFbnF1ZXVlIGV4dGVuZGVkIGludGVyZmFjZXNcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlVHlwZXMgPSBjdXJyZW50SWZhY2VUeXBlLmdldEJhc2VUeXBlcygpO1xuICAgICAgICAgICAgICAgIGJhc2VUeXBlcy5mb3JFYWNoKGJhc2VUeXBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChiYXNlVHlwZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1vdmUgdG8gdGhlIGJhc2UgY2xhc3MsIGlmIGFueVxuICAgICAgICBjdXJyZW50Q2xhc3MgPSBjdXJyZW50Q2xhc3MuZ2V0QmFzZUNsYXNzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20ocmVzdWx0U2V0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZXJhdG9yTWV0aG9kTmFtZShvcGVyYXRvcktpbmQ6IFN5bnRheEtpbmQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIHN3aXRjaCAob3BlcmF0b3JLaW5kKSB7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5FcXVhbHNFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX0VxdWFsaXR5XCI7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5FeGNsYW1hdGlvbkVxdWFsc1Rva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFwib3BfSW5lcXVhbGl0eVwiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuR3JlYXRlclRoYW5Ub2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX0dyZWF0ZXJUaGFuXCI7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5MZXNzVGhhblRva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFwib3BfTGVzc1RoYW5cIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkdyZWF0ZXJUaGFuRXF1YWxzVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9HcmVhdGVyVGhhbk9yRXF1YWxcIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkxlc3NUaGFuRXF1YWxzVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9MZXNzVGhhbk9yRXF1YWxcIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFtcGVyc2FuZFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFwib3BfQml0d2lzZUFuZFwiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuQmFyVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9CaXR3aXNlT3JcIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLlBsdXNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX0FkZGl0aW9uXCI7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5NaW51c1Rva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFwib3BfU3VidHJhY3Rpb25cIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLlNsYXNoVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9EaXZpc2lvblwiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuUGVyY2VudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFwib3BfTW9kdWx1c1wiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuQXN0ZXJpc2tUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX011bHRpcGx5XCI7XG4gICAgICAgIGNhc2UgU3ludGF4S2luZC5MZXNzVGhhbkxlc3NUaGFuVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9MZWZ0U2hpZnRcIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5Ub2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX1JpZ2h0U2hpZnRcIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLkNhcmV0VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9FeGNsdXNpdmVPclwiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuRXhjbGFtYXRpb25Ub2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX0xvZ2ljYWxOb3RcIjtcbiAgICAgICAgY2FzZSBTeW50YXhLaW5kLlRpbGRlVG9rZW46XG4gICAgICAgICAgICByZXR1cm4gXCJvcF9PbmVzQ29tcGxlbWVudFwiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuUGx1c1BsdXNUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiBcIm9wX0luY3JlbWVudFwiO1xuICAgICAgICBjYXNlIFN5bnRheEtpbmQuTWludXNNaW51c1Rva2VuOlxuICAgICAgICAgICAgcmV0dXJuIFwib3BfRGVjcmVtZW50XCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gaXNTaWduYWxCdXNUeXBlKHR5cGU6IFR5cGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBzeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgIGlmICghc3ltYm9sKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgbmFtZSA9IHN5bWJvbC5nZXROYW1lKCk7XG4gICAgcmV0dXJuIG5hbWUgPT09IFwiU2lnbmFsQnVzXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0dlbmllc0V2ZW50VHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICBpZiAoIXN5bWJvbCkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IG5hbWUgPSBzeW1ib2wuZ2V0TmFtZSgpO1xuXG4gICAgcmV0dXJuIG5hbWUgPT09IFwiR2VuaWVzRXZlbnRcIjtcbn1cblxuLy8gTW9kaWZ5IHRvIHJldHVybiB0aGUgdHlwZSBpZiB0aGUgb3BlcmF0b3IgbWV0aG9kIGV4aXN0c1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZXJhdG9yTWV0aG9kUmV0dXJuVHlwZSh0eXBlOiBUeXBlLCBvcGVyYXRvck1ldGhvZE5hbWU6IHN0cmluZywgcGFyYW1ldGVyVHlwZTogVHlwZSk6IFR5cGUgfCBudWxsIHtcbiAgICBjb25zdCB0eXBlU3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICBpZiAoIXR5cGVTeW1ib2wpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGxlZnRUZXh0ID0gdHlwZS5nZXRUZXh0KCk7XG4gICAgbGV0IHJpZ2h0VGV4dCA9IHBhcmFtZXRlclR5cGUuZ2V0VGV4dCgpO1xuXG4gICAgY29uc3QgZGVjbGFyYXRpb25zID0gdHlwZVN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICBmb3IgKGNvbnN0IGRlY2xhcmF0aW9uIG9mIGRlY2xhcmF0aW9ucykge1xuICAgICAgICBpZiAoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBjbGFzc0RlY2xhcmF0aW9uID0gZGVjbGFyYXRpb24gYXMgQ2xhc3NEZWNsYXJhdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZHMgPSBjbGFzc0RlY2xhcmF0aW9uLmdldE1ldGhvZHMoKS5maWx0ZXIobSA9PiBtLmdldE5hbWUoKSA9PT0gb3BlcmF0b3JNZXRob2ROYW1lICYmIG0uZ2V0VHlwZVBhcmFtZXRlcnMoKS5sZW5ndGggPT09IDApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IG1ldGhvZC5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRQYXJhbWV0ZXJUeXBlID0gcGFyYW1ldGVyc1swXS5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0UGFyYW1ldGVyVHlwZSA9IHBhcmFtZXRlcnNbMV0uZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVmdFBhcmFtZXRlclR5cGUuZ2V0VGV4dCgpID09PSBsZWZ0VGV4dCAmJiByaWdodFBhcmFtZXRlclR5cGUuZ2V0VGV4dCgpID09PSByaWdodFRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2QuZ2V0UmV0dXJuVHlwZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT3JJbmhlcml0c0Zyb21HYW1lT2JqZWN0T3JDb21wb25lbnQodHlwZTogVHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBpZiAoIXR5cGUpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCFzeW1ib2wpIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChbJ0dhbWVPYmplY3QnLCAnQ29tcG9uZW50JywgJ01vbm9CZWhhdmlvdXInXS5pbmNsdWRlcyhzeW1ib2wuZ2V0TmFtZSgpKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5oZXJpdHNGcm9tKHR5cGUsIFsnR2FtZU9iamVjdCcsICdDb21wb25lbnQnLCAnTW9ub0JlaGF2aW91ciddLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpO1xufVxuXG5mdW5jdGlvbiBpbmhlcml0c0Zyb20odHlwZTogVHlwZSwgYmFzZU5hbWVzOiBzdHJpbmdbXSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICBjb25zdCBiYXNlVHlwZXMgPSBnZXRCYXNlVHlwZXModHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KTtcbiAgICBmb3IgKGNvbnN0IGJhc2VUeXBlIG9mIGJhc2VUeXBlcykge1xuICAgICAgICBjb25zdCBiYXNlVHlwZU5hbWUgPSBiYXNlVHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpO1xuICAgICAgICBpZiAoYmFzZVR5cGVOYW1lICYmIGJhc2VOYW1lcy5pbmNsdWRlcyhiYXNlVHlwZU5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdHNGcm9tKGJhc2VUeXBlLCBiYXNlTmFtZXMsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0QmFzZVR5cGVzKHR5cGU6IFR5cGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogVHlwZVtdIHtcbiAgICBjb25zdCBiYXNlVHlwZXM6IFR5cGVbXSA9IFtdO1xuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCFzeW1ib2wpIHJldHVybiBiYXNlVHlwZXM7XG5cbiAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgaWYgKCFkZWNsYXJhdGlvbnMpIHJldHVybiBiYXNlVHlwZXM7XG5cbiAgICBmb3IgKGNvbnN0IGRlY2xhcmF0aW9uIG9mIGRlY2xhcmF0aW9ucykge1xuICAgICAgICBpZiAoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24oZGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBoZXJpdGFnZUNsYXVzZXMgPSBkZWNsYXJhdGlvbi5nZXRIZXJpdGFnZUNsYXVzZXMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGVyaXRhZ2VDbGF1c2Ugb2YgaGVyaXRhZ2VDbGF1c2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZXMgPSBoZXJpdGFnZUNsYXVzZS5nZXRUeXBlTm9kZXMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR5cGVOb2RlIG9mIHR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKHR5cGVOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVHlwZXMucHVzaChiYXNlVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJhc2VUeXBlcztcbn1cblxuLy8gTW9kaWZ5IHRvIHJldHVybiB0aGUgdHlwZSBpZiB0aGUgdW5hcnkgb3BlcmF0b3IgbWV0aG9kIGV4aXN0c1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVuYXJ5T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlKHR5cGU6IFR5cGUsIG9wZXJhdG9yTWV0aG9kTmFtZTogc3RyaW5nKTogVHlwZSB8IG51bGwge1xuICAgIGNvbnN0IHR5cGVTeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgIGlmICghdHlwZVN5bWJvbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSB0eXBlU3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgIGZvciAoY29uc3QgZGVjbGFyYXRpb24gb2YgZGVjbGFyYXRpb25zKSB7XG4gICAgICAgIGlmIChOb2RlLmlzQ2xhc3NEZWNsYXJhdGlvbihkZWNsYXJhdGlvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsYXNzRGVjbGFyYXRpb24gPSBkZWNsYXJhdGlvbiBhcyBDbGFzc0RlY2xhcmF0aW9uO1xuICAgICAgICAgICAgY29uc3QgbWV0aG9kcyA9IGNsYXNzRGVjbGFyYXRpb24uZ2V0TWV0aG9kcygpLmZpbHRlcihtID0+IG0uZ2V0TmFtZSgpID09PSBvcGVyYXRvck1ldGhvZE5hbWUgJiYgbS5nZXRUeXBlUGFyYW1ldGVycygpLmxlbmd0aCA9PT0gMCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gbWV0aG9kLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3BlcmFuZFR5cGUgPSBwYXJhbWV0ZXJzWzBdLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhbmRUeXBlLmdldFRleHQoKSA9PT0gdHlwZS5nZXRUZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2QuZ2V0UmV0dXJuVHlwZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbnVtRGV0YWlscyh0eXBlOiBUeXBlKToge1xuICAgIGtleXM6IHN0cmluZ1tdO1xuICAgIHZhbHVlczogKHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZClbXTtcbn0ge1xuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgY29uc3QgZGVjbGFyYXRpb24gPSBzeW1ib2w/LmdldERlY2xhcmF0aW9ucygpLmZpbmQoZGVjID0+IGRlYy5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuRW51bURlY2xhcmF0aW9uKSBhcyBFbnVtRGVjbGFyYXRpb247XG4gICAgaWYgKGRlY2xhcmF0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXlzOiBkZWNsYXJhdGlvbi5nZXRNZW1iZXJzKCkubWFwKG1lbWJlciA9PiBtZW1iZXIuZ2V0TmFtZSgpKSxcbiAgICAgICAgICAgIHZhbHVlczogZGVjbGFyYXRpb24uZ2V0TWVtYmVycygpLm1hcChtZW1iZXIgPT4gbWVtYmVyLmdldFZhbHVlKCkpIC8vIGFzc3VtaW5nIG51bWVyaWMgb3IgY29uc3QgZW51bXNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtrZXlzOiBbXSwgdmFsdWVzOiBbXX07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKHR5cGU6IFR5cGUsIHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpOiBzdHJpbmcge1xuXG4gICAgbGV0IHR5cGVOYW1lID0gdHlwZS5nZXRUZXh0KHVuZGVmaW5lZCwgVHlwZUZvcm1hdEZsYWdzLk5vbmUpO1xuICAgIGxldCB0eXBlTW9kdWxlID0gXCJcIjtcblxuICAgIGlmIChbXCJmbG9hdFwiLCBcImludFwiLCBcImRvdWJsZVwiLCBcImxvbmdcIiwgXCJib29sXCIsIFwic3RyaW5nXCIsIFwibnVtYmVyXCJdLmluY2x1ZGVzKHR5cGVOYW1lKSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGVOYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiaW50XCI6XG4gICAgICAgICAgICAgICAgdHlwZU5hbWUgPSBcIkludDMyXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYm9vbFwiOlxuICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gXCJCb29sZWFuXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZmxvYXRcIjpcbiAgICAgICAgICAgICAgICB0eXBlTmFtZSA9IFwiU2luZ2xlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gXCJJbnQ2NFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImRvdWJsZVwiOlxuICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gXCJEb3VibGVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgICAgICB0eXBlTmFtZSA9IFwiU3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICAgICAgdHlwZU5hbWUgPSBcIkRvdWJsZVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdHlwZU1vZHVsZSA9IFwiU3lzdGVtXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0VHlwZSA9IGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgaWYgKHNjcmlwdFR5cGUgIT09IEdlbmllc1NjcmlwdFR5cGUuTm9uZSkge1xuICAgICAgICAgICAgc3dpdGNoIChzY3JpcHRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBHZW5pZXNTY3JpcHRUeXBlLk1vbm9iZWhhdmlvdXI6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gXCJNb25vQmVoYXZpb3VyXCI7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVNb2R1bGUgPSBcIlVuaXR5RW5naW5lXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgR2VuaWVzU2NyaXB0VHlwZS5TY3JpcHRhYmxlT2JqZWN0OlxuICAgICAgICAgICAgICAgICAgICB0eXBlTmFtZSA9IFwiU2NyaXB0YWJsZU9iamVjdFwiO1xuICAgICAgICAgICAgICAgICAgICB0eXBlTW9kdWxlID0gXCJVbml0eUVuZ2luZVwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghZ2V0SXNVbml0eUFQSVR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHVzZSBub24gQ1NoYXJwIHR5cGVzXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHlwZUZ1bGx5UXVhbGlmaWVkTmFtZSA9IGdldEZ1bGxUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3REb3RJbmRleCA9IHR5cGVGdWxseVF1YWxpZmllZE5hbWUubGFzdEluZGV4T2YoXCIuXCIpO1xuICAgICAgICAgICAgdHlwZU1vZHVsZSA9IHR5cGVGdWxseVF1YWxpZmllZE5hbWUuc3Vic3RyaW5nKDAsIGxhc3REb3RJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgdHlwZSdzIG1vZHVsZSBpcyBhbHJlYWR5IGltcG9ydGVkXG4gICAgY29uc3QgZXhpc3RpbmdJbXBvcnQgPSBzb3VyY2VGaWxlLmdldEltcG9ydERlY2xhcmF0aW9ucygpLmZpbmQoaW1wb3J0RGVjbCA9PiB7XG4gICAgICAgIHJldHVybiBpbXBvcnREZWNsLmdldE1vZHVsZVNwZWNpZmllclZhbHVlKCkgPT09IHR5cGVNb2R1bGU7XG4gICAgfSk7XG5cbiAgICBpZiAoIWV4aXN0aW5nSW1wb3J0KSB7XG4gICAgICAgIC8vIEFkZCB0aGUgaW1wb3J0IGlmIGl0J3Mgbm90IGFscmVhZHkgaW1wb3J0ZWRcbiAgICAgICAgY29uc3QgaW1wb3J0U3RydWN0dXJlOiBJbXBvcnREZWNsYXJhdGlvblN0cnVjdHVyZSA9IHtcbiAgICAgICAgICAgIGtpbmQ6IFN0cnVjdHVyZUtpbmQuSW1wb3J0RGVjbGFyYXRpb24sXG4gICAgICAgICAgICBtb2R1bGVTcGVjaWZpZXI6IHR5cGVNb2R1bGUsXG4gICAgICAgICAgICBuYW1lZEltcG9ydHM6IFt7bmFtZTogdHlwZU5hbWV9XSxcbiAgICAgICAgfTtcbiAgICAgICAgc291cmNlRmlsZS5hZGRJbXBvcnREZWNsYXJhdGlvbihpbXBvcnRTdHJ1Y3R1cmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHRoZSBtb2R1bGUgaXMgaW1wb3J0ZWQgYnV0IHRoZSB0eXBlIGlzIG5vdCBpbmNsdWRlZCwgYWRkIHRoZSBuYW1lZCBpbXBvcnRcbiAgICAgICAgY29uc3QgbmFtZWRJbXBvcnRzID0gZXhpc3RpbmdJbXBvcnQuZ2V0TmFtZWRJbXBvcnRzKCk7XG4gICAgICAgIGlmICghbmFtZWRJbXBvcnRzLnNvbWUobmFtZWRJbXBvcnQgPT4gbmFtZWRJbXBvcnQuZ2V0TmFtZSgpID09PSB0eXBlTmFtZSkpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nSW1wb3J0LmFkZE5hbWVkSW1wb3J0KHR5cGVOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgJHR5cGVvZiBjb252ZXJzaW9uIHN0cmluZ1xuICAgIHJldHVybiB0eXBlTmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bGxUeXBlTmFtZSh0eXBlOiBUeXBlLCBmb3JDc2hhcnA6IGJvb2xlYW4gPSB0cnVlLCBpbmNsdWRlQXJndW1lbnRzOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgbGV0IHRleHQgPSBcIlwiO1xuXG4gICAgY29uc3QgYWxpYXNTeW1ib2wgPSB0eXBlLmdldEFsaWFzU3ltYm9sKCk7XG4gICAgaWYgKGFsaWFzU3ltYm9sKSB7XG4gICAgICAgIHRleHQgPSBhbGlhc1N5bWJvbC5nZXROYW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dCA9IHR5cGUuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGlmIChbXCJmbG9hdFwiLCBcImludFwiLCBcImRvdWJsZVwiLCBcImxvbmdcIiwgXCJib29sXCIsIFwic3RyaW5nXCJdLmluY2x1ZGVzKHRleHQpKSB7XG4gICAgICAgIHN3aXRjaCAodGV4dCkge1xuICAgICAgICAgICAgY2FzZSBcImludFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIlN5c3RlbS5JbnQzMlwiO1xuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIlN5c3RlbS5TdHJpbmdcIjtcbiAgICAgICAgICAgIGNhc2UgXCJib29sXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiU3lzdGVtLkJvb2xlYW5cIjtcbiAgICAgICAgICAgIGNhc2UgXCJmbG9hdFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIlN5c3RlbS5TaW5nbGVcIjtcbiAgICAgICAgICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiU3lzdGVtLkludDY0XCI7XG4gICAgICAgICAgICBjYXNlIFwiZG91YmxlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiU3lzdGVtLkRvdWJsZVwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKCFzeW1ib2wpIHtcbiAgICAgICAgcmV0dXJuIHRleHQ7IC8vIFJldHVybiB0aGUgc2ltcGxlIHR5cGUgdGV4dCBpZiBubyBzeW1ib2wgaXMgYXZhaWxhYmxlXG4gICAgfVxuXG4gICAgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZSh0eXBlKSkge1xuICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgIGxldCBpc0V4cG9ydGVkID0gZmFsc2U7XG5cbiAgICAgICAgZGVjbGFyYXRpb25zLmZvckVhY2goZGVjbCA9PiB7XG4gICAgICAgICAgICBpZiAoTm9kZS5pc0ludGVyZmFjZURlY2xhcmF0aW9uKGRlY2wpIHx8IE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2wpKSB7XG4gICAgICAgICAgICAgICAgaXNFeHBvcnRlZCA9IGRlY2wuaXNFeHBvcnRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWlzRXhwb3J0ZWQgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBkZWNsYXJhdGlvbnNbMF0uZ2V0U291cmNlRmlsZSgpO1xuICAgICAgICAgICAgY29uc3Qgc291cmNlRmlsZVBhdGggPSBzb3VyY2VGaWxlLmdldEZpbGVQYXRoKCk7XG4gICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBjb252ZXJ0VG9Bc3NldHNSZWxhdGl2ZVBhdGgoc291cmNlRmlsZS5nZXREaXJlY3RvcnlQYXRoKCksIHNvdXJjZUZpbGVQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFBhdGggPSBwYXRoLnBhcnNlKHJlbGF0aXZlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aFdpdGhvdXRFeHQgPSBwYXRoLmpvaW4ocGFyc2VkUGF0aC5kaXIsIHBhcnNlZFBhdGgubmFtZSk7XG5cbiAgICAgICAgICAgIHRleHQgPSBgJHtmaWxlUGF0aFdpdGhvdXRFeHR9LiR7c3ltYm9sLmdldEZ1bGx5UXVhbGlmaWVkTmFtZSgpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0ID0gc3ltYm9sLmdldEZ1bGx5UXVhbGlmaWVkTmFtZSgpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHQuaW5kZXhPZihcIkFzc2V0cy9cIikgPj0gMCkge1xuICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UodGV4dC5pbmRleE9mKFwiQXNzZXRzXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0LmluZGV4T2YoXCJQYWNrYWdlQ2FjaGUvXCIpID49IDApIHtcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKHRleHQuaW5kZXhPZihcIlBhY2thZ2VDYWNoZVwiKSkucmVwbGFjZShcIlBhY2thZ2VDYWNoZVwiLCBcIlBhY2thZ2VzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHQuaW5kZXhPZihcIkdlbmllc1NoYXJlZFBhY2thZ2VzL1wiKSA+PSAwKSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSh0ZXh0LmluZGV4T2YoXCJHZW5pZXNTaGFyZWRQYWNrYWdlc1wiKSkucmVwbGFjZShcIkdlbmllc1NoYXJlZFBhY2thZ2VzXCIsIFwiUGFja2FnZXNcIik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gc3ltYm9sLmdldEZ1bGx5UXVhbGlmaWVkTmFtZSgpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZ2V4ID0gL1xcJFxcZCskLztcbiAgICBpZiAoZm9yQ3NoYXJwICYmIHJlZ2V4LnRlc3QodGV4dCkpIHtcblxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTtcblxuICAgICAgICBpZiAoaW5jbHVkZUFyZ3VtZW50cykge1xuICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50cyA9IHR5cGUuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRleHQgKz0gJzwnO1xuICAgICAgICAgICAgICAgIHR5cGVBcmd1bWVudHMuZm9yRWFjaCgoYXJnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXJnVGV4dCA9IGdldEZ1bGxUeXBlTmFtZShhcmcpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGFyZ1RleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IHR5cGVBcmd1bWVudHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAnLCAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGV4dCArPSAnPic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RQcm9wZXJ0aWVzKGNsczogQ2xhc3NEZWNsYXJhdGlvbiwgYmFzZVBhdGg6IHN0cmluZyA9ICcnLCB0eXBlQXJndW1lbnRNYXA6IE1hcDxzdHJpbmcsIFR5cGU+ID0gbmV3IE1hcCgpKTogUHJvcGVydHlJbmZvW10ge1xuICAgIGNvbnN0IHByb3BlcnRpZXM6IFByb3BlcnR5SW5mb1tdID0gW107XG5cbiAgICBjbHMuZ2V0UHJvcGVydGllcygpLmZvckVhY2gocHJvcCA9PiB7XG4gICAgICAgIGNvbnN0IHZpc2liaWxpdHkgPSBwcm9wLmdldFNjb3BlKCk7XG4gICAgICAgIGNvbnN0IGRlY29yYXRvcnMgPSBleHRyYWN0RGVjb3JhdG9ycyhwcm9wKTtcblxuICAgICAgICBpZiAodmlzaWJpbGl0eSA9PT0gJ3ByaXZhdGUnICYmICFkZWNvcmF0b3JzLnNvbWUoZCA9PiBkLlR5cGUgPT09IFNlcmlhbGl6ZUZpZWxkRGVjb3JhdG9yKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZpc2liaWxpdHkgPT09ICdwdWJsaWMnICYmIGRlY29yYXRvcnMuc29tZShkID0+IGQuVHlwZSA9PT0gTm9uU2VyaWFsaXplZERlY29yYXRvcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSByZXNvbHZlR2VuZXJpY1R5cGUocHJvcC5nZXRUeXBlKCksIHR5cGVBcmd1bWVudE1hcCk7XG4gICAgICAgIGNvbnN0IGlzQXJyYXkgPSB0eXBlLmlzQXJyYXkoKTtcblxuICAgICAgICBjb25zdCByZXNvbHZlZFR5cGUgPSByZXNvbHZlQXJyYXlFbGVtZW50VHlwZSh0eXBlLCB0eXBlQXJndW1lbnRNYXApO1xuICAgICAgICBjb25zdCB0eXBlTmFtZSA9IGdldEZ1bGxUeXBlTmFtZShyZXNvbHZlZFR5cGUpO1xuICAgICAgICBjb25zdCBwcm9wTmFtZSA9IHByb3AuZ2V0TmFtZSgpO1xuICAgICAgICBsZXQgZnVsbFBhdGggPSBiYXNlUGF0aCA/IGAke2Jhc2VQYXRofS4ke3Byb3BOYW1lfWAgOiBwcm9wTmFtZTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRJbml0aWFsaXplcihleHByZXNzaW9uOiBFeHByZXNzaW9uKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGlmIChleHByZXNzaW9uLmdldEtpbmQoKSA9PT0gU3ludGF4S2luZC5OZXdFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RXhwcmVzc2lvbiA9IGV4cHJlc3Npb24gYXMgTmV3RXhwcmVzc2lvbjtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gbmV3RXhwcmVzc2lvbi5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZnVsbFR5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKHR5cGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgYXJndW1lbnRzIG9mIHRoZSBuZXcgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBuZXdFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpLm1hcChhcmcgPT4gYXJnLmdldFRleHQoKSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgbmV3ICR7ZnVsbFR5cGVOYW1lfSgke2FyZ3N9KTtgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwcmVzc2lvbi5nZXRUZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbml0aWFsaXplckV4cHJlc3Npb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBpZiAocHJvcC5oYXNJbml0aWFsaXplcigpKSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsaXplciA9IHByb3AuZ2V0SW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgICAgIGlmIChpbml0aWFsaXplcikge1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsaXplci5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuQXJyYXlMaXRlcmFsRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUxpdGVyYWwgPSBpbml0aWFsaXplciBhcyBBcnJheUxpdGVyYWxFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5TGl0ZXJhbC5nZXRFbGVtZW50cygpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gYXJyYXlMaXRlcmFsLmdldEVsZW1lbnRzKClbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplckV4cHJlc3Npb25zLnB1c2goZ2V0SW5pdGlhbGl6ZXIoZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZXJFeHByZXNzaW9ucy5wdXNoKGdldEluaXRpYWxpemVyKGluaXRpYWxpemVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcGVydHlJbmZvOiBQcm9wZXJ0eUluZm8gPSB7XG4gICAgICAgICAgICBQYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgICAgIE5hbWU6IHByb3BOYW1lLFxuICAgICAgICAgICAgVHlwZU5hbWU6IHR5cGVOYW1lLFxuICAgICAgICAgICAgQ2hpbGRQcm9wZXJ0aWVzOiBbXSxcbiAgICAgICAgICAgIElzQXJyYXk6IGlzQXJyYXksXG4gICAgICAgICAgICBJc0VudW06IGZhbHNlLFxuICAgICAgICAgICAgRW51bUtleXM6IFtdLFxuICAgICAgICAgICAgRW51bVZhbHVlczogW10sXG4gICAgICAgICAgICBEZWNvcmF0b3JzOiBleHRyYWN0RGVjb3JhdG9ycyhwcm9wKSxcbiAgICAgICAgICAgIElzR2VuaWVzQmVoYXZpb3VyUmVmOiBmYWxzZSxcbiAgICAgICAgICAgIElzR2VuaWVzU2NyaXB0YWJsZU9iamVjdFJlZjogZmFsc2UsXG4gICAgICAgICAgICBJbml0aWFsaXplcnM6IGluaXRpYWxpemVyRXhwcmVzc2lvbnMsXG4gICAgICAgICAgICBBcnJheUVsZW1lbnRJbml0aWFsaXplcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgQXJyYXlEaW1lbnNpb246IC0xLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICBsZXQgZGltZW5zaW9uID0gMTtcbiAgICAgICAgICAgIHByb3BlcnR5SW5mby5BcnJheUVsZW1lbnRJbml0aWFsaXplciA9IGdldEFycmF5RWxlbWVudEluaXRpYWxpemVyKHR5cGUsIHR5cGVOYW1lLCBwcm9wTmFtZSwgZnVsbFBhdGgsIGRpbWVuc2lvbiwgdHlwZUFyZ3VtZW50TWFwKTtcbiAgICAgICAgICAgIHByb3BlcnR5SW5mby5BcnJheURpbWVuc2lvbiA9IGRpbWVuc2lvbjtcbiAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaChwcm9wZXJ0eUluZm8pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZmlsbEV4dHJhUHJvcGVydHlJbmZvKHJlc29sdmVkVHlwZSwgcHJvcGVydHlJbmZvLCB0eXBlQXJndW1lbnRNYXApO1xuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHlJbmZvKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuXG5mdW5jdGlvbiBmaWxsRXh0cmFQcm9wZXJ0eUluZm8ocmVzb2x2ZWRUeXBlOiBUeXBlLCBwcm9wZXJ0eUluZm86IFByb3BlcnR5SW5mbywgdHlwZUFyZ3VtZW50TWFwOiBNYXA8c3RyaW5nLCBUeXBlPikge1xuICAgIGNvbnN0IGlzRW51bSA9IHJlc29sdmVkVHlwZS5pc0VudW0oKTtcbiAgICBjb25zdCBzeW1ib2wgPSByZXNvbHZlZFR5cGUuZ2V0U3ltYm9sKCkgfHwgcmVzb2x2ZWRUeXBlLmdldEFsaWFzU3ltYm9sKCk7XG5cbiAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGVjbGFyYXRpb25zID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgIGNvbnN0IGRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb25zWzBdO1xuICAgIGNvbnN0IGlzVW5pdHlUeXBlID0gZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKTtcbiAgICBjb25zdCBnZW5pZXNTY3JpcHRUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21Ob2RlKGRlY2xhcmF0aW9uLCBpc1VuaXR5VHlwZSk7XG5cbiAgICBwcm9wZXJ0eUluZm8uSXNHZW5pZXNCZWhhdmlvdXJSZWYgPSBnZW5pZXNTY3JpcHRUeXBlID09IEdlbmllc1NjcmlwdFR5cGUuTW9ub2JlaGF2aW91cjtcbiAgICBwcm9wZXJ0eUluZm8uSXNHZW5pZXNTY3JpcHRhYmxlT2JqZWN0UmVmID0gZ2VuaWVzU2NyaXB0VHlwZSA9PSBHZW5pZXNTY3JpcHRUeXBlLlNjcmlwdGFibGVPYmplY3Q7XG5cbiAgICBpZiAoaXNVbml0eVR5cGUgfHwgZ2VuaWVzU2NyaXB0VHlwZSAhPT0gR2VuaWVzU2NyaXB0VHlwZS5Ob25lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNFbnVtKSB7XG4gICAgICAgIGZpbGxFbnVtSW5mbyhwcm9wZXJ0eUluZm8sIHJlc29sdmVkVHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKS5zb21lKGRlY2xhcmF0aW9uID0+IE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKSkpIHtcbiAgICAgICAgY29uc3QgY2xhc3NEZWNsID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpLmZpbmQoTm9kZS5pc0NsYXNzRGVjbGFyYXRpb24pIGFzIENsYXNzRGVjbGFyYXRpb247XG4gICAgICAgIGNvbnN0IHR5cGVQYXJhbXMgPSBjbGFzc0RlY2wuZ2V0VHlwZVBhcmFtZXRlcnMoKTtcbiAgICAgICAgY29uc3QgdHlwZUFyZ3MgPSByZXNvbHZlZFR5cGUuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICBjb25zdCBuZXdUeXBlQXJndW1lbnRNYXAgPSBuZXcgTWFwKHR5cGVBcmd1bWVudE1hcCk7XG5cbiAgICAgICAgdHlwZVBhcmFtcy5mb3JFYWNoKChwYXJhbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtTmFtZSA9IHBhcmFtLmdldE5hbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVBhcmFtTmFtZSA9IGAke3BhcmFtTmFtZX1fJHtjbGFzc0RlY2wuZ2V0TmFtZSgpfWA7IC8vIEVuc3VyZSB1bmlxdWVuZXNzIGJ5IGFwcGVuZGluZyB0aGUgY2xhc3MgbmFtZVxuICAgICAgICAgICAgbmV3VHlwZUFyZ3VtZW50TWFwLnNldCh1bmlxdWVQYXJhbU5hbWUsIHR5cGVBcmdzW2luZGV4XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vQ29sbGVjdCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IGNoaWxkUHJvcGVydGllczogUHJvcGVydHlJbmZvW10gPSBbXTtcbiAgICAgICAgbGV0IGJhc2VDbGFzcyA9IGNsYXNzRGVjbDtcbiAgICAgICAgd2hpbGUgKGJhc2VDbGFzcykge1xuICAgICAgICAgICAgY29uc3QgYmFzZUNsYXNzTmFtZSA9IGJhc2VDbGFzcy5nZXROYW1lKCk7XG5cbiAgICAgICAgICAgIGNoaWxkUHJvcGVydGllcy51bnNoaWZ0KC4uLmV4dHJhY3RQcm9wZXJ0aWVzKGJhc2VDbGFzcywgcHJvcGVydHlJbmZvLlBhdGgsIG5ld1R5cGVBcmd1bWVudE1hcCkpO1xuXG4gICAgICAgICAgICBsZXQgbmV3QmFzZSA9IGJhc2VDbGFzcy5nZXRCYXNlQ2xhc3MoKTtcbiAgICAgICAgICAgIGlmIChuZXdCYXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBiYXNlQ2xhc3MgPSBuZXdCYXNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BlcnR5SW5mby5DaGlsZFByb3BlcnRpZXMgPSBjaGlsZFByb3BlcnRpZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmaWxsRW51bUluZm8ocHJvcGVydHlJbmZvOiBQcm9wZXJ0eUluZm8sIHJlc29sdmVkVHlwZTogVHlwZSkge1xuICAgIGNvbnN0IHtrZXlzLCB2YWx1ZXN9ID0gZXh0cmFjdEVudW1EZXRhaWxzKHJlc29sdmVkVHlwZSk7XG4gICAgcHJvcGVydHlJbmZvLkVudW1LZXlzID0ga2V5cztcbiAgICBwcm9wZXJ0eUluZm8uRW51bVZhbHVlcyA9IHZhbHVlcy5tYXAodmFsdWUgPT4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWx1ZS50b1N0cmluZygpKTtcbiAgICBwcm9wZXJ0eUluZm8uSXNFbnVtID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0QXJyYXlFbGVtZW50SW5pdGlhbGl6ZXIodHlwZTogVHlwZSwgdW5kZXJseWluZ1R5cGVOYW1lOiBzdHJpbmcsIHByb3BOYW1lOiBzdHJpbmcsIHByb3BQYXRoOiBzdHJpbmcsIGRpbWVuc2lvbjogbnVtYmVyLCB0eXBlQXJndW1lbnRNYXA6IE1hcDxzdHJpbmcsIFR5cGU+KTogUHJvcGVydHlJbmZvIHtcbiAgICBsZXQgcmVzb2x2ZWRUeXBlID0gdHlwZS5pc0FycmF5KCkgPyB0eXBlLmdldEFycmF5RWxlbWVudFR5cGUoKSEgOiB0eXBlO1xuXG4gICAgLy8gRW5zdXJlIHByb3BlciByZXNvbHV0aW9uIG9mIGdlbmVyaWMgdHlwZSBhcmd1bWVudHMgYW5kIGFycmF5IGVsZW1lbnRzXG4gICAgaWYgKCFyZXNvbHZlZFR5cGUuaXNBcnJheSgpKSB7XG4gICAgICAgIHJlc29sdmVkVHlwZSA9IHJlc29sdmVBcnJheUVsZW1lbnRUeXBlKHJlc29sdmVkVHlwZSwgdHlwZUFyZ3VtZW50TWFwKTtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudERpbWVuc2lvbiA9IGRpbWVuc2lvbjtcblxuICAgIGNvbnN0IHByb3BlcnR5SW5mbzogUHJvcGVydHlJbmZvID0ge1xuICAgICAgICBQYXRoOiBwcm9wUGF0aCArIFwiX0RcIiArIGRpbWVuc2lvbixcbiAgICAgICAgTmFtZTogcHJvcE5hbWUsXG4gICAgICAgIFR5cGVOYW1lOiB1bmRlcmx5aW5nVHlwZU5hbWUsXG4gICAgICAgIEFycmF5RGltZW5zaW9uOiBkaW1lbnNpb24sXG4gICAgICAgIENoaWxkUHJvcGVydGllczogW10sXG4gICAgICAgIElzQXJyYXk6IHJlc29sdmVkVHlwZS5pc0FycmF5KCksXG4gICAgICAgIElzRW51bTogcmVzb2x2ZWRUeXBlLmlzRW51bSgpLFxuICAgICAgICBFbnVtS2V5czogW10sXG4gICAgICAgIEVudW1WYWx1ZXM6IFtdLFxuICAgICAgICBEZWNvcmF0b3JzOiBbXSxcbiAgICAgICAgSXNHZW5pZXNCZWhhdmlvdXJSZWY6IGZhbHNlLFxuICAgICAgICBJc0dlbmllc1NjcmlwdGFibGVPYmplY3RSZWY6IGZhbHNlLFxuICAgICAgICBJbml0aWFsaXplcnM6IFtdLFxuICAgICAgICBBcnJheUVsZW1lbnRJbml0aWFsaXplcjogdW5kZWZpbmVkXG4gICAgfTtcblxuICAgIGlmICghcmVzb2x2ZWRUeXBlLmlzQXJyYXkoKSkge1xuICAgICAgICBmaWxsRXh0cmFQcm9wZXJ0eUluZm8ocmVzb2x2ZWRUeXBlLCBwcm9wZXJ0eUluZm8sIHR5cGVBcmd1bWVudE1hcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLkFycmF5RWxlbWVudEluaXRpYWxpemVyID0gZ2V0QXJyYXlFbGVtZW50SW5pdGlhbGl6ZXIocmVzb2x2ZWRUeXBlLCB1bmRlcmx5aW5nVHlwZU5hbWUsIHByb3BOYW1lLCBwcm9wUGF0aCwgKytjdXJyZW50RGltZW5zaW9uLCB0eXBlQXJndW1lbnRNYXApO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9wZXJ0eUluZm87XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVHZW5lcmljVHlwZSh0eXBlOiBUeXBlLCB0eXBlQXJndW1lbnRNYXA6IE1hcDxzdHJpbmcsIFR5cGU+KTogVHlwZSB7XG4gICAgbGV0IHJlc29sdmVkVHlwZSA9IHR5cGU7XG5cbiAgICBpZiAocmVzb2x2ZWRUeXBlLmlzVHlwZVBhcmFtZXRlcigpKSB7XG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gcmVzb2x2ZWRUeXBlLmdldFN5bWJvbCgpPy5nZXROYW1lKCk7XG4gICAgICAgIGNvbnN0IHBhcmVudERlY2wgPSByZXNvbHZlZFR5cGUuZ2V0U3ltYm9sKCk/LmdldERlY2xhcmF0aW9ucygpWzBdLmdldFBhcmVudCgpO1xuICAgICAgICBjb25zdCBkZWNsYXJpbmdDbGFzc05hbWUgPSBwYXJlbnREZWNsICYmIE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKHBhcmVudERlY2wpID8gcGFyZW50RGVjbC5nZXROYW1lKCkgOiAnJztcbiAgICAgICAgY29uc3QgdW5pcXVlVHlwZU5hbWUgPSBgJHt0eXBlTmFtZX1fJHtkZWNsYXJpbmdDbGFzc05hbWV9YDsgLy8gRW5zdXJlIHVuaXF1ZW5lc3MgYnkgYXBwZW5kaW5nIHRoZSBjbGFzcyBuYW1lXG4gICAgICAgIGlmICh1bmlxdWVUeXBlTmFtZSAmJiB0eXBlQXJndW1lbnRNYXAuaGFzKHVuaXF1ZVR5cGVOYW1lKSkge1xuICAgICAgICAgICAgcmVzb2x2ZWRUeXBlID0gdHlwZUFyZ3VtZW50TWFwLmdldCh1bmlxdWVUeXBlTmFtZSkhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc29sdmVkVHlwZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUFycmF5RWxlbWVudFR5cGUodHlwZTogVHlwZSwgdHlwZUFyZ3VtZW50TWFwOiBNYXA8c3RyaW5nLCBUeXBlPik6IFR5cGUge1xuICAgIGxldCByZXNvbHZlZFR5cGUgPSB0eXBlO1xuXG4gICAgd2hpbGUgKHJlc29sdmVkVHlwZT8uaXNBcnJheSgpKSB7XG4gICAgICAgIHJlc29sdmVkVHlwZSA9IHJlc29sdmVkVHlwZS5nZXRBcnJheUVsZW1lbnRUeXBlKCkhO1xuICAgIH1cblxuICAgIHJlc29sdmVkVHlwZSA9IHJlc29sdmVHZW5lcmljVHlwZShyZXNvbHZlZFR5cGUsIHR5cGVBcmd1bWVudE1hcCk7XG5cbiAgICByZXR1cm4gcmVzb2x2ZWRUeXBlO1xufVxuXG5mdW5jdGlvbiBnZXRJc1VuaXR5QVBJU291cmNlRmlsZShzb3VyY2VGaWxlOiBTb3VyY2VGaWxlKSB7XG4gICAgY29uc3QgZmlyc3ROb2RlID0gc291cmNlRmlsZS5nZXRGaXJzdENoaWxkKCk7XG5cbiAgICBpZiAoIWZpcnN0Tm9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIG5vZGVzIGZvdW5kIGluIHRoZSBmaWxlLlwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGxlYWRpbmdDb21tZW50cyA9IGZpcnN0Tm9kZS5nZXRMZWFkaW5nQ29tbWVudFJhbmdlcygpO1xuICAgIHJldHVybiBsZWFkaW5nQ29tbWVudHMubGVuZ3RoID4gMCAmJiBsZWFkaW5nQ29tbWVudHNbMF0uZ2V0VGV4dCgpID09PSBHZW5pZXNEZWNsYXJhdGlvbkZpbGVBbm5vdGF0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXNWYWxpZFVuaXR5R2VuZXJpY1R5cGVBcmcoYXJnVHlwZSA6IFR5cGUpXG57XG4gICAgbGV0IHRleHQgPSBcIlwiO1xuXG4gICAgY29uc3QgYWxpYXNTeW1ib2wgPSBhcmdUeXBlLmdldEFsaWFzU3ltYm9sKCk7XG4gICAgaWYgKGFsaWFzU3ltYm9sKSB7XG4gICAgICAgIHRleHQgPSBhbGlhc1N5bWJvbC5nZXROYW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dCA9IGFyZ1R5cGUuZ2V0VGV4dCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoW1wiZmxvYXRcIiwgXCJpbnRcIiwgXCJkb3VibGVcIiwgXCJsb25nXCIsIFwiYm9vbFwiLCBcInN0cmluZ1wiLCBcIm51bWJlclwiXS5pbmNsdWRlcyh0ZXh0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2NyaXB0VHlwZSA9IGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZShhcmdUeXBlKTtcbiAgICBpZiAoc2NyaXB0VHlwZSAhPT0gR2VuaWVzU2NyaXB0VHlwZS5Ob25lKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ2V0SXNVbml0eUFQSVR5cGUoYXJnVHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJc1VuaXR5QVBJVHlwZSh0eXBlOiBUeXBlKSB7XG4gICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcblxuICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzb3VyY2VGaWxlID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpWzBdLmdldFNvdXJjZUZpbGUoKTtcblxuICAgIHJldHVybiBnZXRJc1VuaXR5QVBJU291cmNlRmlsZShzb3VyY2VGaWxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldElzVW5pdHlBUElEZWNsYXJhdGlvbihkZWNsYXJhdGlvbjogTm9kZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBkZWNsYXJhdGlvbi5nZXRTb3VyY2VGaWxlKCk7XG4gICAgcmV0dXJuIGdldElzVW5pdHlBUElTb3VyY2VGaWxlKHNvdXJjZUZpbGUpO1xufVxuXG5mdW5jdGlvbiBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbU5vZGUoZGVjbGFyYXRpb246IE5vZGUsIGlzVW5pdHlUeXBlOiBib29sZWFuKTogR2VuaWVzU2NyaXB0VHlwZSB7XG4gICAgaWYgKGRlY2xhcmF0aW9uLmdldEtpbmQoKSAhPT0gU3ludGF4S2luZC5DbGFzc0RlY2xhcmF0aW9uIHx8IGlzVW5pdHlUeXBlKSB7XG4gICAgICAgIHJldHVybiBHZW5pZXNTY3JpcHRUeXBlLk5vbmU7XG4gICAgfVxuXG4gICAgY29uc3QgY2xzID0gZGVjbGFyYXRpb24gYXMgQ2xhc3NEZWNsYXJhdGlvbjtcbiAgICBjb25zdCBpc01vbm9iZWhhdmlvdXIgPSBleHRlbmRzTW9ub0JlaGF2aW91cihjbHMpO1xuICAgIGNvbnN0IGlzU2NyaXB0YWJsZU9iamVjdCA9IGV4dGVuZHNTY3JpcHRhYmxlT2JqZWN0KGNscyk7XG5cbiAgICBpZiAoaXNNb25vYmVoYXZpb3VyKSB7XG4gICAgICAgIHJldHVybiBHZW5pZXNTY3JpcHRUeXBlLk1vbm9iZWhhdmlvdXI7XG4gICAgfVxuXG4gICAgaWYgKGlzU2NyaXB0YWJsZU9iamVjdCkge1xuICAgICAgICByZXR1cm4gR2VuaWVzU2NyaXB0VHlwZS5TY3JpcHRhYmxlT2JqZWN0O1xuICAgIH1cblxuICAgIHJldHVybiBHZW5pZXNTY3JpcHRUeXBlLk5vbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUodHlwZTogVHlwZSk6IEdlbmllc1NjcmlwdFR5cGUge1xuICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG5cbiAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICByZXR1cm4gR2VuaWVzU2NyaXB0VHlwZS5Ob25lO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICBpZiAoZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gR2VuaWVzU2NyaXB0VHlwZS5Ob25lO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb25zWzBdO1xuICAgIGNvbnN0IGlzVW5pdHlUeXBlID0gZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uKGRlY2xhcmF0aW9uKVxuICAgIHJldHVybiBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbU5vZGUoZGVjbGFyYXRpb24sIGlzVW5pdHlUeXBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzR2VuaWVzU2NyaXB0VHlwZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgbGV0IGdUeXBlID0gZ2V0R2VuaWVzU2NyaXB0VHlwZUZyb21UeXBlKHR5cGUpO1xuICAgIHJldHVybiBnVHlwZSA9PT0gR2VuaWVzU2NyaXB0VHlwZS5Nb25vYmVoYXZpb3VyIHx8IGdUeXBlID09PSBHZW5pZXNTY3JpcHRUeXBlLlNjcmlwdGFibGVPYmplY3Q7XG59XG5cbi8qXG4qIFRoaXMgZW5zdXJlcyB0aGF0IHNwZWNpZmllcnMgbWF0Y2ggdGhlIGtleXMvcGF0aHMgb2YgdGhlIGZpbGVzIGluIFVuaXR5LlxuKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVJbXBvcnRzVG9SZWxhdGl2ZVBhdGhzKHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpIHtcbiAgICBjb25zdCBkaXJlY3RvcnlQYXRoID0gc291cmNlRmlsZS5nZXREaXJlY3RvcnlQYXRoKCk7XG5cbiAgICAvLyBFbnN1cmUgdGhlIHBhdGggaXMgYWx3YXlzIHJlc29sdmVkIHRvIGJlIHRoZSBBc3NldHMvIG5hbWVcbiAgICBzb3VyY2VGaWxlLmdldEltcG9ydERlY2xhcmF0aW9ucygpLmZvckVhY2goaW1wb3J0RGVjbGFyYXRpb24gPT4ge1xuICAgICAgICBjb25zdCBtb2R1bGVTcGVjaWZpZXIgPSBpbXBvcnREZWNsYXJhdGlvbi5nZXRNb2R1bGVTcGVjaWZpZXJWYWx1ZSgpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBpbXBvcnQgcGF0aCBpcyByZWxhdGl2ZVxuICAgICAgICBpZiAobW9kdWxlU3BlY2lmaWVyLnN0YXJ0c1dpdGgoJy4vJykgfHwgbW9kdWxlU3BlY2lmaWVyLnN0YXJ0c1dpdGgoJy4uLycpKSB7XG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSByZWxhdGl2ZSBwYXRoIHRvIGFuIEFzc2V0cy1yZWxhdGl2ZSBwYXRoXG4gICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBjb252ZXJ0VG9Bc3NldHNSZWxhdGl2ZVBhdGgoZGlyZWN0b3J5UGF0aCwgbW9kdWxlU3BlY2lmaWVyKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBtb2R1bGUgc3BlY2lmaWVyXG4gICAgICAgICAgICBpbXBvcnREZWNsYXJhdGlvbi5zZXRNb2R1bGVTcGVjaWZpZXIocmVsYXRpdmVQYXRoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFRvQXNzZXRzUmVsYXRpdmVQYXRoKGJhc2VQYXRoOiBzdHJpbmcsIHJlbGF0aXZlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBhYnNvbHV0ZVBhdGggPSBwYXRoLnJlc29sdmUoYmFzZVBhdGgsIHJlbGF0aXZlUGF0aCk7XG4gICAgY29uc3QgYXNzZXRzUGF0aCA9IHBhdGgucmVzb2x2ZSgnQXNzZXRzJyk7XG5cbiAgICAvLyBHZXQgdGhlIHBhdGggcmVsYXRpdmUgdG8gdGhlIEFzc2V0cyBkaXJlY3RvcnlcbiAgICBsZXQgcmVsYXRpdmVUb0Fzc2V0cyA9IHBhdGgucmVsYXRpdmUoYXNzZXRzUGF0aCwgYWJzb2x1dGVQYXRoKTtcblxuICAgIC8vIFByZXBlbmQgJ0Fzc2V0cy8nIHRvIGVuc3VyZSB0aGUgcGF0aCBzdGFydHMgd2l0aCAnQXNzZXRzJ1xuICAgIGlmICghcmVsYXRpdmVUb0Fzc2V0cy5zdGFydHNXaXRoKCdBc3NldHMnICsgcGF0aC5zZXApKSB7XG4gICAgICAgIHJlbGF0aXZlVG9Bc3NldHMgPSBwYXRoLmpvaW4oJ0Fzc2V0cycsIHJlbGF0aXZlVG9Bc3NldHMpO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aCB0byB1c2UgZm9yd2FyZCBzbGFzaGVzXG4gICAgcmV0dXJuIG5vcm1hbGl6ZVBhdGgocmVsYXRpdmVUb0Fzc2V0cyk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGgocDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcC5zcGxpdChwYXRoLnNlcCkuam9pbignLycpO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0RGVjb3JhdG9ycyhwcm9wOiBQcm9wZXJ0eURlY2xhcmF0aW9uKTogUHJvcGVydHlEZWNvcmF0b3JJbmZvW10ge1xuICAgIHJldHVybiBwcm9wLmdldERlY29yYXRvcnMoKS5tYXAoZCA9PiB7XG4gICAgICAgIGNvbnN0IGRlY29yYXRvckluZm86IFByb3BlcnR5RGVjb3JhdG9ySW5mbyA9IHtcbiAgICAgICAgICAgIFR5cGU6IGQuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgQXJnczogZC5nZXRBcmd1bWVudHMoKS5tYXAoYSA9PiBhLmdldFRleHQoKSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRlY29yYXRvckluZm87XG4gICAgfSk7XG59XG4iLCJpbXBvcnQge1xuICAgIFNvdXJjZUZpbGUsXG4gICAgTm9kZSxcbiAgICBTeW50YXhLaW5kLFxuICAgIENhbGxFeHByZXNzaW9uLFxuICAgIE1ldGhvZERlY2xhcmF0aW9uLFxuICAgIFR5cGUsXG4gICAgQ2xhc3NEZWNsYXJhdGlvbixcbiAgICBOZXdFeHByZXNzaW9uLFxuICAgIFR5cGVSZWZlcmVuY2VOb2RlLFxuICAgIElkZW50aWZpZXIsXG4gICAgUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uLFxuICAgIEVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uLFxuICAgIEludGVyZmFjZURlY2xhcmF0aW9uLCBNZXRob2RTaWduYXR1cmUsIFR5cGVDaGVja2VyXG59IGZyb20gXCJ0cy1tb3JwaFwiO1xuaW1wb3J0IHRzIGZyb20gXCJ0eXBlc2NyaXB0L2xpYi90c3NlcnZlcmxpYnJhcnlcIjtcbmltcG9ydCB7XG4gICAgZ2V0SXNVbml0eUFQSVR5cGUsXG4gICAgZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uLFxuICAgIGdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSxcbiAgICBHZW5pZXNTY3JpcHRUeXBlLCBnZXRGdWxsVHlwZU5hbWUsIEFsbG93ZWRVaUludGVyZmFjZXMsIGdldElzVmFsaWRVbml0eUdlbmVyaWNUeXBlQXJnLCBHRVRfSVRFTV9OQU1FLCBTRVRfSVRFTV9OQU1FXG59IGZyb20gXCIuL0NvbXBpbGVyVXRpbHNcIjtcblxuY29uc3QgQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMgPSB7XG4gICAgSU5WQUxJRF9JTkhFUklUQU5DRTogMTAwMDEsXG4gICAgRk9SQklEREVOX0lOVEVSRkFDRTogMTAwMDIsXG4gICAgR0VORVJJQ19NRVRIT0RfTUlTU0lOR19UWVBFX0FSR1VNRU5UUzogMTAwMDMsXG4gICAgR0VORVJJQ19NRVRIT0RfSU5WQUxJRF9UWVBFX0FSR1VNRU5UUzogMTAwMDQsXG4gICAgR0VORVJJQ19DTEFTU19NSVNTSU5HX1RZUEVfQVJHVU1FTlRTOiAxMDAwNSxcbiAgICBHRU5FUklDX0NMQVNTX0lOVkFMSURfVFlQRV9BUkdVTUVOVFM6IDEwMDA2LFxuICAgIElOVkFMSURfR0VUX0lURU1fQVJHVU1FTlRTOiAxMDAwNyxcbn07XG5cbmNvbnN0IEFMTE9XRURfSU5IRVJJVEFOQ0VfVFlQRVMgPSBuZXcgU2V0KFsnTW9ub0JlaGF2aW91cicsICdTY3JpcHRhYmxlT2JqZWN0J10pO1xuXG5jb25zdCBDT01QT05FTlRfTUVUSE9EUyA9IG5ldyBTZXQoW1xuICAgICdHZXRDb21wb25lbnQnLFxuICAgICdUcnlHZXRDb21wb25lbnQnLFxuICAgICdHZXRDb21wb25lbnRJbkNoaWxkcmVuJyxcbiAgICAnR2V0Q29tcG9uZW50c0luQ2hpbGRyZW4nLFxuICAgICdHZXRDb21wb25lbnRJblBhcmVudCcsXG4gICAgJ0dldENvbXBvbmVudHNJblBhcmVudCcsXG4gICAgJ0dldENvbXBvbmVudHMnLFxuICAgICdBZGRDb21wb25lbnQnLFxuXSk7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdlbmllc1NlbWFudGljRGlhZ25vc3RpY3MoZmlsZTogU291cmNlRmlsZSwgdHlwZUNoZWNrZXI6IFR5cGVDaGVja2VyKTogdHMuRGlhZ25vc3RpY1tdIHtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGRpYWdub3N0aWNzOiB0cy5EaWFnbm9zdGljW10gPSBbXTtcblxuICAgIHByb2Nlc3NDbGFzc0RpYWdub3N0aWNzKGZpbGUsIGRpYWdub3N0aWNzKTtcbiAgICBwcm9jZXNzQ2FsbEV4cHJlc3Npb25EaWFnbm9zdGljcyhmaWxlLCBkaWFnbm9zdGljcyk7XG4gICAgcHJvY2Vzc1R5cGVVc2FnZURpYWdub3N0aWNzKGZpbGUsIGRpYWdub3N0aWNzKTtcbiAgICBcbiAgICAvL1RPRE8gaW1wcm92ZSBkaWFnbm9zdGljcyBmb3IgYnJhY2tldCBhY2Nlc3NcbiAgICAvL3Byb2Nlc3NCcmFja2V0QWNjZXNzRGlhZ25vc3RpY3MoZmlsZSwgdHlwZUNoZWNrZXIsIGRpYWdub3N0aWNzKTtcblxuICAgIHJldHVybiBkaWFnbm9zdGljcztcbn1cblxuLy9UT0RPIGltcHJvdmUgZGlhZ25vc3RpY3MgZm9yIGJyYWNrZXQgYWNjZXNzXG4vLyBmdW5jdGlvbiBwcm9jZXNzQnJhY2tldEFjY2Vzc0RpYWdub3N0aWNzKGZpbGU6IFNvdXJjZUZpbGUsIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlciwgZGlhZ25vc3RpY3M6IHRzLkRpYWdub3N0aWNbXSkge1xuLy9cbi8vICAgICBsZXQgZXhwcmVzc2lvbnMgPSBmaWxlLmdldERlc2NlbmRhbnRzT2ZLaW5kKFN5bnRheEtpbmQuRWxlbWVudEFjY2Vzc0V4cHJlc3Npb24pO1xuLy9cbi8vICAgICBpZiAoZXhwcmVzc2lvbnMubGVuZ3RoID09PSAwKSB7XG4vLyAgICAgICAgIHJldHVybjtcbi8vICAgICB9XG4vL1xuLy8gICAgIGV4cHJlc3Npb25zLmZvckVhY2gobm9kZSA9PiB7XG4vLyAgICAgICAgIGNvbnN0IGVsZW1lbnRBY2Nlc3MgPSBub2RlIGFzIEVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uO1xuLy8gICAgICAgICBjb25zdCBleHByZXNzaW9uID0gZWxlbWVudEFjY2Vzcy5nZXRFeHByZXNzaW9uKCk7XG4vLyAgICAgICAgIGNvbnN0IGFyZ3VtZW50RXhwcmVzc2lvbiA9IGVsZW1lbnRBY2Nlc3MuZ2V0QXJndW1lbnRFeHByZXNzaW9uKCk7XG4vL1xuLy8gICAgICAgICBpZiAoIWFyZ3VtZW50RXhwcmVzc2lvbikge1xuLy8gICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBhcmd1bWVudCAoZS5nLiwgb2JqW10pLCBza2lwIHRyYW5zZm9ybWF0aW9uXG4vLyAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgY29uc3QgdHlwZSA9IGV4cHJlc3Npb24uZ2V0VHlwZSgpO1xuLy9cbi8vICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHR5cGUgaXMgYSBVbml0eSBBUEkgdHlwZVxuLy8gICAgICAgICBpZiAoIWdldElzVW5pdHlBUElUeXBlKHR5cGUpKSB7XG4vLyAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgLy8gUmV0cmlldmUgdGhlIHN5bWJvbCBvZiB0aGUgdHlwZVxuLy8gICAgICAgICBjb25zdCB0eXBlU3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbi8vICAgICAgICAgaWYgKCF0eXBlU3ltYm9sKSB7XG4vLyAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgIC8vIEdldCBhbGwgZGVjbGFyYXRpb25zIChjbGFzc2VzIGFuZCBpbnRlcmZhY2VzKSBhc3NvY2lhdGVkIHdpdGggdGhlIHR5cGVcbi8vICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gdHlwZVN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKS5maWx0ZXIoXG4vLyAgICAgICAgICAgICBkZWNsID0+IE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2wpIHx8IE5vZGUuaXNJbnRlcmZhY2VEZWNsYXJhdGlvbihkZWNsKVxuLy8gICAgICAgICApIGFzIChDbGFzc0RlY2xhcmF0aW9uIHwgSW50ZXJmYWNlRGVjbGFyYXRpb24pW107XG4vL1xuLy8gICAgICAgICBpZiAoZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICB9XG4vL1xuLy8gICAgICAgICAvLyBDb2xsZWN0IGFsbCB1bmlxdWUgZ2V0X2l0ZW0gYW5kIHNldF9pdGVtIG1ldGhvZHMgYWNyb3NzIGFsbCBkZWNsYXJhdGlvbnNcbi8vICAgICAgICAgY29uc3QgZ2V0SXRlbU1ldGhvZHM6IChNZXRob2REZWNsYXJhdGlvbiB8IE1ldGhvZFNpZ25hdHVyZSlbXSA9IFtdO1xuLy8gICAgICAgICBjb25zdCBzZXRJdGVtTWV0aG9kczogKE1ldGhvZERlY2xhcmF0aW9uIHwgTWV0aG9kU2lnbmF0dXJlKVtdID0gW107XG4vL1xuLy8gICAgICAgICBjb25zdCBtZXRob2RTaWduYXR1cmVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4vL1xuLy8gICAgICAgICBkZWNsYXJhdGlvbnMuZm9yRWFjaChkZWNsID0+IHtcbi8vICAgICAgICAgICAgIGNvbnN0IGNsYXNzT3JJbnRlcmZhY2UgPSBkZWNsIGFzIENsYXNzRGVjbGFyYXRpb24gfCBJbnRlcmZhY2VEZWNsYXJhdGlvbjtcbi8vXG4vLyAgICAgICAgICAgICAvLyBnZXRNZXRob2RzIHJldHVybnMgYW4gYXJyYXkgb2YgTWV0aG9kRGVjbGFyYXRpb24gb3IgTWV0aG9kU2lnbmF0dXJlXG4vLyAgICAgICAgICAgICBjb25zdCBtZXRob2RzID0gY2xhc3NPckludGVyZmFjZS5nZXRNZXRob2RzKCk7XG4vL1xuLy8gICAgICAgICAgICAgbWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IG1ldGhvZC5nZXROYW1lKCk7XG4vLyAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09IEdFVF9JVEVNX05BTUUgfHwgbWV0aG9kTmFtZSA9PT0gU0VUX0lURU1fTkFNRSkge1xuLy8gICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBzaWduYXR1cmUgc3RyaW5nIGZvciB0aGUgbWV0aG9kXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IG1ldGhvZC5nZXRTaWduYXR1cmUoKS5nZXREZWNsYXJhdGlvbigpPy5nZXRUZXh0KCk7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlmIChzaWduYXR1cmUgJiYgIW1ldGhvZFNpZ25hdHVyZXMuaGFzKHNpZ25hdHVyZSkpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2ROYW1lID09PSBHRVRfSVRFTV9OQU1FKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbU1ldGhvZHMucHVzaChtZXRob2QpO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtTWV0aG9kcy5wdXNoKG1ldGhvZCk7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RTaWduYXR1cmVzLmFkZChzaWduYXR1cmUpO1xuLy8gICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH0pO1xuLy9cbi8vICAgICAgICAgaWYgKGdldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCAmJiBzZXRJdGVtTWV0aG9kcy5sZW5ndGggPT09IDApIHtcbi8vICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgY29uc3QgcGFyZW50ID0gZWxlbWVudEFjY2Vzcy5nZXRQYXJlbnQoKTtcbi8vXG4vLyAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgZ2V0dGVyIG9yIHNldHRlclxuLy8gICAgICAgICBpZiAoXG4vLyAgICAgICAgICAgICBOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihwYXJlbnQpICYmXG4vLyAgICAgICAgICAgICBwYXJlbnQuZ2V0T3BlcmF0b3JUb2tlbigpLmdldEtpbmQoKSA9PT0gU3ludGF4S2luZC5FcXVhbHNUb2tlbiAmJlxuLy8gICAgICAgICAgICAgcGFyZW50LmdldExlZnQoKSA9PT0gZWxlbWVudEFjY2Vzc1xuLy8gICAgICAgICApIHtcbi8vICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZXR0ZXI6IG9ialtpbmRleF0gPSB2YWx1ZVxuLy8gICAgICAgICAgICAgaWYgKHNldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybjtcbi8vICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICBjb25zdCB2YWx1ZUV4cHJlc3Npb24gPSBwYXJlbnQuZ2V0UmlnaHQoKTtcbi8vXG4vLyAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGZpbmQgYSBtYXRjaGluZyBzZXRfaXRlbSBtZXRob2Rcbi8vICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nU2V0SXRlbSA9IHNldEl0ZW1NZXRob2RzLmZpbmQobWV0aG9kID0+IHtcbi8vICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBtZXRob2QuZ2V0UGFyYW1ldGVycygpO1xuLy8gICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAyKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICAgICAgICAgICAgICB9XG4vL1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4UGFyYW1UeXBlID0gcGFyYW1zWzBdLmdldFR5cGUoKTtcbi8vICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVBhcmFtVHlwZSA9IHBhcmFtc1sxXS5nZXRUeXBlKCk7XG4vL1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QXJnVHlwZSA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUeXBlKCk7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVBcmdUeXBlID0gdmFsdWVFeHByZXNzaW9uLmdldFR5cGUoKTtcbi8vXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIChcbi8vICAgICAgICAgICAgICAgICAgICAgdHlwZUNoZWNrZXIuaXNUeXBlQXNzaWduYWJsZVRvKGluZGV4QXJnVHlwZSwgaW5kZXhQYXJhbVR5cGUpICYmXG4vLyAgICAgICAgICAgICAgICAgICAgIHR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyh2YWx1ZUFyZ1R5cGUsIHZhbHVlUGFyYW1UeXBlKVxuLy8gICAgICAgICAgICAgICAgICk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICBpZiAoIW1hdGNoaW5nU2V0SXRlbSkge1xuLy8gICAgICAgICAgICAgICAgIGFkZERpYWdub3N0aWMoXG4vLyAgICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuLy8gICAgICAgICAgICAgICAgICAgICBub2RlLFxuLy8gICAgICAgICAgICAgICAgICAgICBgSW52YWxpZCBBc3NpZ25tZW50YCxcbi8vICAgICAgICAgICAgICAgICAgICAgQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMuSU5WQUxJRF9HRVRfSVRFTV9BUkdVTUVOVFMpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGdldHRlcjogb2JqW2luZGV4XVxuLy8gICAgICAgICAgICAgaWYgKGdldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuLy8gICAgICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCBhIG1hdGNoaW5nIGdldF9pdGVtIG1ldGhvZFxuLy8gICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdHZXRJdGVtID0gZ2V0SXRlbU1ldGhvZHMuZmluZChtZXRob2QgPT4ge1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG1ldGhvZC5nZXRQYXJhbWV0ZXJzKCk7XG4vLyAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDEpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhQYXJhbVR5cGUgPSBwYXJhbXNbMF0uZ2V0VHlwZSgpO1xuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4QXJnVHlwZSA9IGFyZ3VtZW50RXhwcmVzc2lvbi5nZXRUeXBlKCk7XG4vL1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0eXBlQ2hlY2tlci5pc1R5cGVBc3NpZ25hYmxlVG8oaW5kZXhBcmdUeXBlLCBpbmRleFBhcmFtVHlwZSk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICBsZXQgdmFsaWRQYXJhbXMgPSBnZXRJdGVtTWV0aG9kcy5mbGF0TWFwKGcgPT4gZy5nZXRQYXJhbWV0ZXJzKCkubWFwKHAgPT4gZ2V0RnVsbFR5cGVOYW1lKHAuZ2V0VHlwZSgpKSkpO1xuLy9cbi8vICAgICAgICAgICAgIGlmICghbWF0Y2hpbmdHZXRJdGVtKSB7XG4vLyAgICAgICAgICAgICAgICAgYWRkRGlhZ25vc3RpYyhcbi8vICAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4vLyAgICAgICAgICAgICAgICAgICAgIG5vZGUsXG4vLyAgICAgICAgICAgICAgICAgICAgIGBJbnZhbGlkIGFjY2VzcywgYWNjZXB0ZWQgdHlwZXMgYXJlICcke3ZhbGlkUGFyYW1zLmpvaW4oXCIsXCIpfSdgLFxuLy8gICAgICAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5JTlZBTElEX0dFVF9JVEVNX0FSR1VNRU5UUyk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vIH1cblxuZnVuY3Rpb24gcHJvY2Vzc0NsYXNzRGlhZ25vc3RpY3MoZmlsZTogU291cmNlRmlsZSwgZGlhZ25vc3RpY3M6IHRzLkRpYWdub3N0aWNbXSkge1xuICAgIGNvbnN0IGdlbmllc0NsYXNzZXMgPSBmaWxlLmdldENsYXNzZXMoKTtcblxuICAgIGdlbmllc0NsYXNzZXMuZm9yRWFjaChjbHMgPT4ge1xuICAgICAgICBjb25zdCBiYXNlQ2xhc3MgPSBjbHMuZ2V0QmFzZUNsYXNzKCk7XG4gICAgICAgIGNvbnN0IGltcGxlbWVudGVkSW50ZXJmYWNlcyA9IGNscy5nZXRJbXBsZW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IGJhc2VDbGFzc05hbWUgPSBiYXNlQ2xhc3M/LmdldE5hbWUoKTtcblxuICAgICAgICBpZiAoYmFzZUNsYXNzICYmIGdldElzVW5pdHlBUElUeXBlKGJhc2VDbGFzcy5nZXRUeXBlKCkpICYmIGJhc2VDbGFzc05hbWUgJiYgIUFMTE9XRURfSU5IRVJJVEFOQ0VfVFlQRVMuaGFzKGJhc2VDbGFzc05hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IGJhc2VDbGFzcy5nZXRTdGFydCgpO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYmFzZUNsYXNzLmdldFdpZHRoKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWNNZXNzYWdlID0gYENsYXNzICcke2Nscy5nZXROYW1lKCl9JyBpbmhlcml0cyBmcm9tIGEgVW5pdHkgdHlwZSAnJHtiYXNlQ2xhc3MuZ2V0TmFtZSgpfScgdGhhdCBpcyBub3QgJ01vbm9CZWhhdmlvdXInIG9yICdTY3JpcHRhYmxlT2JqZWN0Jy5gO1xuICAgICAgICAgICAgY29uc3QgZGlhZ25vc3RpYzogdHMuRGlhZ25vc3RpYyA9IHtcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLmNvbXBpbGVyTm9kZSxcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVRleHQ6IGRpYWdub3N0aWNNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiB0cy5EaWFnbm9zdGljQ2F0ZWdvcnkuRXJyb3IsXG4gICAgICAgICAgICAgICAgY29kZTogQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMuSU5WQUxJRF9JTkhFUklUQU5DRSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdHZW5pZXMnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRpYWdub3N0aWNzLnB1c2goZGlhZ25vc3RpYyk7XG4gICAgICAgIH1cblxuICAgICAgICBpbXBsZW1lbnRlZEludGVyZmFjZXMuZm9yRWFjaChpbnRmID0+IHtcbiAgICAgICAgICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZShpbnRmLmdldFR5cGUoKSkpIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gZ2V0RnVsbFR5cGVOYW1lKGludGYuZ2V0VHlwZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAoQWxsb3dlZFVpSW50ZXJmYWNlcy5oYXModHlwZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGludGYuZ2V0U3RhcnQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBpbnRmLmdldFdpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkaWFnbm9zdGljTWVzc2FnZSA9IGBDbGFzcyAnJHtjbHMuZ2V0TmFtZSgpfScgaW1wbGVtZW50cyBhIGZvcmJpZGRlbiBVbml0eSBpbnRlcmZhY2UgJyR7aW50Zi5nZXRUZXh0KCl9Jy5gO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpYWdub3N0aWM6IHRzLkRpYWdub3N0aWMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUuY29tcGlsZXJOb2RlLFxuICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aDogbGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVGV4dDogZGlhZ25vc3RpY01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiB0cy5EaWFnbm9zdGljQ2F0ZWdvcnkuRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkZPUkJJRERFTl9JTlRFUkZBQ0UsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ0dlbmllcycsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkaWFnbm9zdGljcy5wdXNoKGRpYWdub3N0aWMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1R5cGVVc2FnZURpYWdub3N0aWNzKGZpbGU6IFNvdXJjZUZpbGUsIGRpYWdub3N0aWNzOiB0cy5EaWFnbm9zdGljW10pIHtcbiAgICAvLyBHYXRoZXIgYWxsIE5ld0V4cHJlc3Npb24gYW5kIFR5cGVSZWZlcmVuY2VOb2RlIGluc3RhbmNlc1xuICAgIGNvbnN0IG5ld0V4cHJlc3Npb25zID0gZmlsZS5nZXREZXNjZW5kYW50c09mS2luZChTeW50YXhLaW5kLk5ld0V4cHJlc3Npb24pO1xuXG4gICAgLy8gUHJvY2VzcyBOZXdFeHByZXNzaW9uIG5vZGVzXG4gICAgbmV3RXhwcmVzc2lvbnMuZm9yRWFjaChuZXdFeHByID0+IHtcbiAgICAgICAgLy8gUmVzb2x2ZSB0aGUgc3ltYm9sIG9mIHRoZSBjbGFzcyBiZWluZyBpbnN0YW50aWF0ZWRcbiAgICAgICAgY29uc3QgdHlwZVN5bWJvbCA9IG5ld0V4cHIuZ2V0VHlwZSgpLmdldFN5bWJvbCgpO1xuXG4gICAgICAgIGlmICghdHlwZVN5bWJvbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0cmlldmUgYWxsIGRlY2xhcmF0aW9ucyBvZiB0aGUgc3ltYm9sXG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHR5cGVTeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG5cbiAgICAgICAgaWYgKCFkZWNsYXJhdGlvbnMgfHwgZGVjbGFyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlsdGVyIGZvciBjbGFzcyBkZWNsYXJhdGlvbnMgd2l0aCB0eXBlIHBhcmFtZXRlcnMgKGkuZS4sIGdlbmVyaWMgY2xhc3NlcylcbiAgICAgICAgY29uc3QgY2xhc3NEZWNsYXJhdGlvbnMgPSBkZWNsYXJhdGlvbnMuZmlsdGVyKGRlY2wgPT5cbiAgICAgICAgICAgIE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2wpICYmIGdldElzVW5pdHlBUElEZWNsYXJhdGlvbihkZWNsKSAmJiBkZWNsLmdldFR5cGVQYXJhbWV0ZXJzKCkubGVuZ3RoID4gMFxuICAgICAgICApIGFzIENsYXNzRGVjbGFyYXRpb25bXTtcblxuICAgICAgICBpZiAoY2xhc3NEZWNsYXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIE5vdCBhIGdlbmVyaWMgY2xhc3NcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsYXNzRGVjbGFyYXRpb24gPSBjbGFzc0RlY2xhcmF0aW9uc1swXTtcbiAgICAgICAgY29uc3QgdHlwZVBhcmFtcyA9IGNsYXNzRGVjbGFyYXRpb24uZ2V0VHlwZVBhcmFtZXRlcnMoKTtcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRUeXBlQXJnc0NvdW50ID0gdHlwZVBhcmFtcy5sZW5ndGg7XG5cbiAgICAgICAgLy8gUmV0cmlldmUgcHJvdmlkZWQgdHlwZSBhcmd1bWVudHMgZnJvbSB0aGUgTmV3RXhwcmVzc2lvblxuICAgICAgICBjb25zdCB0eXBlQXJncyA9IG5ld0V4cHIuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICBjb25zdCBwcm92aWRlZFR5cGVBcmdzQ291bnQgPSB0eXBlQXJncy5sZW5ndGg7XG5cbiAgICAgICAgaWYgKHByb3ZpZGVkVHlwZUFyZ3NDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gR2VuZXJpYyBjbGFzcyB1c2VkIHdpdGhvdXQgdHlwZSBhcmd1bWVudHNcbiAgICAgICAgICAgIGFkZERpYWdub3N0aWMoXG4gICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4gICAgICAgICAgICAgICAgbmV3RXhwcixcbiAgICAgICAgICAgICAgICBgR2VuZXJpYyBjbGFzcyAnJHtnZXRGdWxsVHlwZU5hbWUobmV3RXhwci5nZXRUeXBlKCkpfScgbXVzdCBiZSBpbnN0YW50aWF0ZWQgd2l0aCAke2V4cGVjdGVkVHlwZUFyZ3NDb3VudH0gdHlwZSBhcmd1bWVudChzKS5gLFxuICAgICAgICAgICAgICAgIENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkdFTkVSSUNfQ0xBU1NfTUlTU0lOR19UWVBFX0FSR1VNRU5UU1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcm92aWRlZFR5cGVBcmdzQ291bnQgIT09IGV4cGVjdGVkVHlwZUFyZ3NDb3VudCkge1xuICAgICAgICAgICAgICAgIC8vIEluY29ycmVjdCBudW1iZXIgb2YgdHlwZSBhcmd1bWVudHMgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICBhZGREaWFnbm9zdGljKFxuICAgICAgICAgICAgICAgICAgICBkaWFnbm9zdGljcyxcbiAgICAgICAgICAgICAgICAgICAgbmV3RXhwcixcbiAgICAgICAgICAgICAgICAgICAgYEdlbmVyaWMgY2xhc3MgJyR7Z2V0RnVsbFR5cGVOYW1lKG5ld0V4cHIuZ2V0VHlwZSgpKX0nIGV4cGVjdHMgJHtleHBlY3RlZFR5cGVBcmdzQ291bnR9IHR5cGUgYXJndW1lbnQocyksIGJ1dCBnb3QgJHtwcm92aWRlZFR5cGVBcmdzQ291bnR9LmAsXG4gICAgICAgICAgICAgICAgICAgIENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkdFTkVSSUNfQ0xBU1NfSU5WQUxJRF9UWVBFX0FSR1VNRU5UU1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSW52YWxpZCBhcmdzXG4gICAgICAgICAgICB0eXBlQXJncy5mb3JFYWNoKHR5cGVBcmdOb2RlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJnVHlwZSA9IHR5cGVBcmdOb2RlLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWdldElzVmFsaWRVbml0eUdlbmVyaWNUeXBlQXJnKHR5cGVBcmdUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBhZGREaWFnbm9zdGljKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlQXJnTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGBUeXBlIGFyZ3VtZW50cyBmb3IgdHlwZSAnJHtnZXRGdWxsVHlwZU5hbWUobmV3RXhwci5nZXRUeXBlKCkpfScgbXVzdCBiZSBVbml0eSBBUEkgdHlwZXMuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkdFTkVSSUNfQ0xBU1NfSU5WQUxJRF9UWVBFX0FSR1VNRU5UU1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBwcm9jZXNzQ2FsbEV4cHJlc3Npb25EaWFnbm9zdGljcyhmaWxlOiBTb3VyY2VGaWxlLCBkaWFnbm9zdGljczogdHMuRGlhZ25vc3RpY1tdKSB7XG4gICAgY29uc3QgY2FsbEV4cHJlc3Npb25zID0gZmlsZS5nZXREZXNjZW5kYW50c09mS2luZChTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcblxuICAgIGNhbGxFeHByZXNzaW9ucy5mb3JFYWNoKGNhbGxFeHByID0+IHtcbiAgICAgICAgcHJvY2Vzc0dlbmVyaWNNZXRob2RDYWxsKGNhbGxFeHByLCBkaWFnbm9zdGljcyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHByb2Nlc3NHZW5lcmljTWV0aG9kQ2FsbChjYWxsRXhwcjogQ2FsbEV4cHJlc3Npb24sIGRpYWdub3N0aWNzOiB0cy5EaWFnbm9zdGljW10pIHtcbiAgICBjb25zdCBleHByZXNzaW9uID0gY2FsbEV4cHIuZ2V0RXhwcmVzc2lvbigpO1xuXG4gICAgLy8gR2V0IHRoZSBtZXRob2Qgc3ltYm9sIGFuZCBhbGwgZGVjbGFyYXRpb25zXG4gICAgbGV0IG1ldGhvZERlY2xhcmF0aW9uczogTWV0aG9kRGVjbGFyYXRpb25bXSA9IFtdO1xuXG4gICAgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcmVzc2lvbikgfHwgTm9kZS5pc0lkZW50aWZpZXIoZXhwcmVzc2lvbikpIHtcbiAgICAgICAgY29uc3QgbWV0aG9kU3ltYm9sID0gZXhwcmVzc2lvbi5nZXRTeW1ib2woKTtcbiAgICAgICAgaWYgKG1ldGhvZFN5bWJvbCkge1xuICAgICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gbWV0aG9kU3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgICAgICAgICAgbWV0aG9kRGVjbGFyYXRpb25zID0gZGVjbGFyYXRpb25zLmZpbHRlcihkZWNsID0+IE5vZGUuaXNNZXRob2REZWNsYXJhdGlvbihkZWNsKSkgYXMgTWV0aG9kRGVjbGFyYXRpb25bXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtZXRob2REZWNsYXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjsgLy8gQ2Fubm90IHByb2NlZWQgd2l0aG91dCBtZXRob2QgZGVjbGFyYXRpb25zXG4gICAgfVxuXG4gICAgbGV0IGlzR2VuZXJpY01ldGhvZERlY2xhcmF0aW9uID0gbWV0aG9kRGVjbGFyYXRpb25zLmZpbHRlcihkZWNsID0+IHtcbiAgICAgICAgcmV0dXJuIGRlY2wuZ2V0VHlwZVBhcmFtZXRlcnMoKS5sZW5ndGggPiAwXG4gICAgfSkubGVuZ3RoID4gMDtcblxuICAgIGlmICghaXNHZW5lcmljTWV0aG9kRGVjbGFyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbHRlciB0byBVbml0eSBBUEkgbWV0aG9kc1xuICAgIG1ldGhvZERlY2xhcmF0aW9ucyA9IG1ldGhvZERlY2xhcmF0aW9ucy5maWx0ZXIoZGVjbCA9PiBnZXRJc1VuaXR5QVBJRGVjbGFyYXRpb24oZGVjbCkpO1xuXG4gICAgaWYgKG1ldGhvZERlY2xhcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuOyAvLyBObyBVbml0eSBBUEkgbWV0aG9kc1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBnZXRNZXRob2ROYW1lKGV4cHJlc3Npb24pO1xuXG4gICAgLy8gQ2hlY2sgZm9yIG5vbi1nZW5lcmljIG92ZXJsb2FkcyB0aGF0IGFjY2VwdCB0aGUgc2FtZSBwYXJhbWV0ZXJzXG4gICAgaWYgKGhhc01hdGNoaW5nTm9uR2VuZXJpY092ZXJsb2FkKG1ldGhvZERlY2xhcmF0aW9ucywgY2FsbEV4cHIpKSB7XG4gICAgICAgIHJldHVybjsgLy8gU2tpcCB0aGUgY2hlY2sgc2luY2UgYSBub24tZ2VuZXJpYyBvdmVybG9hZCBleGlzdHNcbiAgICB9XG5cbiAgICAvLyBOb3csIGVuc3VyZSB0aGF0IHRoZSBjYWxsIHByb3ZpZGVzIHR5cGUgYXJndW1lbnRzXG4gICAgY29uc3QgdHlwZUFyZ3MgPSBjYWxsRXhwci5nZXRUeXBlQXJndW1lbnRzKCk7XG5cbiAgICBpZiAodHlwZUFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIEdlbmVyaWMgbWV0aG9kIGNhbGxlZCB3aXRob3V0IHNwZWNpZnlpbmcgdHlwZSBhcmd1bWVudHNcbiAgICAgICAgYWRkRGlhZ25vc3RpYyhcbiAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuICAgICAgICAgICAgY2FsbEV4cHIsXG4gICAgICAgICAgICBgR2VuZXJpYyBtZXRob2QgJyR7bWV0aG9kTmFtZX0nIG11c3QgYmUgY2FsbGVkIHdpdGggdHlwZSBhcmd1bWVudHMuYCxcbiAgICAgICAgICAgIENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkdFTkVSSUNfTUVUSE9EX01JU1NJTkdfVFlQRV9BUkdVTUVOVFNcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCB2YWxpZEFyZ3MgPSBtZXRob2REZWNsYXJhdGlvbnMubWFwKG0gPT4gbS5nZXRUeXBlUGFyYW1ldGVycygpLmxlbmd0aCk7XG4gICAgaWYgKCF2YWxpZEFyZ3MuaW5jbHVkZXModHlwZUFyZ3MubGVuZ3RoKSkge1xuICAgICAgICAvLyBJbmNvcnJlY3QgbnVtYmVyIG9mIHR5cGUgYXJndW1lbnRzIHByb3ZpZGVkXG4gICAgICAgIGFkZERpYWdub3N0aWMoXG4gICAgICAgICAgICBkaWFnbm9zdGljcyxcbiAgICAgICAgICAgIGNhbGxFeHByLFxuICAgICAgICAgICAgYEdlbmVyaWMgbWV0aG9kICcke21ldGhvZE5hbWV9JyB3YXMgcHJvdmlkZWQgdGhlIHdyb25nIG51bWJlciBvZiBhcmd1bWVudHMuIFZhbGlkIGFyZ3MgY291bnRzOiAnJHt2YWxpZEFyZ3Muam9pbihcIiwgXCIpfSdgLFxuICAgICAgICAgICAgQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMuR0VORVJJQ19DTEFTU19JTlZBTElEX1RZUEVfQVJHVU1FTlRTXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgdHlwZSBhcmd1bWVudHNcbiAgICBpZiAoQ09NUE9ORU5UX01FVEhPRFMuaGFzKG1ldGhvZE5hbWUpKSB7XG4gICAgICAgIC8vIEFwcGx5IEdldENvbXBvbmVudCBydWxlc1xuICAgICAgICB0eXBlQXJncy5mb3JFYWNoKHR5cGVBcmdOb2RlID0+IHtcbiAgICAgICAgICAgIGlmICghaXNWYWxpZENvbXBvbmVudFR5cGVBcmcodHlwZUFyZ05vZGUpKSB7XG4gICAgICAgICAgICAgICAgYWRkRGlhZ25vc3RpYyhcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MsXG4gICAgICAgICAgICAgICAgICAgIHR5cGVBcmdOb2RlLFxuICAgICAgICAgICAgICAgICAgICBgVHlwZSBhcmd1bWVudHMgZm9yIG1ldGhvZCAnJHttZXRob2ROYW1lfScgbXVzdCBiZSBhIFVuaXR5IEFQSSB0eXBlLCBhbiBpbnRlcmZhY2UsIG9yIGEgdHlwZSB0aGF0IGV4dGVuZHMgTW9ub0JlaGF2aW91ci5gLFxuICAgICAgICAgICAgICAgICAgICBDVVNUT01fRElBR05PU1RJQ19DT0RFUy5HRU5FUklDX01FVEhPRF9JTlZBTElEX1RZUEVfQVJHVU1FTlRTXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG90aGVyIG1ldGhvZHMsIHR5cGUgYXJndW1lbnRzIG11c3QgYmUgVW5pdHkgQVBJIHR5cGVzXG4gICAgICAgIHR5cGVBcmdzLmZvckVhY2godHlwZUFyZ05vZGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZUFyZ1R5cGUgPSB0eXBlQXJnTm9kZS5nZXRUeXBlKCk7XG4gICAgICAgICAgICBpZiAoIWdldElzVmFsaWRVbml0eUdlbmVyaWNUeXBlQXJnKHR5cGVBcmdUeXBlKSkge1xuICAgICAgICAgICAgICAgIGFkZERpYWdub3N0aWMoXG4gICAgICAgICAgICAgICAgICAgIGRpYWdub3N0aWNzLFxuICAgICAgICAgICAgICAgICAgICB0eXBlQXJnTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgYFR5cGUgYXJndW1lbnRzIGZvciBtZXRob2QgJyR7bWV0aG9kTmFtZX0nIG11c3QgYmUgVW5pdHkgQVBJIHR5cGVzLmAsXG4gICAgICAgICAgICAgICAgICAgIENVU1RPTV9ESUFHTk9TVElDX0NPREVTLkdFTkVSSUNfTUVUSE9EX0lOVkFMSURfVFlQRV9BUkdVTUVOVFNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc01hdGNoaW5nTm9uR2VuZXJpY092ZXJsb2FkKFxuICAgIG1ldGhvZERlY2xhcmF0aW9uczogTWV0aG9kRGVjbGFyYXRpb25bXSxcbiAgICBjYWxsRXhwcjogQ2FsbEV4cHJlc3Npb25cbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNhbGxBcmdUeXBlcyA9IGNhbGxFeHByLmdldEFyZ3VtZW50cygpLm1hcChhcmcgPT4gYXJnLmdldFR5cGUoKSk7XG4gICAgY29uc3QgdHlwZUNoZWNrZXIgPSBjYWxsRXhwci5nZXRQcm9qZWN0KCkuZ2V0VHlwZUNoZWNrZXIoKTtcblxuICAgIHJldHVybiBtZXRob2REZWNsYXJhdGlvbnMuc29tZShkZWNsID0+IHtcbiAgICAgICAgaWYgKGRlY2wuZ2V0VHlwZVBhcmFtZXRlcnMoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEl0J3MgYSBnZW5lcmljIG1ldGhvZFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGRlY2wuZ2V0UGFyYW1ldGVycygpO1xuICAgICAgICBpZiAocGFyYW1ldGVycy5sZW5ndGggIT09IGNhbGxBcmdUeXBlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbXBhcmUgcGFyYW1ldGVyIHR5cGVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1UeXBlID0gcGFyYW1ldGVyc1tpXS5nZXRUeXBlKCk7XG4gICAgICAgICAgICBjb25zdCBhcmdUeXBlID0gY2FsbEFyZ1R5cGVzW2ldO1xuXG4gICAgICAgICAgICBpZiAoIXR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyhhcmdUeXBlLCBwYXJhbVR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZvdW5kIGEgbWF0Y2hpbmcgbm9uLWdlbmVyaWMgb3ZlcmxvYWRcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZENvbXBvbmVudFR5cGVBcmcodHlwZUFyZ05vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB0eXBlQXJnVHlwZSA9IHR5cGVBcmdOb2RlLmdldFR5cGUoKTtcblxuICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZSh0eXBlQXJnVHlwZSkpIHtcbiAgICAgICAgLy8gSXQncyBhIFVuaXR5IEFQSSB0eXBlLCBhY2NlcHRhYmxlXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGdlbmllc1NjcmlwdFR5cGUgPSBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUodHlwZUFyZ1R5cGUpO1xuICAgIGlmIChnZW5pZXNTY3JpcHRUeXBlID09PSBHZW5pZXNTY3JpcHRUeXBlLk1vbm9iZWhhdmlvdXIpIHtcbiAgICAgICAgLy8gSXQncyBhIE1vbm9CZWhhdmlvdXIsIGFjY2VwdGFibGVcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3ltYm9sID0gdHlwZUFyZ1R5cGUuZ2V0U3ltYm9sKCk7XG4gICAgaWYgKHN5bWJvbCkge1xuICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgIGlmIChkZWNsYXJhdGlvbnMgJiYgZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChOb2RlLmlzSW50ZXJmYWNlRGVjbGFyYXRpb24oZGVjbGFyYXRpb25zWzBdKSkge1xuICAgICAgICAgICAgICAgIC8vIEl0J3MgYW4gaW50ZXJmYWNlLCBhY2NlcHRhYmxlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7IC8vIEludmFsaWQgdHlwZSBhcmd1bWVudFxufVxuXG5mdW5jdGlvbiBnZXRNZXRob2ROYW1lKGV4cHJlc3Npb246IE5vZGUpOiBzdHJpbmcge1xuICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgIHJldHVybiBleHByZXNzaW9uLmdldE5hbWUoKTtcbiAgICB9IGVsc2UgaWYgKE5vZGUuaXNJZGVudGlmaWVyKGV4cHJlc3Npb24pKSB7XG4gICAgICAgIHJldHVybiBleHByZXNzaW9uLmdldFRleHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7IC8vIFVua25vd25cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZERpYWdub3N0aWMoXG4gICAgZGlhZ25vc3RpY3M6IHRzLkRpYWdub3N0aWNbXSxcbiAgICBub2RlOiBOb2RlLFxuICAgIG1lc3NhZ2VUZXh0OiBzdHJpbmcsXG4gICAgY29kZTogbnVtYmVyXG4pIHtcbiAgICBjb25zdCBzdGFydCA9IG5vZGUuZ2V0U3RhcnQoKTtcbiAgICBjb25zdCBsZW5ndGggPSBub2RlLmdldFdpZHRoKCk7XG4gICAgY29uc3QgZGlhZ25vc3RpYzogdHMuRGlhZ25vc3RpYyA9IHtcbiAgICAgICAgZmlsZTogbm9kZS5nZXRTb3VyY2VGaWxlKCkuY29tcGlsZXJOb2RlLFxuICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgIGxlbmd0aDogbGVuZ3RoLFxuICAgICAgICBtZXNzYWdlVGV4dDogbWVzc2FnZVRleHQsXG4gICAgICAgIGNhdGVnb3J5OiB0cy5EaWFnbm9zdGljQ2F0ZWdvcnkuRXJyb3IsXG4gICAgICAgIGNvZGU6IGNvZGUsXG4gICAgICAgIHNvdXJjZTogJ0dlbmllcycsXG4gICAgfTtcbiAgICBkaWFnbm9zdGljcy5wdXNoKGRpYWdub3N0aWMpO1xufVxuIiwiaW1wb3J0ICogYXMgdHMgZnJvbSAndHlwZXNjcmlwdCc7XG5pbXBvcnQge1xuICAgIGV4dGVuZHNNb25vQmVoYXZpb3VyLFxuICAgIGV4dGVuZHNTY3JpcHRhYmxlT2JqZWN0LFxuICAgIGV4dHJhY3RQcm9wZXJ0aWVzLFxuICAgIEZpbGVDb21waWxlT3V0cHV0LFxuICAgIEdlbmllc1NjcmlwdFVpRXZlbnRzLFxuICAgIGdldEZ1bGxUeXBlTmFtZSxcbiAgICBIZWFkZXJEZWNvcmF0b3IsXG4gICAgSGlkZUluSW5zcGVjdG9yRGVjb3JhdG9yLFxuICAgIE1vbm9iZWhhdmlvdXJUeXBlTmFtZSxcbiAgICBOb25TZXJpYWxpemVkRGVjb3JhdG9yLFxuICAgIFByb3BlcnR5SW5mbyxcbiAgICByZW1vdmVEZWNvcmF0b3JzLFxuICAgIFNjcmlwdGFibGVPYmplY3RUeXBlTmFtZSxcbiAgICBTZXJpYWxpemVGaWVsZERlY29yYXRvcixcbiAgICBTcGFjZURlY29yYXRvcixcbiAgICBUb29sdGlwRGVjb3JhdG9yLFxuICAgIHRyYXZlcnNlUHJvdG90eXBlQ2hhaW4sXG4gICAgVWlJbnRlcmZhY2VUb0VudW1NYXAsXG4gICAgdXBkYXRlSW1wb3J0c1RvUmVsYXRpdmVQYXRoc1xufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuaW1wb3J0IHtDbGFzc0RlY2xhcmF0aW9uLCBQcm9qZWN0LCBTb3VyY2VGaWxlLH0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge1Byb21pc2VXcmFwcGVyVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvUHJvbWlzZVdyYXBwZXJUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtDb21wb25lbnRDYWxsVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvQ29tcG9uZW50Q2FsbFRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge1JlZlRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL1JlZlRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge0dlbmVyaWNUeXBlVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvR2VuZXJpY1R5cGVUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtHZW5lcmljTWV0aG9kVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvR2VuZXJpY01ldGhvZFRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge0V4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0V4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4uL3RyYW5zZm9ybWVycy9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0lUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtHZW5pZXNJbnN0YW5jZVRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0dlbmllc0luc3RhbmNlVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7U2NyaXB0YWJsZU9iamVjdENyZWF0ZUluc3RhbmNlVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvU2NyaXB0YWJsZU9iamVjdENyZWF0ZUluc3RhbmNlVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7T3BlcmF0b3JPdmVybG9hZGluZ1RyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL09wZXJhdG9yT3ZlcmxvYWRpbmdUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtFdmVudENvbnRleHRUcmFuc2Zvcm1lcn0gZnJvbSBcIi4uL3RyYW5zZm9ybWVycy9FdmVudENvbnRleHRUcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtnZXRHZW5pZXNTZW1hbnRpY0RpYWdub3N0aWNzfSBmcm9tIFwiLi4vR2VuaWVzRGlhZ25vc3RpY3NVdGlsc1wiO1xuaW1wb3J0IHtEZWxlZ2F0ZVRvQXJyb3dGdW5jdGlvblRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL0RlbGVnYXRlVG9BcnJvd0Z1bmN0aW9uVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7TnVtZXJpY092ZXJsb2FkUmVzb2x1dGlvblRyYW5zZm9ybWVyfSBmcm9tIFwiLi4vdHJhbnNmb3JtZXJzL051bWVyaWNPdmVybG9hZFJlc29sdXRpb25UcmFuc2Zvcm1lclwiO1xuaW1wb3J0IHtCcmFja2V0QWNjZXNzVHJhbnNmb3JtZXJ9IGZyb20gXCIuLi90cmFuc2Zvcm1lcnMvQnJhY2tldEFjY2Vzc1RyYW5zZm9ybWVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdlbmllc1RyYW5zcGlsZXIge1xuICAgIHByaXZhdGUgcHJvamVjdDogUHJvamVjdDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zZm9ybWVyczogeyBwaGFzZTogbnVtYmVyLCB0cmFuc2Zvcm1lcjogSVRyYW5zZm9ybWVyIH1bXTtcbiAgICBwcml2YXRlIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0O1xuXG4gICAgY29uc3RydWN0b3IodHNDb25maWdQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gbmV3IFByb2plY3Qoe1xuICAgICAgICAgICAgdHNDb25maWdGaWxlUGF0aDogdHNDb25maWdQYXRoLFxuICAgICAgICAgICAgc2tpcEFkZGluZ0ZpbGVzRnJvbVRzQ29uZmlnOiB0cnVlLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRoaXMucHJvamVjdC5nZXRUeXBlQ2hlY2tlcigpO1xuXG4gICAgICAgIHRoaXMudHJhbnNmb3JtYXRpb25Db250ZXh0ID0gbmV3IFRyYW5zZm9ybWF0aW9uQ29udGV4dCh0eXBlQ2hlY2tlcik7XG5cbiAgICAgICAgLy9FYWNoIHBoYXNlIGlzIGVzc2VudGlhbGx5IGEgZnVsbCByZS1sb29wIG9mIHRoZSBBU1RcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lcnMgPSBbXG5cbiAgICAgICAgICAgIC8vQWxsb3dzIHVzaW5nICRyZWYudmFsdWVcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBSZWZUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9BbGxvd3MgcGFzcyBjb250ZXh0IHRvIGdlbmllcyBldmVudC9zaWduYWwgYnVzXG4gICAgICAgICAgICB7cGhhc2U6IDEsIHRyYW5zZm9ybWVyOiBuZXcgRXZlbnRDb250ZXh0VHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vSWYgcGFzc2luZyBhIGZ1bmN0aW9uIHRvIGEgZGVsZWdhdGUsIGNvbnZlcnQgdG8gYW4gYXJyb3cgZnVuY3Rpb24gdG8gcHJlc2VydmUgXG4gICAgICAgICAgICAvL3RoZSBjb250ZXh0XG4gICAgICAgICAgICB7cGhhc2U6IDEsIHRyYW5zZm9ybWVyOiBuZXcgRGVsZWdhdGVUb0Fycm93RnVuY3Rpb25UcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9Gb3IgcmVwbGFjaW5nIGJyYWNrZXQgYWNjZXNzIGZvciBpbmRleGVycyBhbmQgcmVwbGFjaW5nIHRoZW0gd2l0aCBnZXRfaXRlbSBhbmQgc2V0X2l0ZW1cbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBCcmFja2V0QWNjZXNzVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vQWxsb3dzIGF3YWl0aW5nIHRhc2sgYW5kIHVuaXRhc2tcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBQcm9taXNlV3JhcHBlclRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL0Vuc3VyZSB3ZSBhcmUgaGFuZGxpbmcgZ2VuZXJpYyBjb21wb25lbnQgY2FsbHMgdG8gdGhlaXIgb3ZlcmxvYWRzXG4gICAgICAgICAgICB7cGhhc2U6IDEsIHRyYW5zZm9ybWVyOiBuZXcgQ29tcG9uZW50Q2FsbFRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL0Vuc3VyZSB3ZSBhcmUgaGFuZGxpbmcgZ2VuZXJpYyBjb21wb25lbnQgY2FsbHMgdG8gdGhlaXIgb3ZlcmxvYWRzXG4gICAgICAgICAgICB7cGhhc2U6IDEsIHRyYW5zZm9ybWVyOiBuZXcgU2NyaXB0YWJsZU9iamVjdENyZWF0ZUluc3RhbmNlVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vRW5zdXJlIHdlIGFyZSB0cmFuc2Zvcm1pbmcgZ2VuZXJpYyBleHRlbnNpb25zIG1ldGhvZHMgdG8gdXNlIHRoZSBkZWNsYXJpbmcgdHlwZSBpbnN0ZWFkLlxuICAgICAgICAgICAge3BoYXNlOiAxLCB0cmFuc2Zvcm1lcjogbmV3IEV4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL1doZW4gcGFzc2luZyBUUyBNb25vYmVoYXZpb3VyIG9yIFNjcmlwdGFibGVPYmplY3QgdG8gdW5pdHkgQVBJIHdlIHdpbGwgcmVwbGFjZVxuICAgICAgICAgICAgLy9XaXRoIF9fZ2VuaWVzSW5zdGFuY2VfXyB3aGljaCBpcyBwcm94aWVkIHRvIHRoZSBhY3R1YWwgY29tcG9uZW50LiBFeDogRGVzdHJveSh0aGlzKTtcbiAgICAgICAgICAgIHtwaGFzZTogMSwgdHJhbnNmb3JtZXI6IG5ldyBHZW5pZXNJbnN0YW5jZVRyYW5zZm9ybWVyKCl9LFxuXG4gICAgICAgICAgICAvL0Vuc3VyZSBhbGwgZ2VuZXJpYyB0eXBlcyBhcmUgaGFuZGxlZCBiZWZvcmUgd2UgY3JlYXRlIGdlbmVyaWMgbWV0aG9kc1xuICAgICAgICAgICAge3BoYXNlOiAyLCB0cmFuc2Zvcm1lcjogbmV3IEdlbmVyaWNUeXBlVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vSGFuZGxlIG9wZXJhdG9yIG92ZXJsb2FkaW5nIGJ5IGNhbGxpbmcgdGhlIGNvcnJlY3QgbWV0aG9kLlxuICAgICAgICAgICAge3BoYXNlOiAzLCB0cmFuc2Zvcm1lcjogbmV3IE9wZXJhdG9yT3ZlcmxvYWRpbmdUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICAgICAgLy9FbnN1cmUgd2UgYXJlIHRyYW5zZm9ybWluZyBnZW5lcmljIGV4dGVuc2lvbnMgbWV0aG9kcyB0byB1c2UgdGhlIGRlY2xhcmluZyB0eXBlIGluc3RlYWQuXG4gICAgICAgICAgICAvL05PVEU6IFRoaXMgc2hvdWxkIGhhcHBlbiByaWdodCBiZWZvcmUgZ2VuZXJpYyBtZXRob2QgdHJhbnNmb3JtZXIgYW5kIGFmdGVyIG90aGVycyBzaW5jZSBcbiAgICAgICAgICAgIC8vaXQgaGFzIGluZm8gYWJvdXQgdGhlIGdlbmVyaWMgbWV0aG9kIHRyYW5zZm9ybWF0aW9ucyBhbmQgdGhhdCBpbmZvIGlzIHN0b3JlZCB3aXRoIHRoZSBcbiAgICAgICAgICAgIC8vY2FsbCBub2RlIGFzIGEga2V5IHNvIHRoaXMgd2lsbCBhdm9pZCBhbnkga2V5cyBicmVha2luZyBiZWNhdXNlIHRoZSBub2RlIGdvdCB0cmFuc2Zvcm1lZC5cbiAgICAgICAgICAgIHtwaGFzZTogNCwgdHJhbnNmb3JtZXI6IG5ldyBOdW1lcmljT3ZlcmxvYWRSZXNvbHV0aW9uVHJhbnNmb3JtZXIoKX0sXG5cbiAgICAgICAgICAgIC8vVHJhbnNmb3JtcyBnZW5lcmljIG1ldGhvZCBjYWxscyB0byBiZSBjYWxsZWQgY29ycmVjdGx5IG9uIHRoZSBDIyBzaWRlLlxuICAgICAgICAgICAge3BoYXNlOiA1LCB0cmFuc2Zvcm1lcjogbmV3IEdlbmVyaWNNZXRob2RUcmFuc2Zvcm1lcigpfSxcblxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21waWxlKGZpbGVzVG9Db21waWxlOiBzdHJpbmdbXSwgcHJvamVjdEZpbGVzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gICAgICAgIC8vIExvYWQgc291cmNlIGZpbGVzIGludG8gdGhlIHByb2plY3RcbiAgICAgICAgdGhpcy5wcm9qZWN0LmFkZFNvdXJjZUZpbGVzQXRQYXRocyhmaWxlc1RvQ29tcGlsZSk7XG4gICAgICAgIHRoaXMucHJvamVjdC5hZGRTb3VyY2VGaWxlc0F0UGF0aHMocHJvamVjdEZpbGVzKTtcblxuICAgICAgICBsZXQgY29sbGVjdGVkRmlsZXM6IFNldDxTb3VyY2VGaWxlPiA9IG5ldyBTZXQ8U291cmNlRmlsZT4oKTtcbiAgICAgICAgbGV0IHByb2Nlc3NlZDogU2V0PHN0cmluZz4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgbGV0IGRlcGVuZGVuY3lHcmFwaDogTWFwPFNvdXJjZUZpbGUsIFNldDxTb3VyY2VGaWxlPj4gPSBuZXcgTWFwPFNvdXJjZUZpbGUsIFNldDxTb3VyY2VGaWxlPj4oKTtcblxuICAgICAgICAvLyBTdGFydCBjb2xsZWN0aW5nIGZyb20gaW5pdGlhbCBmaWxlIHBhdGhzXG4gICAgICAgIGZpbGVzVG9Db21waWxlLmZvckVhY2goZmlsZVBhdGggPT4ge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IHRoaXMucHJvamVjdC5nZXRTb3VyY2VGaWxlT3JUaHJvdyhmaWxlUGF0aCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29sbGVjdEZpbGVzKHNvdXJjZUZpbGUsIGNvbGxlY3RlZEZpbGVzLCBwcm9jZXNzZWQsIGRlcGVuZGVuY3lHcmFwaCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRvcG9sb2dpY2FsIHNvcnRcbiAgICAgICAgY29uc3Qgc29ydGVkRmlsZXMgPSB0aGlzLnRvcG9sb2dpY2FsU29ydChBcnJheS5mcm9tKGNvbGxlY3RlZEZpbGVzKSwgZGVwZW5kZW5jeUdyYXBoKTtcblxuICAgICAgICBsZXQgb3V0cHV0czogTWFwPFNvdXJjZUZpbGUsIEZpbGVDb21waWxlT3V0cHV0PiA9IG5ldyBNYXA8U291cmNlRmlsZSwgRmlsZUNvbXBpbGVPdXRwdXQ+KCk7XG5cbiAgICAgICAgLy9QcmVwcm9jZXNzIHNvdXJjZSBmaWxlc1xuICAgICAgICBzb3J0ZWRGaWxlcy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgICAgLy9QcmUtZW1pdCwgZW5zdXJlIHNvdXJjZSBmaWxlcyBoYXZlIGNvcnJlY3QgZXhwb3J0cyBhbmQgc2F2ZVxuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0RXhwb3J0KHMpO1xuICAgICAgICAgICAgdXBkYXRlSW1wb3J0c1RvUmVsYXRpdmVQYXRocyhzKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBpbGVPdXRwdXQob3V0cHV0cywgcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbGxlY3RlZEZpbGVzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQob3V0cHV0cywgcyk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG91dHB1dHM6IFsuLi5vdXRwdXRzLnZhbHVlcygpXVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldERlZmF1bHRFeHBvcnQoc291cmNlRmlsZTogU291cmNlRmlsZSkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSBzdWl0YWJsZSBkZWZhdWx0IGV4cG9ydFxuICAgICAgICBjb25zdCBkZWZhdWx0RXhwb3J0U3ltYm9sID0gc291cmNlRmlsZS5nZXREZWZhdWx0RXhwb3J0U3ltYm9sKClcbiAgICAgICAgbGV0IGRlZmF1bHRFeHBvcnRlZENsYXNzID0gbnVsbDtcbiAgICAgICAgaWYgKGRlZmF1bHRFeHBvcnRTeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IGRlZmF1bHRFeHBvcnRTeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgICAgICBkZWZhdWx0RXhwb3J0ZWRDbGFzcyA9IGRlY2xhcmF0aW9ucy5maW5kKGRlY2wgPT4gZGVjbC5nZXRLaW5kKCkgPT09IHRzLlN5bnRheEtpbmQuQ2xhc3NEZWNsYXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVmYXVsdEV4cG9ydGVkQ2xhc3MgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuOyAgLy8gRXhpdCB0aGUgZnVuY3Rpb24gZWFybHlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vIHN1aXRhYmxlIGRlZmF1bHQgZXhwb3J0LCBtb2RpZnkgY2xhc3NlcyBhcyBuZWVkZWRcbiAgICAgICAgZm9yIChjb25zdCBjbHMgb2Ygc291cmNlRmlsZS5nZXRDbGFzc2VzKCkpIHtcbiAgICAgICAgICAgIGlmIChleHRlbmRzTW9ub0JlaGF2aW91cihjbHMpIHx8IGV4dGVuZHNTY3JpcHRhYmxlT2JqZWN0KGNscykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0RlZmF1bHRFeHBvcnRlZCA9IGNscy5pc0RlZmF1bHRFeHBvcnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRGVmYXVsdEV4cG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNscy5zZXRJc0RlZmF1bHRFeHBvcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ3JvdXBUcmFuc2Zvcm1lcnNCeVBoYXNlKCk6IHsgW3BoYXNlOiBudW1iZXJdOiB7IHBoYXNlOiBudW1iZXIsIHRyYW5zZm9ybWVyOiBJVHJhbnNmb3JtZXIgfVtdIH0ge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1lcnMucmVkdWNlKChhY2MsIGN1cnIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHtwaGFzZX0gPSBjdXJyO1xuICAgICAgICAgICAgaWYgKCFhY2NbcGhhc2VdKSB7XG4gICAgICAgICAgICAgICAgYWNjW3BoYXNlXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjW3BoYXNlXS5wdXNoKGN1cnIpO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30gYXMgeyBbcGhhc2U6IG51bWJlcl06IHsgcGhhc2U6IG51bWJlciwgdHJhbnNmb3JtZXI6IElUcmFuc2Zvcm1lciB9W10gfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJ1blRyYW5zZm9ybWVycyhzb3VyY2VGaWxlOiBTb3VyY2VGaWxlKTogdm9pZCB7XG4gICAgICAgIC8vIEdyb3VwIHRyYW5zZm9ybWVycyBieSBwaGFzZVxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lcnNCeVBoYXNlID0gdGhpcy5ncm91cFRyYW5zZm9ybWVyc0J5UGhhc2UoKTtcblxuICAgICAgICAvLyBSdW4gdHJhbnNmb3JtZXJzIHBoYXNlIGJ5IHBoYXNlXG4gICAgICAgIGZvciAoY29uc3QgcGhhc2Ugb2YgT2JqZWN0LmtleXModHJhbnNmb3JtZXJzQnlQaGFzZSkuc29ydCgoYSwgYikgPT4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpKSkge1xuICAgICAgICAgICAgY29uc3QgcGhhc2VOdW1iZXIgPSBOdW1iZXIocGhhc2UpO1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZXJzID0gdHJhbnNmb3JtZXJzQnlQaGFzZVtwaGFzZU51bWJlcl07XG4gICAgICAgICAgICBsZXQgcmV0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgaGFzRm9yZ290dGVuTm9kZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHdoaWxlIChoYXNGb3Jnb3R0ZW5Ob2RlKSB7XG4gICAgICAgICAgICAgICAgaGFzRm9yZ290dGVuTm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHJ5Q291bnQrKztcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGxpc3QgdG8gdHJhY2sgbm9kZXMgdG8gcHJvY2Vzc1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVzVG9Qcm9jZXNzID0gc291cmNlRmlsZS5nZXREZXNjZW5kYW50cygpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc1RvUHJvY2Vzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IG5vZGVzVG9Qcm9jZXNzW2ldO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kaWZpZWROb2RlID0gbm9kZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzRm9yZ290dGVuTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lcnMuZm9yRWFjaCgoe3RyYW5zZm9ybWVyfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmaWVkTm9kZS53YXNGb3Jnb3R0ZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ZvcmdvdHRlbk5vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2RpZmllZE5vZGUud2FzRm9yZ290dGVuKCkgJiYgdHJhbnNmb3JtZXIubm9kZVR5cGVzLmluY2x1ZGVzKG1vZGlmaWVkTm9kZS5nZXRLaW5kKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWROb2RlID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtTm9kZShtb2RpZmllZE5vZGUsIHRoaXMudHJhbnNmb3JtYXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZpZWROb2RlICE9PSBub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ZvcmdvdHRlbk5vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIG5vZGUgaW4gdGhlIGxpc3QgaWYgaXQgd2FzIG1vZGlmaWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzVG9Qcm9jZXNzW2ldID0gbW9kaWZpZWROb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGhhc0ZvcmdvdHRlbk5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFBoYXNlICR7cGhhc2VOdW1iZXJ9OiBSZXRyeWluZyB0cmFuc2Zvcm1hdGlvbiBkdWUgdG8gZm9yZ290dGVuIG5vZGVzLiBBdHRlbXB0ICR7cmV0cnlDb3VudH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQ29tcGlsZU91dHB1dChvdXRwdXRzOiBNYXA8U291cmNlRmlsZSwgRmlsZUNvbXBpbGVPdXRwdXQ+LCBzOiBTb3VyY2VGaWxlKSB7XG4gICAgICAgIC8vR2V0IGdlbmllcyBjdXN0b20gZGlhZ25vc3RpY3MgXG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHRoaXMuZ2V0R2VuaWVzRGlhZ25vc3RpY3Mocyk7XG5cbiAgICAgICAgaWYoZXJyb3JzLmxlbmd0aCA9PT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgLy9SdW4gdHJhbnNmb3JtYXRpb25zXG4gICAgICAgICAgICB0aGlzLnJ1blRyYW5zZm9ybWVycyhzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vTWFyayBjbGFzcyB0eXBlXG4gICAgICAgIGNvbnN0IGRlZmF1bHRFeHBvcnRTeW1ib2wgPSBzLmdldERlZmF1bHRFeHBvcnRTeW1ib2woKVxuICAgICAgICBsZXQgZGVmYXVsdEV4cG9ydGVkQ2xhc3M6IENsYXNzRGVjbGFyYXRpb24gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChkZWZhdWx0RXhwb3J0U3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBkZWZhdWx0RXhwb3J0U3ltYm9sLmdldERlY2xhcmF0aW9ucygpO1xuICAgICAgICAgICAgZGVmYXVsdEV4cG9ydGVkQ2xhc3MgPSBkZWNsYXJhdGlvbnMuZmluZChkZWNsID0+IGRlY2wuZ2V0S2luZCgpID09PSB0cy5TeW50YXhLaW5kLkNsYXNzRGVjbGFyYXRpb24pIGFzIENsYXNzRGVjbGFyYXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXNNb25vYmVoYXZpb3VyID0gZmFsc2U7XG4gICAgICAgIGxldCBpc1NjcmlwdGFibGVPYmogPSBmYWxzZTtcbiAgICAgICAgbGV0IGRlZmF1bHRUeXBlTmFtZSA9IFwiXCI7XG4gICAgICAgIGlmIChkZWZhdWx0RXhwb3J0ZWRDbGFzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpc01vbm9iZWhhdmlvdXIgPSBleHRlbmRzTW9ub0JlaGF2aW91cihkZWZhdWx0RXhwb3J0ZWRDbGFzcyk7XG4gICAgICAgICAgICBpc1NjcmlwdGFibGVPYmogPSBleHRlbmRzU2NyaXB0YWJsZU9iamVjdChkZWZhdWx0RXhwb3J0ZWRDbGFzcyk7XG4gICAgICAgICAgICBkZWZhdWx0VHlwZU5hbWUgPSBnZXRGdWxsVHlwZU5hbWUoZGVmYXVsdEV4cG9ydGVkQ2xhc3MuZ2V0VHlwZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vQ29sbGVjdCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXM6IFByb3BlcnR5SW5mb1tdID0gW107XG4gICAgICAgIGxldCBpbmhlcml0YW5jZUNoYWluOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgc3VwcG9ydGVkVWlFdmVudHM6IEdlbmllc1NjcmlwdFVpRXZlbnRzID0gR2VuaWVzU2NyaXB0VWlFdmVudHMuTm9uZTtcblxuICAgICAgICBpZiAoaXNNb25vYmVoYXZpb3VyIHx8IGlzU2NyaXB0YWJsZU9iaiAmJiBkZWZhdWx0RXhwb3J0ZWRDbGFzcykge1xuICAgICAgICAgICAgbGV0IGJhc2VDbGFzcyA9IGRlZmF1bHRFeHBvcnRlZENsYXNzO1xuXG4gICAgICAgICAgICB3aGlsZSAoYmFzZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUNsYXNzTmFtZSA9IGJhc2VDbGFzcy5nZXROYW1lKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYmFzZUNsYXNzTmFtZSA9PSBNb25vYmVoYXZpb3VyVHlwZU5hbWUgfHwgYmFzZUNsYXNzTmFtZSA9PSBTY3JpcHRhYmxlT2JqZWN0VHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy51bnNoaWZ0KC4uLmV4dHJhY3RQcm9wZXJ0aWVzKGJhc2VDbGFzcykpO1xuICAgICAgICAgICAgICAgIGJhc2VDbGFzcyA9IGJhc2VDbGFzcy5nZXRCYXNlQ2xhc3MoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5oZXJpdGFuY2VDaGFpbiA9IHRyYXZlcnNlUHJvdG90eXBlQ2hhaW4oZGVmYXVsdEV4cG9ydGVkQ2xhc3MhKTtcblxuICAgICAgICAgICAgaWYgKGluaGVyaXRhbmNlQ2hhaW4/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbmhlcml0YW5jZUNoYWluLmZvckVhY2goZiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChVaUludGVyZmFjZVRvRW51bU1hcC5oYXMoZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFVpRXZlbnRzIHw9IFVpSW50ZXJmYWNlVG9FbnVtTWFwLmdldChmKSE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBvdXRwdXRzLnNldChzLCB7XG4gICAgICAgICAgICBGaWxlUGF0aDogcy5nZXRGaWxlUGF0aCgpLFxuICAgICAgICAgICAgSXNTdWNjZXNzZnVsOiBmYWxzZSxcbiAgICAgICAgICAgIEVycm9yczogZXJyb3JzLFxuICAgICAgICAgICAgSnNTb3VyY2U6IFwiXCIsICAvLyBDYXB0dXJlIHRoZSBlbWl0dGVkIEphdmFTY3JpcHRcbiAgICAgICAgICAgIElzTW9ub2JlaGF2aW91cjogaXNNb25vYmVoYXZpb3VyLFxuICAgICAgICAgICAgSXNTY3JpcHRhYmxlT2JqOiBpc1NjcmlwdGFibGVPYmosXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLFxuICAgICAgICAgICAgSWQ6IHMuZ2V0RmlsZVBhdGgoKSxcbiAgICAgICAgICAgIERlZmF1bHRUeXBlTmFtZTogZGVmYXVsdFR5cGVOYW1lLFxuICAgICAgICAgICAgSW5oZXJpdGFuY2VDaGFpbjogaW5oZXJpdGFuY2VDaGFpbixcbiAgICAgICAgICAgIFN1cHBvcnRlZFVpRXZlbnRzOiBzdXBwb3J0ZWRVaUV2ZW50c1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgZW1pdChvdXRwdXRzOiBNYXA8U291cmNlRmlsZSwgRmlsZUNvbXBpbGVPdXRwdXQ+LCBmaWxlOiBTb3VyY2VGaWxlKSB7XG4gICAgICAgIC8vU3RyaXAgZGVjb3JhdG9yc1xuICAgICAgICBjb25zdCBkZWNvcmF0b3JzVG9SZW1vdmUgPSBbXG4gICAgICAgICAgICBOb25TZXJpYWxpemVkRGVjb3JhdG9yLFxuICAgICAgICAgICAgSGlkZUluSW5zcGVjdG9yRGVjb3JhdG9yLFxuICAgICAgICAgICAgU2VyaWFsaXplRmllbGREZWNvcmF0b3IsXG4gICAgICAgICAgICBIZWFkZXJEZWNvcmF0b3IsXG4gICAgICAgICAgICBTcGFjZURlY29yYXRvcixcbiAgICAgICAgICAgIFRvb2x0aXBEZWNvcmF0b3JcbiAgICAgICAgXVxuXG4gICAgICAgIGZpbGUuZ2V0Q2xhc3NlcygpLmZvckVhY2goY2xzID0+IHtcbiAgICAgICAgICAgIHJlbW92ZURlY29yYXRvcnMoY2xzLmdldERlY29yYXRvcnMoKSwgZGVjb3JhdG9yID0+XG4gICAgICAgICAgICAgICAgZGVjb3JhdG9yc1RvUmVtb3ZlLmluY2x1ZGVzKGRlY29yYXRvci5nZXROYW1lKCkpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjbHMuZ2V0UHJvcGVydGllcygpLmZvckVhY2gocHJvcGVydHkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZURlY29yYXRvcnMocHJvcGVydHkuZ2V0RGVjb3JhdG9ycygpLCBkZWNvcmF0b3IgPT5cbiAgICAgICAgICAgICAgICAgICAgZGVjb3JhdG9yc1RvUmVtb3ZlLmluY2x1ZGVzKGRlY29yYXRvci5nZXROYW1lKCkpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL0VtaXQgYW5kIHJldHVybiBvdXRwdXRcbiAgICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy5nZXREaWFnbm9zdGljcyhmaWxlKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZmlsZS5nZXRFbWl0T3V0cHV0KCk7XG4gICAgICAgIGxldCBmaWxlT3V0cHV0ID0gb3V0cHV0LmdldE91dHB1dEZpbGVzKClbMF0uZ2V0VGV4dCgpO1xuXG5cbiAgICAgICAgaWYgKG91dHB1dHMuaGFzKGZpbGUpKSB7XG4gICAgICAgICAgICBsZXQgY29tcGlsZU91dHB1dCA9IG91dHB1dHMuZ2V0KGZpbGUpITtcbiAgICAgICAgICAgIGxldCBwcmV2aW91c0Vycm9ycyA9IGNvbXBpbGVPdXRwdXQuRXJyb3JzID8/IFtdO1xuICAgICAgICAgICAgbGV0IGFsbEVycm9ycyA9IHByZXZpb3VzRXJyb3JzLmNvbmNhdChlcnJvcnMpO1xuICAgICAgICAgICAgY29tcGlsZU91dHB1dC5Jc1N1Y2Nlc3NmdWwgPSBhbGxFcnJvcnMubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgY29tcGlsZU91dHB1dC5FcnJvcnMgPSBhbGxFcnJvcnM7XG4gICAgICAgICAgICBjb21waWxlT3V0cHV0LkpzU291cmNlID0gZmlsZU91dHB1dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dHMuc2V0KGZpbGUsIHtcbiAgICAgICAgICAgICAgICBGaWxlUGF0aDogZmlsZS5nZXRGaWxlUGF0aCgpLFxuICAgICAgICAgICAgICAgIElzU3VjY2Vzc2Z1bDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgICAgICBFcnJvcnM6IGVycm9ycyxcbiAgICAgICAgICAgICAgICBKc1NvdXJjZTogZmlsZU91dHB1dCwgIC8vIENhcHR1cmUgdGhlIGVtaXR0ZWQgSmF2YVNjcmlwdFxuICAgICAgICAgICAgICAgIElzTW9ub2JlaGF2aW91cjogZmFsc2UsXG4gICAgICAgICAgICAgICAgSXNTY3JpcHRhYmxlT2JqOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBQcm9wZXJ0aWVzOiBbXSxcbiAgICAgICAgICAgICAgICBJZDogZmlsZS5nZXRGaWxlUGF0aCgpLFxuICAgICAgICAgICAgICAgIERlZmF1bHRUeXBlTmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICBJbmhlcml0YW5jZUNoYWluOiBbXSxcbiAgICAgICAgICAgICAgICBTdXBwb3J0ZWRVaUV2ZW50czogR2VuaWVzU2NyaXB0VWlFdmVudHMuTm9uZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0R2VuaWVzRGlhZ25vc3RpY3Moc291cmNlRmlsZTogU291cmNlRmlsZSk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgZ2VuaWVzRGlhZ25vc3RpY3MgPSBnZXRHZW5pZXNTZW1hbnRpY0RpYWdub3N0aWNzKHNvdXJjZUZpbGUsIHRoaXMucHJvamVjdC5nZXRUeXBlQ2hlY2tlcigpKTtcblxuICAgICAgICByZXR1cm4gZ2VuaWVzRGlhZ25vc3RpY3MubWFwKGRpYWdub3N0aWMgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBkaWFnbm9zdGljLnN0YXJ0ID8/IDA7XG4gICAgICAgICAgICBjb25zdCB7bGluZSwgY29sdW1ufSA9IHNvdXJjZUZpbGUuZ2V0TGluZUFuZENvbHVtbkF0UG9zKHN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQoZGlhZ25vc3RpYy5tZXNzYWdlVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7c291cmNlRmlsZS5nZXRGaWxlUGF0aCgpfSAoJHtsaW5lfSwke2NvbHVtbn0pOiAke21lc3NhZ2V9YDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXREaWFnbm9zdGljcyhzb3VyY2VGaWxlOiBTb3VyY2VGaWxlKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBwcmVFbWl0RGlhZ25vc3RpY3MgPSBzb3VyY2VGaWxlLmdldFByZUVtaXREaWFnbm9zdGljcygpLm1hcChkaWFnID0+IGRpYWcuY29tcGlsZXJPYmplY3QpO1xuXG4gICAgICAgIHJldHVybiBwcmVFbWl0RGlhZ25vc3RpY3MubWFwKGRpYWdub3N0aWMgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBkaWFnbm9zdGljLnN0YXJ0ID8/IDA7XG4gICAgICAgICAgICBjb25zdCB7bGluZSwgY29sdW1ufSA9IHNvdXJjZUZpbGUuZ2V0TGluZUFuZENvbHVtbkF0UG9zKHN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQoZGlhZ25vc3RpYy5tZXNzYWdlVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7c291cmNlRmlsZS5nZXRGaWxlUGF0aCgpfSAoJHtsaW5lfSwke2NvbHVtbn0pOiAke21lc3NhZ2V9YDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0KG1lc3NhZ2VUZXh0OiBzdHJpbmcgfCB0cy5EaWFnbm9zdGljTWVzc2FnZUNoYWluKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlVGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cy5mbGF0dGVuRGlhZ25vc3RpY01lc3NhZ2VUZXh0KG1lc3NhZ2VUZXh0LCAnXFxuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbGxlY3RGaWxlcyhmaWxlOiBTb3VyY2VGaWxlLCBjb2xsZWN0ZWQ6IFNldDxTb3VyY2VGaWxlPiwgcHJvY2Vzc2VkOiBTZXQ8c3RyaW5nPiwgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+Pikge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUuZ2V0RmlsZVBhdGgoKTtcbiAgICAgICAgaWYgKHByb2Nlc3NlZC5oYXMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwcm9jZXNzZWQuYWRkKGZpbGVQYXRoKTtcbiAgICAgICAgY29sbGVjdGVkLmFkZChmaWxlKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGRlcGVuZGVuY2llcyBmb3IgdGhpcyBmaWxlXG4gICAgICAgIGlmICghZGVwZW5kZW5jeUdyYXBoLmhhcyhmaWxlKSkge1xuICAgICAgICAgICAgZGVwZW5kZW5jeUdyYXBoLnNldChmaWxlLCBuZXcgU2V0PFNvdXJjZUZpbGU+KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyByZWZlcmVuY2VkIGZpbGVzIHJlY3Vyc2l2ZWx5XG4gICAgICAgIGZpbGUuZ2V0UmVmZXJlbmNpbmdTb3VyY2VGaWxlcygpLmZvckVhY2gocmVmRmlsZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3RGaWxlcyhyZWZGaWxlLCBjb2xsZWN0ZWQsIHByb2Nlc3NlZCwgZGVwZW5kZW5jeUdyYXBoKTtcblxuICAgICAgICAgICAgLy8gQWRkIGRlcGVuZGVuY3lcbiAgICAgICAgICAgIGlmICghZGVwZW5kZW5jeUdyYXBoLmhhcyhyZWZGaWxlKSkge1xuICAgICAgICAgICAgICAgIGRlcGVuZGVuY3lHcmFwaC5zZXQocmVmRmlsZSwgbmV3IFNldDxTb3VyY2VGaWxlPigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcGVuZGVuY3lHcmFwaC5nZXQocmVmRmlsZSkhLmFkZChmaWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b3BvbG9naWNhbFNvcnQoZmlsZXM6IFNvdXJjZUZpbGVbXSwgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+Pik6IFNvdXJjZUZpbGVbXSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3BvbG9naWNhbFNvcnRXaXRoVGFyamFuKGZpbGVzLCBkZXBlbmRlbmN5R3JhcGgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVG9wb2xvZ2ljYWwgU29ydCBGYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICByZXR1cm4gW107IC8vIEhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHRvcG9sb2dpY2FsU29ydFdpdGhDeWNsZXMoZmlsZXM6IFNvdXJjZUZpbGVbXSwgZGVwZW5kZW5jeUdyYXBoOiBNYXA8U291cmNlRmlsZSwgU2V0PFNvdXJjZUZpbGU+Pik6IFNvdXJjZUZpbGVbXVtdIHtcbiAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBuZXcgTWFwPFNvdXJjZUZpbGUsIG51bWJlcj4oKTtcbiAgICAgICAgY29uc3QgbG93TGlua01hcCA9IG5ldyBNYXA8U291cmNlRmlsZSwgbnVtYmVyPigpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHt2YWx1ZTogMH07XG4gICAgICAgIGNvbnN0IHN0YWNrOiBTb3VyY2VGaWxlW10gPSBbXTtcbiAgICAgICAgY29uc3Qgb25TdGFjayA9IG5ldyBTZXQ8U291cmNlRmlsZT4oKTtcbiAgICAgICAgY29uc3Qgc2NjTGlzdDogU291cmNlRmlsZVtdW10gPSBbXTtcblxuICAgICAgICBjb25zdCBzdHJvbmdDb25uZWN0ID0gKGZpbGU6IFNvdXJjZUZpbGUpID0+IHtcbiAgICAgICAgICAgIGluZGV4TWFwLnNldChmaWxlLCBpbmRleC52YWx1ZSk7XG4gICAgICAgICAgICBsb3dMaW5rTWFwLnNldChmaWxlLCBpbmRleC52YWx1ZSk7XG4gICAgICAgICAgICBpbmRleC52YWx1ZSsrO1xuICAgICAgICAgICAgc3RhY2sucHVzaChmaWxlKTtcbiAgICAgICAgICAgIG9uU3RhY2suYWRkKGZpbGUpO1xuXG4gICAgICAgICAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmN5R3JhcGguZ2V0KGZpbGUpIHx8IG5ldyBTZXQ8U291cmNlRmlsZT4oKTtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcy5mb3JFYWNoKGRlcCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbmRleE1hcC5oYXMoZGVwKSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJvbmdDb25uZWN0KGRlcCk7XG4gICAgICAgICAgICAgICAgICAgIGxvd0xpbmtNYXAuc2V0KGZpbGUsIE1hdGgubWluKGxvd0xpbmtNYXAuZ2V0KGZpbGUpISwgbG93TGlua01hcC5nZXQoZGVwKSEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9uU3RhY2suaGFzKGRlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG93TGlua01hcC5zZXQoZmlsZSwgTWF0aC5taW4obG93TGlua01hcC5nZXQoZmlsZSkhLCBpbmRleE1hcC5nZXQoZGVwKSEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGxvd0xpbmtNYXAuZ2V0KGZpbGUpID09PSBpbmRleE1hcC5nZXQoZmlsZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2M6IFNvdXJjZUZpbGVbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCB3OiBTb3VyY2VGaWxlIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgdyA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodyA9PT0gdW5kZWZpbmVkKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgb25TdGFjay5kZWxldGUodyk7XG4gICAgICAgICAgICAgICAgICAgIHNjYy5wdXNoKHcpO1xuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHcgIT09IGZpbGUpO1xuICAgICAgICAgICAgICAgIHNjY0xpc3QucHVzaChzY2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWluZGV4TWFwLmhhcyhmaWxlKSkge1xuICAgICAgICAgICAgICAgIHN0cm9uZ0Nvbm5lY3QoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzY2NMaXN0O1xuICAgIH1cblxuICAgIHByaXZhdGUgdG9wb2xvZ2ljYWxTb3J0V2l0aFRhcmphbihmaWxlczogU291cmNlRmlsZVtdLCBkZXBlbmRlbmN5R3JhcGg6IE1hcDxTb3VyY2VGaWxlLCBTZXQ8U291cmNlRmlsZT4+KTogU291cmNlRmlsZVtdIHtcbiAgICAgICAgY29uc3Qgc2NjTGlzdCA9IHRoaXMudG9wb2xvZ2ljYWxTb3J0V2l0aEN5Y2xlcyhmaWxlcywgZGVwZW5kZW5jeUdyYXBoKTtcbiAgICAgICAgY29uc3Qgc29ydGVkOiBTb3VyY2VGaWxlW10gPSBbXTtcblxuICAgICAgICAvLyBQcm9jZXNzIFNDQ3MgaW4gcmV2ZXJzZSBvcmRlclxuICAgICAgICBmb3IgKGxldCBpID0gc2NjTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgc29ydGVkLnB1c2goLi4uc2NjTGlzdFtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29ydGVkO1xuICAgIH1cblxufVxuXG5cbiIsImltcG9ydCBHZW5pZXNUcmFuc3BpbGVyIGZyb20gJy4vY29tcGlsZXIvQ29tcGlsZXInO1xuaW1wb3J0ICogYXMgdHMgZnJvbSAndHlwZXNjcmlwdCc7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgY29uc3QgYXJncyA9IHByb2Nlc3MuYXJndi5zbGljZSgyKTtcbiAgICBsZXQgdHNDb25maWdQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGNvbXBpbGVGaWxlczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgcHJvamVjdEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50RmxhZzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyBDb2xsZWN0IGNvbXBpbGUgYW5kIHByb2plY3QgZmlsZXMsIHRyZWF0aW5nIGFsbCBmb2xsb3dpbmcgc3RyaW5ncyBhZnRlciBlYWNoIGZsYWcgYXMgcGFydCBvZiB0aGUgbGlzdFxuICAgIGZvciAoY29uc3QgYXJnIG9mIGFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZyA9PT0gJy0tdHNjb25maWcnIHx8IGFyZyA9PT0gJy10Jykge1xuICAgICAgICAgICAgY3VycmVudEZsYWcgPSAndHNjb25maWcnO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZyA9PT0gJy1jJyB8fCBhcmcgPT09ICctLWNvbXBpbGUnKSB7XG4gICAgICAgICAgICBjdXJyZW50RmxhZyA9ICdjb21waWxlJztcbiAgICAgICAgfSBlbHNlIGlmIChhcmcgPT09ICctcCcgfHwgYXJnID09PSAnLS1wcm9qZWN0Jykge1xuICAgICAgICAgICAgY3VycmVudEZsYWcgPSAncHJvamVjdCc7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZsYWcgPT09ICd0c2NvbmZpZycpIHtcbiAgICAgICAgICAgIHRzQ29uZmlnUGF0aCA9IGFyZztcbiAgICAgICAgICAgIGN1cnJlbnRGbGFnID0gbnVsbDsgLy8gcmVzZXQgZmxhZyBhZnRlciBjYXB0dXJpbmcgdGhlIHZhbHVlXG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZsYWcgPT09ICdjb21waWxlJykge1xuICAgICAgICAgICAgY29tcGlsZUZpbGVzLnB1c2goYXJnKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmxhZyA9PT0gJ3Byb2plY3QnKSB7XG4gICAgICAgICAgICBwcm9qZWN0RmlsZXMucHVzaChhcmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0c0NvbmZpZ1BhdGggfHwgY29tcGlsZUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdVc2FnZTogbm9kZSBpbmRleC5qcyAtLXRzY29uZmlnIDx0c2NvbmZpZ1BhdGg+IC1jIDxmaWxlMT4gWzxmaWxlMj4gWy4uLl1dIC1wIDxhZGRpdGlvbmFsRmlsZTE+IFs8YWRkaXRpb25hbEZpbGUyPiBbLi4uXV0nKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbXBpbGVyID0gbmV3IEdlbmllc1RyYW5zcGlsZXIodHNDb25maWdQYXRoKTtcblxuICAgICAgICAvLyBBd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSBjb21waWxlIGZ1bmN0aW9uXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXBpbGVyLmNvbXBpbGUoY29tcGlsZUZpbGVzLCBwcm9qZWN0RmlsZXMpO1xuICAgICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShyZXN1bHQudG9TdHJpbmcoKSk7IC8vIFdyaXRlIHRoZSByZXN1bHQgdG8gc3Rkb3V0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29tcGlsYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn1cblxuLy8gUnVuIHRoZSBtYWluIGZ1bmN0aW9uXG5tYWluKCk7XG4iLCIvLyBCcmFja2V0QWNjZXNzVHJhbnNmb3JtZXIudHNcbmltcG9ydCB7XG4gICAgRWxlbWVudEFjY2Vzc0V4cHJlc3Npb24sXG4gICAgU3ludGF4S2luZCxcbiAgICBOb2RlLFxuICAgIE1ldGhvZERlY2xhcmF0aW9uLFxuICAgIE1ldGhvZFNpZ25hdHVyZSxcbiAgICBDbGFzc0RlY2xhcmF0aW9uLFxuICAgIEludGVyZmFjZURlY2xhcmF0aW9uLFxuICAgIFN5bWJvbCxcbiAgICBUeXBlLFxuICAgIEJpbmFyeUV4cHJlc3Npb24sXG59IGZyb20gXCJ0cy1tb3JwaFwiO1xuaW1wb3J0IHsgSVRyYW5zZm9ybWVyIH0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5pbXBvcnQgeyBUcmFuc2Zvcm1hdGlvbkNvbnRleHQgfSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7R0VUX0lURU1fTkFNRSwgZ2V0SXNVbml0eUFQSVR5cGUsIFNFVF9JVEVNX05BTUV9IGZyb20gXCIuLi9Db21waWxlclV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBCcmFja2V0QWNjZXNzVHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIC8vIFNwZWNpZnkgdGhlIG5vZGUgdHlwZXMgdGhpcyB0cmFuc2Zvcm1lciB3aWxsIGhhbmRsZVxuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLkVsZW1lbnRBY2Nlc3NFeHByZXNzaW9uXTtcblxuICAgIFxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgaWYgKCFOb2RlLmlzRWxlbWVudEFjY2Vzc0V4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZWxlbWVudEFjY2VzcyA9IG5vZGUgYXMgRWxlbWVudEFjY2Vzc0V4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBlbGVtZW50QWNjZXNzLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgY29uc3QgYXJndW1lbnRFeHByZXNzaW9uID0gZWxlbWVudEFjY2Vzcy5nZXRBcmd1bWVudEV4cHJlc3Npb24oKTtcblxuICAgICAgICBpZiAoIWFyZ3VtZW50RXhwcmVzc2lvbikge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBhcmd1bWVudCAoZS5nLiwgb2JqW10pLCBza2lwIHRyYW5zZm9ybWF0aW9uXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSBleHByZXNzaW9uLmdldFR5cGUoKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdHlwZSBpcyBhIFVuaXR5IEFQSSB0eXBlXG4gICAgICAgIGlmICghZ2V0SXNVbml0eUFQSVR5cGUodHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIHN5bWJvbCBvZiB0aGUgdHlwZVxuICAgICAgICBjb25zdCB0eXBlU3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICAgICAgaWYgKCF0eXBlU3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBhbGwgZGVjbGFyYXRpb25zIChjbGFzc2VzIGFuZCBpbnRlcmZhY2VzKSBhc3NvY2lhdGVkIHdpdGggdGhlIHR5cGVcbiAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gdHlwZVN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKS5maWx0ZXIoXG4gICAgICAgICAgICBkZWNsID0+IE5vZGUuaXNDbGFzc0RlY2xhcmF0aW9uKGRlY2wpIHx8IE5vZGUuaXNJbnRlcmZhY2VEZWNsYXJhdGlvbihkZWNsKVxuICAgICAgICApIGFzIChDbGFzc0RlY2xhcmF0aW9uIHwgSW50ZXJmYWNlRGVjbGFyYXRpb24pW107XG5cbiAgICAgICAgaWYgKGRlY2xhcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29sbGVjdCBhbGwgdW5pcXVlIGdldF9pdGVtIGFuZCBzZXRfaXRlbSBtZXRob2RzIGFjcm9zcyBhbGwgZGVjbGFyYXRpb25zXG4gICAgICAgIGNvbnN0IGdldEl0ZW1NZXRob2RzOiAoTWV0aG9kRGVjbGFyYXRpb24gfCBNZXRob2RTaWduYXR1cmUpW10gPSBbXTtcbiAgICAgICAgY29uc3Qgc2V0SXRlbU1ldGhvZHM6IChNZXRob2REZWNsYXJhdGlvbiB8IE1ldGhvZFNpZ25hdHVyZSlbXSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IG1ldGhvZFNpZ25hdHVyZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgICAgICBkZWNsYXJhdGlvbnMuZm9yRWFjaChkZWNsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNsYXNzT3JJbnRlcmZhY2UgPSBkZWNsIGFzIENsYXNzRGVjbGFyYXRpb24gfCBJbnRlcmZhY2VEZWNsYXJhdGlvbjtcblxuICAgICAgICAgICAgLy8gZ2V0TWV0aG9kcyByZXR1cm5zIGFuIGFycmF5IG9mIE1ldGhvZERlY2xhcmF0aW9uIG9yIE1ldGhvZFNpZ25hdHVyZVxuICAgICAgICAgICAgY29uc3QgbWV0aG9kcyA9IGNsYXNzT3JJbnRlcmZhY2UuZ2V0TWV0aG9kcygpO1xuXG4gICAgICAgICAgICBtZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gbWV0aG9kLmdldE5hbWUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kTmFtZSA9PT0gR0VUX0lURU1fTkFNRSB8fCBtZXRob2ROYW1lID09PSBTRVRfSVRFTV9OQU1FKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIHNpZ25hdHVyZSBzdHJpbmcgZm9yIHRoZSBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gbWV0aG9kLmdldFNpZ25hdHVyZSgpLmdldERlY2xhcmF0aW9uKCk/LmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZ25hdHVyZSAmJiAhbWV0aG9kU2lnbmF0dXJlcy5oYXMoc2lnbmF0dXJlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09IEdFVF9JVEVNX05BTUUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRJdGVtTWV0aG9kcy5wdXNoKG1ldGhvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW1NZXRob2RzLnB1c2gobWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZFNpZ25hdHVyZXMuYWRkKHNpZ25hdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGdldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCAmJiBzZXRJdGVtTWV0aG9kcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIE5laXRoZXIgZ2V0dGVyIG5vciBzZXR0ZXIgZXhpc3RzOyBubyB0cmFuc2Zvcm1hdGlvbiBuZWVkZWRcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyZW50ID0gZWxlbWVudEFjY2Vzcy5nZXRQYXJlbnQoKTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdGhpcyBpcyBhIGdldHRlciBvciBzZXR0ZXJcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24ocGFyZW50KSAmJlxuICAgICAgICAgICAgcGFyZW50LmdldE9wZXJhdG9yVG9rZW4oKS5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuRXF1YWxzVG9rZW4gJiZcbiAgICAgICAgICAgIHBhcmVudC5nZXRMZWZ0KCkgPT09IGVsZW1lbnRBY2Nlc3NcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgc2V0dGVyOiBvYmpbaW5kZXhdID0gdmFsdWVcbiAgICAgICAgICAgIGlmIChzZXRJdGVtTWV0aG9kcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdmFsdWVFeHByZXNzaW9uID0gcGFyZW50LmdldFJpZ2h0KCk7XG5cbiAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCBhIG1hdGNoaW5nIHNldF9pdGVtIG1ldGhvZFxuICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdTZXRJdGVtID0gc2V0SXRlbU1ldGhvZHMuZmluZChtZXRob2QgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG1ldGhvZC5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4UGFyYW1UeXBlID0gcGFyYW1zWzBdLmdldFR5cGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVBhcmFtVHlwZSA9IHBhcmFtc1sxXS5nZXRUeXBlKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleEFyZ1R5cGUgPSBhcmd1bWVudEV4cHJlc3Npb24uZ2V0VHlwZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlQXJnVHlwZSA9IHZhbHVlRXhwcmVzc2lvbi5nZXRUeXBlKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcjtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyhpbmRleEFyZ1R5cGUsIGluZGV4UGFyYW1UeXBlKSAmJlxuICAgICAgICAgICAgICAgICAgICB0eXBlQ2hlY2tlci5pc1R5cGVBc3NpZ25hYmxlVG8odmFsdWVBcmdUeXBlLCB2YWx1ZVBhcmFtVHlwZSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghbWF0Y2hpbmdTZXRJdGVtKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gc3VpdGFibGUgc2V0X2l0ZW0gb3ZlcmxvYWQgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBuZXcgZXhwcmVzc2lvbjogb2JqLnNldF9pdGVtKGluZGV4LCB2YWx1ZSlcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb25UZXh0ID0gZXhwcmVzc2lvbi5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBpbmRleFRleHQgPSBhcmd1bWVudEV4cHJlc3Npb24uZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWVUZXh0ID0gdmFsdWVFeHByZXNzaW9uLmdldFRleHQoKTtcblxuICAgICAgICAgICAgY29uc3Qgc2V0SXRlbUNhbGwgPSBgJHtleHByZXNzaW9uVGV4dH0uJHtTRVRfSVRFTV9OQU1FfSgke2luZGV4VGV4dH0sICR7dmFsdWVUZXh0fSlgO1xuXG4gICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBlbnRpcmUgYmluYXJ5IGV4cHJlc3Npb25cbiAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlV2l0aFRleHQoc2V0SXRlbUNhbGwpO1xuXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGdldHRlcjogb2JqW2luZGV4XVxuICAgICAgICAgICAgaWYgKGdldEl0ZW1NZXRob2RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGZpbmQgYSBtYXRjaGluZyBnZXRfaXRlbSBtZXRob2RcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nR2V0SXRlbSA9IGdldEl0ZW1NZXRob2RzLmZpbmQobWV0aG9kID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBtZXRob2QuZ2V0UGFyYW1ldGVycygpO1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleFBhcmFtVHlwZSA9IHBhcmFtc1swXS5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhBcmdUeXBlID0gYXJndW1lbnRFeHByZXNzaW9uLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVDaGVja2VyID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVDaGVja2VyLmlzVHlwZUFzc2lnbmFibGVUbyhpbmRleEFyZ1R5cGUsIGluZGV4UGFyYW1UeXBlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIW1hdGNoaW5nR2V0SXRlbSkge1xuICAgICAgICAgICAgICAgIC8vIE5vIHN1aXRhYmxlIGdldF9pdGVtIG92ZXJsb2FkIGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgbmV3IGV4cHJlc3Npb246IG9iai5nZXRfaXRlbShpbmRleClcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb25UZXh0ID0gZXhwcmVzc2lvbi5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBpbmRleFRleHQgPSBhcmd1bWVudEV4cHJlc3Npb24uZ2V0VGV4dCgpO1xuXG4gICAgICAgICAgICBjb25zdCBnZXRJdGVtQ2FsbCA9IGAke2V4cHJlc3Npb25UZXh0fS4ke0dFVF9JVEVNX05BTUV9KCR7aW5kZXhUZXh0fSlgO1xuXG4gICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBlbGVtZW50IGFjY2VzcyBleHByZXNzaW9uXG4gICAgICAgICAgICBlbGVtZW50QWNjZXNzLnJlcGxhY2VXaXRoVGV4dChnZXRJdGVtQ2FsbCk7XG5cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50QWNjZXNzO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU3ludGF4S2luZCwgTm9kZSwgQ2FsbEV4cHJlc3Npb24sIFR5cGVDaGVja2VyLCBUeXBlIH0gZnJvbSAndHMtbW9ycGgnO1xuaW1wb3J0IHtcbiAgICBjb21wb25lbnRNZXRob2RzLFxuICAgIGNvbnZlcnRUb0Fzc2V0c1JlbGF0aXZlUGF0aCxcbiAgICBHZW5pZXNTY3JpcHRUeXBlLFxuICAgIGdldEZ1bGxUeXBlTmFtZSxcbiAgICBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUsXG4gICAgZ2V0SXNVbml0eUFQSVR5cGUsIGlzT3JJbmhlcml0c0Zyb21HYW1lT2JqZWN0T3JDb21wb25lbnRcbn0gZnJvbSAnLi4vQ29tcGlsZXJVdGlscyc7XG5pbXBvcnQgeyBUcmFuc2Zvcm1hdGlvbkNvbnRleHQgfSBmcm9tICcuL1RyYW5zZm9ybWF0aW9uQ29udGV4dCc7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tICcuL0lUcmFuc2Zvcm1lcic7XG5cblxuZXhwb3J0IGNsYXNzIENvbXBvbmVudENhbGxUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBsZXQgbmV3Tm9kZSA9IG5vZGU7XG5cbiAgICAgICAgaWYgKE5vZGUuaXNDYWxsRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbEV4cHJlc3Npb24gPSBub2RlIGFzIENhbGxFeHByZXNzaW9uO1xuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBjYWxsRXhwcmVzc2lvbi5nZXRUeXBlQXJndW1lbnRzKCk7XG4gICAgICAgICAgICBjb25zdCBtZXRob2RBcmd1bWVudHMgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCB8fCB0aGlzLmlzVHlwZW9mQXJndW1lbnQobWV0aG9kQXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWVOb2RlID0gZXhwcmVzc2lvbi5nZXRMYXN0Q2hpbGRCeUtpbmQoU3ludGF4S2luZC5JZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZE5hbWVOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lTm9kZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudE1ldGhvZHMuaGFzKG1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSBleHByZXNzaW9uLmdldEZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihmaXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzT3JJbmhlcml0c0Zyb21HYW1lT2JqZWN0T3JDb21wb25lbnQoY2xhc3NUeXBlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5UeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGNhbGxFeHByZXNzaW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudCA9IHR5cGVBcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0eXBlQXJndW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSB0aGlzLnByb2Nlc3NUeXBlQXJndW1lbnQoY2FsbEV4cHJlc3Npb24sIHR5cGVBcmd1bWVudFR5cGUsIGZhbHNlLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1R5cGVvZkFyZ3VtZW50KG1ldGhvZEFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnQgPSB0aGlzLmdldFR5cGVGcm9tVHlwZW9mQXJndW1lbnQobWV0aG9kQXJndW1lbnRzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZUFyZ3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudFR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24odHlwZUFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZSA9IHRoaXMucHJvY2Vzc1R5cGVBcmd1bWVudChjYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3VtZW50VHlwZSwgdHJ1ZSwgcmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1R5cGVvZkFyZ3VtZW50KGFyZ3M6IE5vZGVbXSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gYXJncy5sZW5ndGggPiAwICYmIGFyZ3NbMF0uZ2V0VGV4dCgpLnN0YXJ0c1dpdGgoJyR0eXBlb2YoJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlRnJvbVR5cGVvZkFyZ3VtZW50KGFyZzogTm9kZSk6IE5vZGUgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IGFyZy5nZXRGaXJzdENoaWxkQnlLaW5kKFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBpZiAoY2FsbEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudCA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpWzBdO1xuICAgICAgICAgICAgaWYgKE5vZGUuaXNUeXBlTm9kZSh0eXBlQXJndW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVBcmd1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R5cGVBcmd1bWVudChjYWxsRXhwcmVzc2lvbjogQ2FsbEV4cHJlc3Npb24sIHR5cGVBcmd1bWVudFR5cGU6IFR5cGUsIGlzVHlwZU9mQXJnOiBib29sZWFuLCByZXR1cm5UeXBlOiBUeXBlKTogTm9kZSB7XG4gICAgICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZSh0eXBlQXJndW1lbnRUeXBlKSkge1xuXG4gICAgICAgICAgICBpZiAoaXNUeXBlT2ZBcmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gdHlwZUFyZ3VtZW50VHlwZS5pc0ludGVyZmFjZSgpID8gYCR0eXBlb2YoXCIke2dldEZ1bGxUeXBlTmFtZSh0eXBlQXJndW1lbnRUeXBlKX1cIilgIDogYCR0eXBlb2YoJHt0aGlzLmdldFR5cGVOYW1lKHR5cGVBcmd1bWVudFR5cGUpfSlgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVPdmVybG9hZGVkQ2FsbEV4cHJlc3Npb24oY2FsbEV4cHJlc3Npb24sIGAke3R5cGVOYW1lfWAsIHJldHVyblR5cGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZih0eXBlQXJndW1lbnRUeXBlLmlzSW50ZXJmYWNlKCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBnZXRGdWxsVHlwZU5hbWUodHlwZUFyZ3VtZW50VHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uKGNhbGxFeHByZXNzaW9uLCBgXCIke3R5cGVOYW1lfVwiYCwgcmV0dXJuVHlwZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdFR5cGUgPSBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUodHlwZUFyZ3VtZW50VHlwZSk7XG4gICAgICAgICAgICBpZiAoc2NyaXB0VHlwZSA9PT0gR2VuaWVzU2NyaXB0VHlwZS5Nb25vYmVoYXZpb3VyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBnZXRGdWxsVHlwZU5hbWUodHlwZUFyZ3VtZW50VHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uKGNhbGxFeHByZXNzaW9uLCBgXCIke3R5cGVOYW1lfVwiYCwgcmV0dXJuVHlwZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlTmFtZSh0eXBlOiBUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICAgICAgaWYgKHN5bWJvbCkge1xuICAgICAgICAgICAgcmV0dXJuIHN5bWJvbC5nZXROYW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGUuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uKGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3VtZW50VGV4dDogc3RyaW5nLCByZXR1cm5UeXBlOiBUeXBlLCBhZGRUc0lnbm9yZTogYm9vbGVhbiA9IGZhbHNlKTogQ2FsbEV4cHJlc3Npb24ge1xuICAgICAgICBjb25zdCBjYXN0VHlwZSA9IHJldHVyblR5cGUuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGNhbGxFeHByZXNzaW9uLmdldFR5cGVBcmd1bWVudHMoKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjYWxsRXhwcmVzc2lvbi5yZW1vdmVUeXBlQXJndW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbGxFeHByZXNzaW9uLmluc2VydEFyZ3VtZW50KDAsIHR5cGVBcmd1bWVudFRleHQpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgdGV4dCBvZiB0aGUgY2FsbCBleHByZXNzaW9uXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uVGV4dCA9IGNhbGxFeHByZXNzaW9uLmdldFRleHQoKTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIG5ldyB0ZXh0IHdpdGggdGhlIGNhc3RcbiAgICAgICAgY29uc3QgbmV3Q2FsbEV4cHJlc3Npb25UZXh0ID0gYCgke2NhbGxFeHByZXNzaW9uVGV4dH0gYXMgJHtjYXN0VHlwZX0pYDtcblxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBjYWxsIGV4cHJlc3Npb24gd2l0aCB0aGUgbmV3IHRleHRcbiAgICAgICAgY29uc3QgbmV3RXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLnJlcGxhY2VXaXRoVGV4dChuZXdDYWxsRXhwcmVzc2lvblRleHQpIGFzIENhbGxFeHByZXNzaW9uO1xuXG4gICAgICAgIGlmIChhZGRUc0lnbm9yZSkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSBzb3VyY2UgZmlsZSB0aGF0IGNvbnRhaW5zIHRoZSBjYWxsIGV4cHJlc3Npb25cbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBuZXdFeHByZXNzaW9uLmdldFNvdXJjZUZpbGUoKTtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgY2FsbCBleHByZXNzaW9uXG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ld0V4cHJlc3Npb24uZ2V0U3RhcnQoKTtcblxuICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSB0cy1pZ25vcmUgY29tbWVudCBiZWZvcmUgdGhlIGNhbGwgZXhwcmVzc2lvblxuICAgICAgICAgICAgc291cmNlRmlsZS5pbnNlcnRUZXh0KHN0YXJ0LCBcIi8vIEB0cy1pZ25vcmVcXG5cIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3RXhwcmVzc2lvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIE5vZGUsXG4gICAgU3ludGF4S2luZCxcbiAgICBBcnJvd0Z1bmN0aW9uLFxuICAgIFR5cGVcbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge0lUcmFuc2Zvcm1lcn0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQge2lzR2VuaWVzRXZlbnRUeXBlLCBpc1NpZ25hbEJ1c1R5cGV9IGZyb20gXCIuLi9Db21waWxlclV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZVRvQXJyb3dGdW5jdGlvblRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmICghTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZS5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcjtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxsIGlzIGEgcHJvcGVydHkgYWNjZXNzIChlLmcuLCBTaWduYWxCdXMuc3Vic2NyaWJlKVxuICAgICAgICBpZiAoTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihleHByZXNzaW9uKSkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0RXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0VHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKG9iamVjdEV4cHJlc3Npb24pO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBpdCBpcyBhIFNpZ25hbEJ1cyBvciBHZW5pZXNFdmVudCBtZXRob2RzIHRoZW4gd2UgaWdub3JlIHNpbmNlIHdlIGFyZVxuICAgICAgICAgICAgLy8gdHJhbnNmb3JtaW5nIHRoZW0gc29tZXdoZXJlIGVsc2VcbiAgICAgICAgICAgIGlmIChpc1NpZ25hbEJ1c1R5cGUob2JqZWN0VHlwZSkgfHwgaXNHZW5pZXNFdmVudFR5cGUob2JqZWN0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHR5cGVDaGVja2VyLmdldFJlc29sdmVkU2lnbmF0dXJlKGNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgaWYgKCFzaWduYXR1cmUpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IHNpZ25hdHVyZS5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcblxuICAgICAgICBhcmdzLm1hcCgoYXJnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyID0gcGFyYW1ldGVyc1tpbmRleF07XG4gICAgICAgICAgICBpZiAocGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1UeXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZU9mU3ltYm9sQXRMb2NhdGlvbihwYXJhbWV0ZXIsIGNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RlbGVnYXRlVHlwZShwYXJhbVR5cGUpICYmICFOb2RlLmlzQXJyb3dGdW5jdGlvbihhcmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBJbkFycm93RnVuY3Rpb24oYXJnLCBwYXJhbVR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcmc7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNEZWxlZ2F0ZVR5cGUodHlwZTogVHlwZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBjYWxsU2lnbmF0dXJlcyA9IHR5cGUuZ2V0Q2FsbFNpZ25hdHVyZXMoKTtcbiAgICAgICAgcmV0dXJuIGNhbGxTaWduYXR1cmVzLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB3cmFwSW5BcnJvd0Z1bmN0aW9uKG5vZGU6IE5vZGUsIHBhcmFtVHlwZTogVHlwZSk6IEFycm93RnVuY3Rpb24ge1xuICAgICAgICBjb25zdCBjYWxsU2lnbmF0dXJlcyA9IHBhcmFtVHlwZS5nZXRDYWxsU2lnbmF0dXJlcygpO1xuICAgICAgICBpZiAoY2FsbFNpZ25hdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCBkZWxlZ2F0ZSB0eXBlIHRvIGhhdmUgY2FsbCBzaWduYXR1cmVzLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBjYWxsU2lnbmF0dXJlc1swXS5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGNvbnN0IHBhcmFtTmFtZXMgPSBwYXJhbWV0ZXJzLm1hcChwYXJhbSA9PiBwYXJhbS5nZXROYW1lKCkpO1xuICAgICAgICBjb25zdCBwYXJhbVRleHQgPSBwYXJhbU5hbWVzLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgY29uc3QgYXJyb3dGdW5jdGlvblRleHQgPSBgKCR7cGFyYW1UZXh0fSkgPT4gJHtub2RlLmdldFRleHQoKX0oJHtwYXJhbVRleHR9KWA7XG5cbiAgICAgICAgY29uc29sZS5sb2coYFdyYXBwaW5nIGluIGFycm93IGZ1bmN0aW9uOiAke2Fycm93RnVuY3Rpb25UZXh0fWApO1xuXG4gICAgICAgIC8vIFVzaW5nIG5vZGUucmVwbGFjZVdpdGhUZXh0IGZvciBzaW1wbGljaXR5LCBhcyB0cy1tb3JwaCBkb2Vzbid0IHByb3ZpZGUgZGlyZWN0IGNvbnZlcnNpb25cbiAgICAgICAgcmV0dXJuIG5vZGUucmVwbGFjZVdpdGhUZXh0KGFycm93RnVuY3Rpb25UZXh0KSBhcyBBcnJvd0Z1bmN0aW9uO1xuICAgIH1cbn0iLCJpbXBvcnQge05vZGUsIFN5bnRheEtpbmQsIFR5cGVDaGVja2VyLCB0cywgVHlwZX0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7aXNHZW5pZXNFdmVudFR5cGUsIGlzU2lnbmFsQnVzVHlwZX0gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEV2ZW50Q29udGV4dFRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmICghTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZS5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcjtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FsbCBpcyBhIHByb3BlcnR5IGFjY2VzcyAoZS5nLiwgU2lnbmFsQnVzLnN1YnNjcmliZSlcbiAgICAgICAgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBleHByZXNzaW9uLmdldE5hbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdEV4cHJlc3Npb24gPSBleHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdFR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihvYmplY3RFeHByZXNzaW9uKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgYSBTaWduYWxCdXMgb3IgR2VuaWVzRXZlbnQgbWV0aG9kIHdlIHdhbnQgdG8gdHJhbnNmb3JtXG4gICAgICAgICAgICBjb25zdCBpc1NpZ25hbEJ1c01ldGhvZCA9IGlzU2lnbmFsQnVzVHlwZShvYmplY3RUeXBlKSAmJiAobWV0aG9kTmFtZSA9PT0gXCJzdWJzY3JpYmVcIiB8fCBtZXRob2ROYW1lID09PSBcInVuc3Vic2NyaWJlXCIpO1xuICAgICAgICAgICAgY29uc3QgaXNHZW5pZXNFdmVudE1ldGhvZCA9IGlzR2VuaWVzRXZlbnRUeXBlKG9iamVjdFR5cGUpICYmIChtZXRob2ROYW1lID09PSBcImFkZExpc3RlbmVyXCIgfHwgbWV0aG9kTmFtZSA9PT0gXCJyZW1vdmVMaXN0ZW5lclwiKTtcblxuICAgICAgICAgICAgaWYgKGlzU2lnbmFsQnVzTWV0aG9kIHx8IGlzR2VuaWVzRXZlbnRNZXRob2QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kQXJnSW5kZXggPSBpc1NpZ25hbEJ1c01ldGhvZCA/IDEgOiAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gbWV0aG9kQXJnSW5kZXggJiYgTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihhcmdzW21ldGhvZEFyZ0luZGV4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kQXJnID0gYXJnc1ttZXRob2RBcmdJbmRleF0gYXMgTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dEV4cHJlc3Npb24gPSB0aGlzLmdldENvbnRleHRFeHByZXNzaW9uKG1ldGhvZEFyZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb250ZXh0IGFzIHRoZSBsYXN0IGFyZ3VtZW50IHdpdGggdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNhbGxFeHByZXNzaW9uLmFkZEFyZ3VtZW50KGAvL0B0cy1pZ25vcmVcXG4ke2NvbnRleHRFeHByZXNzaW9uLmdldFRleHQoKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb250ZXh0RXhwcmVzc2lvbihub2RlOiBOb2RlKTogTm9kZSB7XG4gICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRFeHByZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbn0iLCJpbXBvcnQge1xuICAgIENhbGxFeHByZXNzaW9uLFxuICAgIEpTRG9jVGFnLFxuICAgIEpTRG9jVGFnSW5mbyxcbiAgICBNZXRob2REZWNsYXJhdGlvbixcbiAgICBNZXRob2RTaWduYXR1cmUsXG4gICAgTm9kZSxcbiAgICBTb3VyY2VGaWxlLFxuICAgIFN5bnRheEtpbmRcbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge0dlbmllc0luc3RhbmNlUHJvcE5hbWUsIGlzR2VuaWVzU2NyaXB0VHlwZX0gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIEV4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGxldCBuZXdOb2RlID0gbm9kZTtcbiAgICAgICAgaWYgKG5vZGUuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IG5vZGUuYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICAgICAgICAgIGlmIChleHByZXNzaW9uLmdldEtpbmQoKSA9PT0gU3ludGF4S2luZC5Qcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eUFjY2VzcyA9IGV4cHJlc3Npb24uYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLlByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHByb3BlcnR5QWNjZXNzLmdldE5hbWUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHByb3BlcnR5QWNjZXNzLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gaW5zdGFuY2UuZ2V0VHlwZSgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gcHJvcGVydHlBY2Nlc3MuZ2V0U3ltYm9sKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRob2REZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkTWV0aG9kU2lnbmF0dXJlcyA9IG1ldGhvZERlY2xhcmF0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihkZWNsID0+IGRlY2wuZ2V0S2luZCgpID09IFN5bnRheEtpbmQuTWV0aG9kU2lnbmF0dXJlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChkZWNsID0+IGRlY2wgYXMgTWV0aG9kU2lnbmF0dXJlKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRNZXRob2RTaWduYXR1cmU6IE1ldGhvZFNpZ25hdHVyZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkTWV0aG9kU2lnbmF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub25FeHRlbnNpb25NZXRob2RzID0gdmFsaWRNZXRob2RTaWduYXR1cmVzLmZpbHRlcihkZWNsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc0RvY1RhZ3MgPSBkZWNsLmdldEpzRG9jcygpLmZsYXRNYXAoZCA9PiBkLmdldFRhZ3MoKSkgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFqc0RvY1RhZ3Muc29tZSh0YWcgPT4gdGFnLmdldFRhZ05hbWUoKSA9PT0gJ2V4dGVuc2lvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub25FeHRlbnNpb25NZXRob2RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNZXRob2RTaWduYXR1cmUgPSB2YWxpZE1ldGhvZFNpZ25hdHVyZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE1ldGhvZFNpZ25hdHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNEb2NUYWdzID0gc2VsZWN0ZWRNZXRob2RTaWduYXR1cmUuZ2V0SnNEb2NzKCkuZmxhdE1hcChkID0+IGQuZ2V0VGFncygpKSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvblRhZyA9IGpzRG9jVGFncy5maW5kKHRhZyA9PiB0YWcuZ2V0VGFnTmFtZSgpID09PSAnZXh0ZW5zaW9uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb25UYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRlbnNpb25Db21tZW50ID0gZXh0ZW5zaW9uVGFnLmdldENvbW1lbnRUZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25DbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uTWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlUGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gPSB0aGlzLnBhcnNlRXh0ZW5zaW9uQ29tbWVudChleHRlbnNpb25Db21tZW50LCBtZXRob2ROYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBub2RlLmdldFNvdXJjZUZpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJncyA9IHRoaXMuZXh0cmFjdEFuZE9yZGVyVHlwZUFyZ3VtZW50cyhpbnN0YW5jZSwgY2FsbEV4cHJlc3Npb24sIHNlbGVjdGVkTWV0aG9kU2lnbmF0dXJlIGFzIE1ldGhvZFNpZ25hdHVyZSwgdHlwZVBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV4dGVuc2lvbkNsYXNzLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xhc3NTaG9ydE5hbWUgPSBwYXJ0cy5wb3AoKSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBwYXJ0cy5qb2luKCcuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBtb2R1bGUgaXMgaW1wb3J0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUltcG9ydChzb3VyY2VGaWxlLCBjbGFzc1Nob3J0TmFtZSwgbmFtZXNwYWNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlVGV4dCA9IGlzR2VuaWVzU2NyaXB0VHlwZSh0eXBlKSA/IFwiLy9AdHMtaWdub3JlXFxuXCIgKyBpbnN0YW5jZS5nZXRUZXh0KCkgKyBcIi5cIiArIEdlbmllc0luc3RhbmNlUHJvcE5hbWUgOiBpbnN0YW5jZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnc1RleHQgPSBhcmdzLm1hcChhcmcgPT4gYXJnLmdldEZ1bGxUZXh0KCkpLmpvaW4oXCIsIFwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgbmV3IGV4cHJlc3Npb24gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb25UZXh0ID0gdHlwZUFyZ3MubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke2NsYXNzU2hvcnROYW1lfS4ke2V4dGVuc2lvbk1ldGhvZH08JHt0eXBlQXJncy5qb2luKFwiLCBcIil9Pigke2luc3RhbmNlVGV4dH0sICR7YXJnc1RleHR9KWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtjbGFzc1Nob3J0TmFtZX0uJHtleHRlbnNpb25NZXRob2R9KCR7aW5zdGFuY2VUZXh0fSwgJHthcmdzVGV4dH0pYDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQobmV3RXhwcmVzc2lvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuICAgIHByaXZhdGUgcGFyc2VFeHRlbnNpb25Db21tZW50KGNvbW1lbnQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgbWV0aG9kTmFtZTogc3RyaW5nKToge1xuICAgICAgICBleHRlbnNpb25DbGFzczogc3RyaW5nLFxuICAgICAgICBleHRlbnNpb25NZXRob2Q6IHN0cmluZyxcbiAgICAgICAgdHlwZVBhcmFtZXRlcnM6IHN0cmluZ1tdXG4gICAgfSB7XG4gICAgICAgIGlmICghY29tbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZXh0ZW5zaW9uQ2xhc3M6IFwiXCIsIGV4dGVuc2lvbk1ldGhvZDogbWV0aG9kTmFtZSwgdHlwZVBhcmFtZXRlcnM6IFtdIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWdleCA9IC9eKD88bmFtZXNwYWNlPlthLXpBLVpfXVxcdyooPzpcXC5bYS16QS1aX11cXHcqKSopXFwuKD88bWV0aG9kPlthLXpBLVpfXVxcdyopXFxzKig/OjwoPzxhcmd1bWVudHM+W14+XSopPik/JC87XG4gICAgICAgIGNvbnN0IG1hdGNoID0gY29tbWVudC5tYXRjaChyZWdleCk7XG5cbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmdyb3Vwcykge1xuICAgICAgICAgICAgY29uc3QgeyBuYW1lc3BhY2UsIG1ldGhvZCwgYXJndW1lbnRzOiB0eXBlUGFyYW1zIH0gPSBtYXRjaC5ncm91cHM7XG4gICAgICAgICAgICBjb25zdCB0eXBlUGFyYW1ldGVycyA9IHR5cGVQYXJhbXMgPyB0eXBlUGFyYW1zLnNwbGl0KCcsJykubWFwKHBhcmFtID0+IHBhcmFtLnRyaW0oKSkgOiBbXTtcbiAgICAgICAgICAgIHJldHVybiB7IGV4dGVuc2lvbkNsYXNzOiBuYW1lc3BhY2UsIGV4dGVuc2lvbk1ldGhvZDogbWV0aG9kLCB0eXBlUGFyYW1ldGVycyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgZXh0ZW5zaW9uQ2xhc3M6IFwiXCIsIGV4dGVuc2lvbk1ldGhvZDogbWV0aG9kTmFtZSwgdHlwZVBhcmFtZXRlcnM6IFtdIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbnN1cmVJbXBvcnQoc291cmNlRmlsZTogU291cmNlRmlsZSwgY2xhc3NOYW1lOiBzdHJpbmcsIG5hbWVTcGFjZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGltcG9ydERlY2xhcmF0aW9ucyA9IHNvdXJjZUZpbGUuZ2V0SW1wb3J0RGVjbGFyYXRpb25zKCk7XG5cbiAgICAgICAgbGV0IGhhc0ltcG9ydCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGltcG9ydERlY2wgb2YgaW1wb3J0RGVjbGFyYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoaW1wb3J0RGVjbC5nZXRNb2R1bGVTcGVjaWZpZXIoKS5nZXRMaXRlcmFsVGV4dCgpID09PSBuYW1lU3BhY2UpIHtcbiAgICAgICAgICAgICAgICBoYXNJbXBvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVkSW1wb3J0cyA9IGltcG9ydERlY2wuZ2V0TmFtZWRJbXBvcnRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeUltcG9ydGVkID0gbmFtZWRJbXBvcnRzLnNvbWUobmFtZWRJbXBvcnQgPT4gbmFtZWRJbXBvcnQuZ2V0TmFtZSgpID09PSBjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeUltcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGltcG9ydERlY2wuYWRkTmFtZWRJbXBvcnQoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc0ltcG9ydCkge1xuICAgICAgICAgICAgc291cmNlRmlsZS5hZGRJbXBvcnREZWNsYXJhdGlvbih7XG4gICAgICAgICAgICAgICAgbmFtZWRJbXBvcnRzOiBbe25hbWU6IGNsYXNzTmFtZX1dLFxuICAgICAgICAgICAgICAgIG1vZHVsZVNwZWNpZmllcjogbmFtZVNwYWNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGV4dHJhY3RBbmRPcmRlclR5cGVBcmd1bWVudHMoaW5zdGFuY2U6IE5vZGUsIGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbiwgbWV0aG9kU3ltYm9sOiBNZXRob2RTaWduYXR1cmUsIHR5cGVQYXJhbWV0ZXJzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2VUeXBlID0gaW5zdGFuY2UuZ2V0VHlwZSgpO1xuXG4gICAgICAgIGNvbnN0IHR5cGVBcmdzID0gaW5zdGFuY2VUeXBlLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgY29uc3QgdHlwZVBhcmFtcyA9IGluc3RhbmNlVHlwZS5nZXRTeW1ib2xPclRocm93KCkuZ2V0RGVjbGFyZWRUeXBlKCkuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICBjb25zdCB0eXBlQXJnTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuICAgICAgICB0eXBlQXJncy5mb3JFYWNoKCh0eXBlQXJnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0eXBlUGFyYW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChwYXJhbSkge1xuICAgICAgICAgICAgICAgIHR5cGVBcmdNYXAuc2V0KHBhcmFtLmdldFRleHQoKSwgdHlwZUFyZy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYWxsVHlwZUFyZ3MgPSBjYWxsRXhwcmVzc2lvbi5nZXRUeXBlQXJndW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IGNhbGxUeXBlUGFyYW1zID0gbWV0aG9kU3ltYm9sLmdldFR5cGVQYXJhbWV0ZXJzKCk7XG5cbiAgICAgICAgY2FsbFR5cGVBcmdzLmZvckVhY2goKHR5cGVBcmcsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbSA9IGNhbGxUeXBlUGFyYW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChwYXJhbSkge1xuICAgICAgICAgICAgICAgIHR5cGVBcmdNYXAuc2V0KHBhcmFtLmdldFRleHQoKSwgdHlwZUFyZy5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPcmRlciB0eXBlIGFyZ3VtZW50cyBiYXNlZCBvbiB0aGUgdHlwZSBwYXJhbWV0ZXIgb3JkZXIgaW4gdGhlIGNvbW1lbnRcbiAgICAgICAgcmV0dXJuIHR5cGVQYXJhbWV0ZXJzLm1hcChwYXJhbSA9PiB0eXBlQXJnTWFwLmdldChwYXJhbSkgfHwgcGFyYW0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2xhc3NEZWNsYXJhdGlvbixcbiAgICBNZXRob2REZWNsYXJhdGlvbixcbiAgICBOb2RlLFxuICAgIE9wdGlvbmFsS2luZCxcbiAgICBTb3VyY2VGaWxlLFxuICAgIFN5bnRheEtpbmQsXG4gICAgVHlwZSxcbiAgICBWYXJpYWJsZURlY2xhcmF0aW9uS2luZCxcbiAgICBWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZVxufSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCB7XG4gICAgY29tcG9uZW50TWV0aG9kcyxcbiAgICBHZW5pZXNJbnN0YW5jZVByb3BOYW1lLFxuICAgIGdldEZ1bGxUeXBlTmFtZSxcbiAgICBnZXRJc1VuaXR5QVBJRGVjbGFyYXRpb24sXG4gICAgZ2V0SXNVbml0eUFQSVR5cGUsXG4gICAgZ2V0VHlwZU5hbWVBbmRFbnN1cmVJbXBvcnRlZCxcbiAgICBpc0dlbmllc1NjcmlwdFR5cGUsXG4gICAgaXNPckluaGVyaXRzRnJvbUdhbWVPYmplY3RPckNvbXBvbmVudFxufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuaW1wb3J0IHsgVHJhbnNmb3JtYXRpb25Db250ZXh0IH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQgeyBJVHJhbnNmb3JtZXIgfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIEdlbmVyaWNNZXRob2RUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgcHJpdmF0ZSBzb3VyY2VGaWxlR2VuZXJpY01hcDogTWFwPFNvdXJjZUZpbGUsIE1hcDxzdHJpbmcsIHN0cmluZz4+ID0gbmV3IE1hcCgpO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBsZXQgbmV3Tm9kZSA9IG5vZGU7XG5cbiAgICAgICAgaWYgKG5vZGUuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IG5vZGUuYXNLaW5kT3JUaHJvdyhTeW50YXhLaW5kLkNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWVOb2RlID0gZXhwcmVzc2lvbi5nZXRMYXN0Q2hpbGRCeUtpbmQoU3ludGF4S2luZC5JZGVudGlmaWVyKTtcbiAgICAgICAgICAgIGlmIChtZXRob2ROYW1lTm9kZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lTm9kZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudE1ldGhvZHMuaGFzKG1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSBleHByZXNzaW9uLmdldEZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihmaXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc09ySW5oZXJpdHNGcm9tR2FtZU9iamVjdE9yQ29tcG9uZW50KGNsYXNzVHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXhwcmVzc2lvbi5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlBY2Nlc3MgPSBleHByZXNzaW9uLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5Qcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24pO1xuICAgICAgICAgICAgICAgIGxldCBtZXRob2ROYW1lID0gcHJvcGVydHlBY2Nlc3MuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZFN5bWJvbCA9IHByb3BlcnR5QWNjZXNzLmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gcHJvcGVydHlBY2Nlc3MuZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlVHlwZSA9IGluc3RhbmNlLmdldFR5cGUoKTtcblxuICAgICAgICAgICAgICAgIGlmICghbWV0aG9kU3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJldHJpZXZlIG92ZXJsb2FkIGluZm8gZnJvbSBUcmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgICAgICBjb25zdCBvdmVybG9hZEluZm8gPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQuZ2V0U3dhcE92ZXJsb2FkKGNhbGxFeHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxvYWRJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgc3dhcHBlZCBtZXRob2QgbmFtZVxuICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lID0gb3ZlcmxvYWRJbmZvLm1ldGhvZFN3YXBWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBtZXRob2RTeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kRGVjbGFyYXRpb24gPSBkZWNsYXJhdGlvbnNbMF0gYXMgTWV0aG9kRGVjbGFyYXRpb247XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRJc1VuaXR5QVBJRGVjbGFyYXRpb24obWV0aG9kRGVjbGFyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY2xhcmluZ1R5cGUgPSBtZXRob2REZWNsYXJhdGlvbi5nZXRQYXJlbnQoKS5nZXRUeXBlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3NOb2RlcyA9IGNhbGxFeHByZXNzaW9uLmdldFR5cGVBcmd1bWVudHMoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZUFyZ3NOb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VGaWxlID0gbm9kZS5nZXRTb3VyY2VGaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc291cmNlRmlsZUdlbmVyaWNNYXAuaGFzKHNvdXJjZUZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VGaWxlR2VuZXJpY01hcC5zZXQoc291cmNlRmlsZSwgbmV3IE1hcCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3MgPSB0eXBlQXJnc05vZGVzLm1hcCh0ID0+IHQuZ2V0VHlwZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc01hdGNoaW5nTm9uR2VuZXJpY092ZXJsb2FkKG1ldGhvZERlY2xhcmF0aW9uLCB0eXBlQXJncywgYXJncykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlID0gdGhpcy5yZXBsYWNlV2l0aE5vbkdlbmVyaWNDYWxsKGNhbGxFeHByZXNzaW9uLCB0eXBlQXJncywgYXJncywgdHJhbnNmb3JtYXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhclN0YXRlbWVudHM6IE9wdGlvbmFsS2luZDxWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZT5bXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNNZXRob2RWYXJOYW1lID0gdGhpcy5jcmVhdGVHZW5lcmljTWV0aG9kVmFyaWFibGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2xhcmluZ1R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVBcmdzTm9kZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUZpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhclN0YXRlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGp1c3RlZCBjb2RlIHN0YXJ0cyBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RJbXBvcnRJbmRleDogbnVtYmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1hdGlvbkNvbnRleHQubGFzdEdlbmVyaWNUeXBlVmFySW5kZXguaGFzKHNvdXJjZUZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbXBvcnRJbmRleCA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC5sYXN0R2VuZXJpY1R5cGVWYXJJbmRleC5nZXQoc291cmNlRmlsZSkhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbXBvcnRJbmRleCA9IHRoaXMuZ2V0TGFzdEltcG9ydEluZGV4KHNvdXJjZUZpbGUpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGluc2VydGlvbiBpbmRleCBkb2VzIG5vdCBleGNlZWQgdGhlIHRvdGFsIG51bWJlciBvZiBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdGVtZW50c0xlbmd0aCA9IHNvdXJjZUZpbGUuZ2V0U3RhdGVtZW50cygpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0SW1wb3J0SW5kZXggPSBNYXRoLm1pbihsYXN0SW1wb3J0SW5kZXgsIHN0YXRlbWVudHNMZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSB2YXJpYWJsZSBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlRmlsZS5pbnNlcnRWYXJpYWJsZVN0YXRlbWVudHMobGFzdEltcG9ydEluZGV4LCBuZXdWYXJTdGF0ZW1lbnRzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFzdCBpbnNlcnRpb24gaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbkNvbnRleHQubGFzdEdlbmVyaWNUeXBlVmFySW5kZXguc2V0KHNvdXJjZUZpbGUsIGxhc3RJbXBvcnRJbmRleCArIG5ld1ZhclN0YXRlbWVudHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGp1c3RlZCBjb2RlIGVuZHMgaGVyZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJnc1RleHQgPSBhcmdzLm1hcChhcmcgPT4gYXJnLmdldEZ1bGxUZXh0KCkpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1N0YXRpYyA9IG1ldGhvZERlY2xhcmF0aW9uLmlzU3RhdGljKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VUZXh0ID0gaXNHZW5pZXNTY3JpcHRUeXBlKGluc3RhbmNlVHlwZSkgJiYgIWlzU3RhdGljXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCIvL0B0cy1pZ25vcmVcXG5cIiArIGluc3RhbmNlLmdldFRleHQoKSArIFwiLlwiICsgR2VuaWVzSW5zdGFuY2VQcm9wTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGluc3RhbmNlLmdldFRleHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb25UZXh0ID0gaXNTdGF0aWNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtnZW5lcmljTWV0aG9kVmFyTmFtZX0oJHthcmdzVGV4dH0pYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGAke2dlbmVyaWNNZXRob2RWYXJOYW1lfS5jYWxsKCR7aW5zdGFuY2VUZXh0fSwgJHthcmdzVGV4dH0pYDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQobmV3RXhwcmVzc2lvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlTmFtZSh0eXBlOiBUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKSA/PyB0eXBlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVLZXkodHlwZTogVHlwZSwgdHlwZUFyZ3VtZW50czogVHlwZVtdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1R5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIGAke2dlbmVyaWNUeXBlTmFtZX0kJHt0eXBlQXJndW1lbnRzLm1hcCh0ID0+IHtcbiAgICAgICAgICAgIGxldCB0QXJncyA9IHQuZ2V0VHlwZUFyZ3VtZW50cygpO1xuICAgICAgICAgICAgaWYgKHRBcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlS2V5KHQsIHRBcmdzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZU5hbWUodCk7XG4gICAgICAgIH0pLmpvaW4oXCIkXCIpfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRLZXkodHlwZTogVHlwZSwgbWV0aG9kTmFtZTogc3RyaW5nLCBhcmdzOiBOb2RlW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBnZW5lcmljVHlwZU5hbWUgPSB0aGlzLmdldFR5cGVOYW1lKHR5cGUpO1xuICAgICAgICByZXR1cm4gYCR7Z2VuZXJpY1R5cGVOYW1lfSQke21ldGhvZE5hbWV9JCR7YXJncy5tYXAoYXJnID0+IHRoaXMuZ2V0VHlwZU5hbWUoYXJnLmdldFR5cGUoKSkpLmpvaW4oXCIkXCIpfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVHZW5lcmljTWV0aG9kVmFyaWFibGUoXG4gICAgICAgIHR5cGU6IFR5cGUsXG4gICAgICAgIG1ldGhvZE5hbWU6IHN0cmluZyxcbiAgICAgICAgYXJnczogTm9kZVtdLFxuICAgICAgICBzb3VyY2VGaWxlOiBTb3VyY2VGaWxlLFxuICAgICAgICB2YXJTdGF0ZW1lbnRzOiBPcHRpb25hbEtpbmQ8VmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmU+W10sXG4gICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0XG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1R5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgY29uc3QgZ2VuZXJpY0tleSA9IHRoaXMuZ2V0S2V5KHR5cGUsIG1ldGhvZE5hbWUsIGFyZ3MpO1xuXG4gICAgICAgIGNvbnN0IGdlbmVyaWNNYXAgPSB0aGlzLnNvdXJjZUZpbGVHZW5lcmljTWFwLmdldChzb3VyY2VGaWxlKSE7XG5cbiAgICAgICAgaWYgKCFnZW5lcmljTWFwLmhhcyhnZW5lcmljS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY0FyZ3MgPSBhcmdzLm1hcChhcmcgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZShhcmcuZ2V0VHlwZSgpKSAmJiBhcmcuZ2V0VHlwZSgpLmlzSW50ZXJmYWNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAkdHlwZW9mKFwiJHtnZXRGdWxsVHlwZU5hbWUoYXJnLmdldFR5cGUoKSl9XCIpYDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKGFyZy5nZXRUeXBlKCksIHNvdXJjZUZpbGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNEZWNsYXJhdGlvbiA9IGAkZ2VuZXJpY01ldGhvZCgke2dlbmVyaWNUeXBlTmFtZX0sIFwiJHttZXRob2ROYW1lfVwiLCAke2dlbmVyaWNBcmdzLmpvaW4oXCIsIFwiKX0pYDtcblxuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY1Zhck5hbWUgPSBgXyR7Z2VuZXJpY0tleS5yZXBsYWNlKC9cXCQvZywgXCJfXCIpfWA7XG4gICAgICAgICAgICBnZW5lcmljTWFwLnNldChnZW5lcmljS2V5LCBnZW5lcmljVmFyTmFtZSk7XG5cbiAgICAgICAgICAgIHZhclN0YXRlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25LaW5kOiBWYXJpYWJsZURlY2xhcmF0aW9uS2luZC5Db25zdCxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGdlbmVyaWNWYXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplcjogZ2VuZXJpY0RlY2xhcmF0aW9uXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlbmVyaWNNYXAuZ2V0KGdlbmVyaWNLZXkpITtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQodHlwZTogVHlwZSwgc291cmNlRmlsZTogU291cmNlRmlsZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuXG4gICAgICAgIGlmICh0cmFuc2Zvcm1hdGlvbkNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLmhhcyhzb3VyY2VGaWxlKSkge1xuICAgICAgICAgICAgbGV0IG1hcHBpbmcgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLmdldChzb3VyY2VGaWxlKSE7XG4gICAgICAgICAgICBsZXQgdHlwZUFyZ3MgPSB0eXBlLmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgICAgIGxldCB0eXBlS2V5ID0gdGhpcy5nZXRUeXBlS2V5KHR5cGUsIHR5cGVBcmdzKTtcblxuICAgICAgICAgICAgaWYgKG1hcHBpbmcuaGFzKHR5cGVLZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcHBpbmcuZ2V0KHR5cGVLZXkpITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKHR5cGUsIHNvdXJjZUZpbGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0TGFzdEltcG9ydEluZGV4KHNvdXJjZUZpbGU6IFNvdXJjZUZpbGUpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBzdGF0ZW1lbnRzID0gc291cmNlRmlsZS5nZXRTdGF0ZW1lbnRzKCk7XG4gICAgICAgIGxldCBsYXN0SW1wb3J0SW5kZXggPSAtMTtcblxuICAgICAgICBzdGF0ZW1lbnRzLmZvckVhY2goKHN0YXRlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0ZW1lbnQuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLkltcG9ydERlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGFzdEltcG9ydEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBsYXN0SW1wb3J0SW5kZXg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNNYXRjaGluZ05vbkdlbmVyaWNPdmVybG9hZChtZXRob2REZWNsYXJhdGlvbjogTWV0aG9kRGVjbGFyYXRpb24sIHR5cGVBcmdzOiBUeXBlW10sIGFyZ3M6IE5vZGVbXSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwYXJlbnRDbGFzcyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldFBhcmVudCgpIGFzIENsYXNzRGVjbGFyYXRpb247XG4gICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2REZWNsYXJhdGlvbi5nZXROYW1lKCk7XG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSBwYXJlbnRDbGFzcy5nZXRNZXRob2RzKCkuZmlsdGVyKG0gPT4gbS5nZXROYW1lKCkgPT09IG1ldGhvZE5hbWUgJiYgbS5nZXRUeXBlUGFyYW1ldGVycygpLmxlbmd0aCA9PT0gMCk7XG5cbiAgICAgICAgY29uc3QgY3NoYXJwVHlwZU5hbWUgPSAnU3lzdGVtLlR5cGUnO1xuXG4gICAgICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBtZXRob2QuZ2V0UGFyYW1ldGVycygpO1xuICAgICAgICAgICAgY29uc3QgdHlwZVBhcmFtQ291bnQgPSBwYXJhbWV0ZXJzLmZpbHRlcihwID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RnVsbFR5cGVOYW1lKHAuZ2V0VHlwZSgpKSA9PT0gY3NoYXJwVHlwZU5hbWU7XG4gICAgICAgICAgICB9KS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmICh0eXBlUGFyYW1Db3VudCA9PT0gdHlwZUFyZ3MubGVuZ3RoICYmIHBhcmFtZXRlcnMubGVuZ3RoID09PSB0eXBlQXJncy5sZW5ndGggKyBhcmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXJzLmV2ZXJ5KChwYXJhbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgdHlwZUFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RnVsbFR5cGVOYW1lKHBhcmFtLmdldFR5cGUoKSkgPT09IGNzaGFycFR5cGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmdldFR5cGUoKS5nZXRUZXh0KCkgPT09IGFyZ3NbaW5kZXggLSB0eXBlQXJncy5sZW5ndGhdLmdldFR5cGUoKS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBsYWNlV2l0aE5vbkdlbmVyaWNDYWxsKGNhbGxFeHByZXNzaW9uOiBOb2RlLCB0eXBlQXJnczogVHlwZVtdLCBhcmdzOiBOb2RlW10sIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZENhbGwgPSBjYWxsRXhwcmVzc2lvbi5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBjb25zdCBwcm9wZXJ0eUFjY2VzcyA9IG1ldGhvZENhbGwuZ2V0RXhwcmVzc2lvbigpLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5Qcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24pO1xuICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gcHJvcGVydHlBY2Nlc3MuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBpbnN0YW5jZVRleHQgPSBwcm9wZXJ0eUFjY2Vzcy5nZXRFeHByZXNzaW9uKCkuZ2V0VGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IHR5cGVBcmdzVGV4dCA9IHR5cGVBcmdzLm1hcChhcmcgPT4ge1xuICAgICAgICAgICAgaWYgKGdldElzVW5pdHlBUElUeXBlKGFyZykgJiYgYXJnLmlzSW50ZXJmYWNlKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR0eXBlb2YoXCIke2dldEZ1bGxUeXBlTmFtZShhcmcpfVwiKWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBgJHR5cGVvZigke3RoaXMuZ2V0VHlwZU5hbWVBbmRFbnN1cmVJbXBvcnRlZChhcmcsIGNhbGxFeHByZXNzaW9uLmdldFNvdXJjZUZpbGUoKSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KX0pYDtcbiAgICAgICAgfSkuam9pbihcIiwgXCIpO1xuICAgICAgICBjb25zdCBhcmdzVGV4dCA9IGFyZ3MubWFwKGFyZyA9PiBhcmcuZ2V0VGV4dCgpKS5qb2luKFwiLCBcIik7XG4gICAgICAgIGNvbnN0IHJldHVyblR5cGUgPSBtZXRob2RDYWxsLmdldFJldHVyblR5cGUoKTtcblxuICAgICAgICBjb25zdCBuZXdFeHByZXNzaW9uVGV4dCA9IGAke2luc3RhbmNlVGV4dH0uJHttZXRob2ROYW1lfSgke3R5cGVBcmdzVGV4dH0ke2FyZ3NUZXh0ID8gYCwgJHthcmdzVGV4dH1gIDogXCJcIn0pIGFzICR7cmV0dXJuVHlwZS5nZXRUZXh0KCl9YDtcblxuICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KG5ld0V4cHJlc3Npb25UZXh0KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIE5vZGUsXG4gICAgT3B0aW9uYWxLaW5kLFxuICAgIFNvdXJjZUZpbGUsXG4gICAgU3ludGF4S2luZCxcbiAgICBUeXBlLFxuICAgIFZhcmlhYmxlRGVjbGFyYXRpb25LaW5kLFxuICAgIFZhcmlhYmxlU3RhdGVtZW50U3RydWN0dXJlXG59IGZyb20gXCJ0cy1tb3JwaFwiO1xuaW1wb3J0IHtcbiAgICBnZXRJc1VuaXR5QVBJVHlwZSxcbiAgICBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkXG59IGZyb20gXCIuLi9Db21waWxlclV0aWxzXCI7XG5pbXBvcnQgeyBUcmFuc2Zvcm1hdGlvbkNvbnRleHQgfSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7IElUcmFuc2Zvcm1lciB9IGZyb20gXCIuL0lUcmFuc2Zvcm1lclwiO1xuXG5leHBvcnQgY2xhc3MgR2VuZXJpY1R5cGVUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuTmV3RXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGxldCBuZXdOb2RlID0gbm9kZTtcbiAgICAgICAgaWYgKG5vZGUuZ2V0S2luZCgpID09PSBTeW50YXhLaW5kLk5ld0V4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb24gPSBub2RlLmFzS2luZE9yVGhyb3coU3ludGF4S2luZC5OZXdFeHByZXNzaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBuZXdFeHByZXNzaW9uLmdldFR5cGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBuZXdFeHByZXNzaW9uLmdldFR5cGVBcmd1bWVudHMoKS5tYXAodCA9PiB0LmdldFR5cGUoKSk7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gbmV3RXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcblxuICAgICAgICAgICAgaWYgKGdldElzVW5pdHlBUElUeXBlKHR5cGUpICYmIHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUZpbGUgPSBub2RlLmdldFNvdXJjZUZpbGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zZm9ybWF0aW9uQ29udGV4dC5zb3VyY2VGaWxlR2VuZXJpY1R5cGVNYXAuaGFzKHNvdXJjZUZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dC5zb3VyY2VGaWxlR2VuZXJpY1R5cGVNYXAuc2V0KHNvdXJjZUZpbGUsIG5ldyBNYXAoKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IG5ld1ZhclN0YXRlbWVudHM6IE9wdGlvbmFsS2luZDxWYXJpYWJsZVN0YXRlbWVudFN0cnVjdHVyZT5bXSA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNWYXJOYW1lID0gdGhpcy5jcmVhdGVHZW5lcmljVmFyaWFibGUodHlwZSwgdHlwZUFyZ3VtZW50cywgc291cmNlRmlsZSwgbmV3VmFyU3RhdGVtZW50cywgdHJhbnNmb3JtYXRpb25Db250ZXh0KTtcblxuICAgICAgICAgICAgICAgIC8vIEFkanVzdGVkIGNvZGUgc3RhcnRzIGhlcmVcbiAgICAgICAgICAgICAgICBsZXQgbGFzdEltcG9ydEluZGV4OiBudW1iZXI7XG4gICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybWF0aW9uQ29udGV4dC5sYXN0R2VuZXJpY1R5cGVWYXJJbmRleC5oYXMoc291cmNlRmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEltcG9ydEluZGV4ID0gdHJhbnNmb3JtYXRpb25Db250ZXh0Lmxhc3RHZW5lcmljVHlwZVZhckluZGV4LmdldChzb3VyY2VGaWxlKSE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEltcG9ydEluZGV4ID0gdGhpcy5nZXRMYXN0SW1wb3J0SW5kZXgoc291cmNlRmlsZSkgKyAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgaW5zZXJ0aW9uIGluZGV4IGRvZXMgbm90IGV4Y2VlZCB0aGUgdG90YWwgbnVtYmVyIG9mIHN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZW1lbnRzTGVuZ3RoID0gc291cmNlRmlsZS5nZXRTdGF0ZW1lbnRzKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxhc3RJbXBvcnRJbmRleCA9IE1hdGgubWluKGxhc3RJbXBvcnRJbmRleCwgc3RhdGVtZW50c0xlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIHZhcmlhYmxlIHN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICBzb3VyY2VGaWxlLmluc2VydFZhcmlhYmxlU3RhdGVtZW50cyhsYXN0SW1wb3J0SW5kZXgsIG5ld1ZhclN0YXRlbWVudHMpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBsYXN0IGluc2VydGlvbiBpbmRleFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dC5sYXN0R2VuZXJpY1R5cGVWYXJJbmRleC5zZXQoc291cmNlRmlsZSwgbGFzdEltcG9ydEluZGV4ICsgbmV3VmFyU3RhdGVtZW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIC8vIEFkanVzdGVkIGNvZGUgZW5kcyBoZXJlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhcmdzVGV4dCA9IGFyZ3MubWFwKGFyZyA9PiBhcmcuZ2V0RnVsbFRleHQoKSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V4cHJlc3Npb25UZXh0ID0gYG5ldyAke2dlbmVyaWNWYXJOYW1lfSgke2FyZ3NUZXh0fSkgYXMgJHt0eXBlLmdldFRleHQoKX1gO1xuICAgICAgICAgICAgICAgIG5ld05vZGUgPSBuZXdFeHByZXNzaW9uLnJlcGxhY2VXaXRoVGV4dChuZXdFeHByZXNzaW9uVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVOYW1lKHR5cGU6IFR5cGUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdHlwZS5nZXRTeW1ib2woKT8uZ2V0TmFtZSgpID8/IHR5cGUuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0S2V5KHR5cGU6IFR5cGUsIHR5cGVBcmd1bWVudHM6IFR5cGVbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNUeXBlTmFtZSA9IHRoaXMuZ2V0VHlwZU5hbWUodHlwZSk7XG4gICAgICAgIHJldHVybiBgJHtnZW5lcmljVHlwZU5hbWV9JCR7dHlwZUFyZ3VtZW50cy5tYXAodCA9PiB7XG4gICAgICAgICAgICBsZXQgdEFyZ3MgPSB0LmdldFR5cGVBcmd1bWVudHMoKTtcbiAgICAgICAgICAgIGlmICh0QXJncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0S2V5KHQsIHRBcmdzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZU5hbWUodCk7XG4gICAgICAgIH0pLmpvaW4oXCIkXCIpfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVHZW5lcmljVmFyaWFibGUodHlwZTogVHlwZSwgdHlwZUFyZ3VtZW50czogVHlwZVtdLCBzb3VyY2VGaWxlOiBTb3VyY2VGaWxlLCB2YXJTdGF0ZW1lbnRzOiBPcHRpb25hbEtpbmQ8VmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmU+W10sIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1R5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlKTtcbiAgICAgICAgY29uc3QgZ2VuZXJpY0tleSA9IHRoaXMuZ2V0S2V5KHR5cGUsIHR5cGVBcmd1bWVudHMpO1xuXG4gICAgICAgIGNvbnN0IGdlbmVyaWNNYXAgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQuc291cmNlRmlsZUdlbmVyaWNUeXBlTWFwLmdldChzb3VyY2VGaWxlKSE7XG5cbiAgICAgICAgaWYgKCFnZW5lcmljTWFwLmhhcyhnZW5lcmljS2V5KSkge1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY0FyZ3MgPSB0eXBlQXJndW1lbnRzLm1hcCh0ID0+IHRoaXMuZ2V0VHlwZU5hbWVBbmRFbnN1cmVJbXBvcnRlZCh0LCBzb3VyY2VGaWxlLCB2YXJTdGF0ZW1lbnRzLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpKTtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyaWNEZWNsYXJhdGlvbiA9IGAkZ2VuZXJpYygke2dlbmVyaWNUeXBlTmFtZX0sICR7Z2VuZXJpY0FyZ3Muam9pbihcIiwgXCIpfSlgO1xuXG4gICAgICAgICAgICBjb25zdCBnZW5lcmljVmFyTmFtZSA9IGBfJHtnZW5lcmljS2V5LnJlcGxhY2UoL1xcJC9nLCBcIl9cIil9YDtcbiAgICAgICAgICAgIGdlbmVyaWNNYXAuc2V0KGdlbmVyaWNLZXksIGdlbmVyaWNWYXJOYW1lKTtcblxuICAgICAgICAgICAgdmFyU3RhdGVtZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbktpbmQ6IFZhcmlhYmxlRGVjbGFyYXRpb25LaW5kLkNvbnN0LFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW3tcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZ2VuZXJpY1Zhck5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVyOiBnZW5lcmljRGVjbGFyYXRpb25cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2VuZXJpY01hcC5nZXQoZ2VuZXJpY0tleSkhO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VHlwZU5hbWVBbmRFbnN1cmVJbXBvcnRlZCh0eXBlOiBUeXBlLCBzb3VyY2VGaWxlOiBTb3VyY2VGaWxlLCB2YXJTdGF0ZW1lbnRzOiBPcHRpb25hbEtpbmQ8VmFyaWFibGVTdGF0ZW1lbnRTdHJ1Y3R1cmU+W10sIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHR5cGUuZ2V0VHlwZUFyZ3VtZW50cygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBuZXN0ZWQgZ2VuZXJpY3NcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUdlbmVyaWNWYXJpYWJsZSh0eXBlLCB0eXBlLmdldFR5cGVBcmd1bWVudHMoKSwgc291cmNlRmlsZSwgdmFyU3RhdGVtZW50cywgdHJhbnNmb3JtYXRpb25Db250ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRUeXBlTmFtZUFuZEVuc3VyZUltcG9ydGVkKHR5cGUsIHNvdXJjZUZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMYXN0SW1wb3J0SW5kZXgoc291cmNlRmlsZTogU291cmNlRmlsZSk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHN0YXRlbWVudHMgPSBzb3VyY2VGaWxlLmdldFN0YXRlbWVudHMoKTtcbiAgICAgICAgbGV0IGxhc3RJbXBvcnRJbmRleCA9IC0xO1xuXG4gICAgICAgIHN0YXRlbWVudHMuZm9yRWFjaCgoc3RhdGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YXRlbWVudC5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuSW1wb3J0RGVjbGFyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBsYXN0SW1wb3J0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGxhc3RJbXBvcnRJbmRleDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb2RlLCBTeW50YXhLaW5kLCBUeXBlQ2hlY2tlciwgVHlwZSwgQ2FsbEV4cHJlc3Npb24gfSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCB7IFRyYW5zZm9ybWF0aW9uQ29udGV4dCB9IGZyb20gXCIuL1RyYW5zZm9ybWF0aW9uQ29udGV4dFwiO1xuaW1wb3J0IHsgSVRyYW5zZm9ybWVyIH0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge0dlbmllc0luc3RhbmNlUHJvcE5hbWUsIGdldElzVW5pdHlBUElUeXBlLCBpc0dlbmllc1NjcmlwdFR5cGV9IGZyb20gXCIuLi9Db21waWxlclV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBHZW5pZXNJbnN0YW5jZVRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmICghTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZS5hc0tpbmRPclRocm93KFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBjb25zdCB0eXBlQ2hlY2tlciA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcjtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FsbCBleHByZXNzaW9uIGlzIGJlaW5nIG1hZGUgZnJvbSBhIFVuaXR5IHR5cGVcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvblR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCkpO1xuICAgICAgICBpZiAoIWdldElzVW5pdHlBUElUeXBlKGV4cHJlc3Npb25UeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhcmdzID0gY2FsbEV4cHJlc3Npb24uZ2V0QXJndW1lbnRzKCk7XG4gICAgICAgIGFyZ3MuZm9yRWFjaCgoYXJnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGFyZyk7XG4gICAgICAgICAgICBpZiAoaXNHZW5pZXNTY3JpcHRUeXBlKHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJnVGV4dCA9IGFyZy5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QXJnVGV4dCA9IGAvL0B0cy1pZ25vcmVcXG4ke2FyZ1RleHR9LiR7R2VuaWVzSW5zdGFuY2VQcm9wTmFtZX1gO1xuICAgICAgICAgICAgICAgIGFyZ3NbaW5kZXhdID0gYXJnLnJlcGxhY2VXaXRoVGV4dChuZXdBcmdUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2FsbEV4cHJlc3Npb24sXG4gICAgTWV0aG9kRGVjbGFyYXRpb24sXG4gICAgTm9kZSxcbiAgICBTeW1ib2xGbGFncyxcbiAgICBTeW50YXhLaW5kLFxuICAgIFR5cGUsXG4gICAgVHlwZUNoZWNrZXIsXG4gICAgVmFyaWFibGVEZWNsYXJhdGlvbixcbiAgICBTeW1ib2wsXG4gICAgUHJvcGVydHlEZWNsYXJhdGlvbixcbn0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQge0lUcmFuc2Zvcm1lcn0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5pbXBvcnQge2dldElzVW5pdHlBUElEZWNsYXJhdGlvbn0gZnJvbSBcIi4uL0NvbXBpbGVyVXRpbHNcIjtcblxuaW50ZXJmYWNlIE51bWVyaWNMaXRlcmFsSW5mbyB7XG4gICAgdmFsdWU6IG51bWJlcjtcbiAgICBoYXNEZWNpbWFsOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgTnVtZXJpY092ZXJsb2FkUmVzb2x1dGlvblRyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGlmICghTm9kZS5pc0NhbGxFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZSBhcyBDYWxsRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcblxuICAgICAgICBpZiAoIU5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcmVzc2lvbikgJiYgIU5vZGUuaXNJZGVudGlmaWVyKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1ldGhvZE5hbWVOb2RlID0gTm9kZS5pc1Byb3BlcnR5QWNjZXNzRXhwcmVzc2lvbihleHByZXNzaW9uKSA/IGV4cHJlc3Npb24uZ2V0TmFtZU5vZGUoKSA6IGV4cHJlc3Npb247XG5cbiAgICAgICAgY29uc3Qgc3ltYm9sID0gbWV0aG9kTmFtZU5vZGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG92ZXJsb2FkRGVjbGFyYXRpb25zID0gc3ltYm9sLmdldERlY2xhcmF0aW9ucygpLmZpbHRlcihkZWNsID0+XG4gICAgICAgICAgICBOb2RlLmlzTWV0aG9kRGVjbGFyYXRpb24oZGVjbClcbiAgICAgICAgKSBhcyBNZXRob2REZWNsYXJhdGlvbltdO1xuXG4gICAgICAgIGlmIChvdmVybG9hZERlY2xhcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWV0aG9kRGVjbGFyYXRpb24gPSBvdmVybG9hZERlY2xhcmF0aW9uc1swXSBhcyBNZXRob2REZWNsYXJhdGlvbjtcblxuICAgICAgICBpZiAoIWdldElzVW5pdHlBUElEZWNsYXJhdGlvbihtZXRob2REZWNsYXJhdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHlwZUNoZWNrZXIgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXI7XG5cbiAgICAgICAgLy8gSW5mZXIgcG9zc2libGUgdHlwZXMgZm9yIGVhY2ggYXJndW1lbnRcbiAgICAgICAgY29uc3QgYXJndW1lbnRUeXBlc0xpc3QgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKS5tYXAoYXJnID0+XG4gICAgICAgICAgICB0aGlzLmluZmVyUG9zc2libGVUeXBlcyhhcmcsIHR5cGVDaGVja2VyLCBjYWxsRXhwcmVzc2lvbilcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBQZXJmb3JtIG92ZXJsb2FkIHJlc29sdXRpb25cbiAgICAgICAgY29uc3QgYmVzdE92ZXJsb2FkID0gdGhpcy5zZWxlY3RCZXN0T3ZlcmxvYWQob3ZlcmxvYWREZWNsYXJhdGlvbnMsIGFyZ3VtZW50VHlwZXNMaXN0LCB0eXBlQ2hlY2tlcik7XG5cbiAgICAgICAgaWYgKCFiZXN0T3ZlcmxvYWQpIHtcbiAgICAgICAgICAgIC8vIE5vIHN1aXRhYmxlIG92ZXJsb2FkIGZvdW5kOyBmYWxsYmFjayB0byB0aGUgZmlyc3Qgb3ZlcmxvYWRcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IG1ldGhvZFN3YXAgdmFsdWUgZnJvbSBKU0RvY1xuICAgICAgICBjb25zdCBqc0RvY3MgPSBiZXN0T3ZlcmxvYWQuZ2V0SnNEb2NzKCk7XG4gICAgICAgIGxldCBtZXRob2RTd2FwVmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBqc0RvYyBvZiBqc0RvY3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBqc0RvYy5nZXRUYWdzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhZy5nZXRUYWdOYW1lKCkgPT09ICdtZXRob2RTd2FwJykge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RTd2FwVmFsdWUgPSB0YWcuZ2V0Q29tbWVudFRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ldGhvZFN3YXBWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtZXRob2RTd2FwVmFsdWUpIHtcbiAgICAgICAgICAgIC8vIG1ldGhvZFN3YXAgbm90IGZvdW5kOyBjYW5ub3QgcHJvY2VlZFxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAqKkNoZWNrIGlmIHRoZSBtZXRob2QgaXMgZ2VuZXJpYyoqXG4gICAgICAgIGNvbnN0IHR5cGVQYXJhbWV0ZXJzID0gYmVzdE92ZXJsb2FkLmdldFR5cGVQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGlmICh0eXBlUGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBUaGUgbWV0aG9kIGlzIGdlbmVyaWNcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBzZWxlY3RlZCBvdmVybG9hZCBpbmZvIGluIHRoZSBUcmFuc2Zvcm1hdGlvbkNvbnRleHRcbiAgICAgICAgICAgIHRyYW5zZm9ybWF0aW9uQ29udGV4dC5zZXRTd2FwT3ZlcmxvYWQoY2FsbEV4cHJlc3Npb24sIHtcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbjogYmVzdE92ZXJsb2FkLFxuICAgICAgICAgICAgICAgIG1ldGhvZFN3YXBWYWx1ZSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyAqKkRvIG5vdCBtb2RpZnkgdGhlIGNhbGwgZXhwcmVzc2lvbiBoZXJlKipcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VlZCB3aXRoIHN3YXBwaW5nIGZvciBub24tZ2VuZXJpYyBtZXRob2RzXG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIG5ldyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBuZXdBcmd1bWVudHMgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKS5tYXAoKGFyZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBvc3NpYmxlQXJnVHlwZXMgPSBhcmd1bWVudFR5cGVzTGlzdFtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBwYXJhbVR5cGUgPSB0eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihiZXN0T3ZlcmxvYWQuZ2V0UGFyYW1ldGVycygpW2luZGV4XSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFyZ1R5cGVNYXRjaCA9IHBvc3NpYmxlQXJnVHlwZXMuZmluZChhcmdUeXBlID0+IHRoaXMudHlwZXNBcmVFcXVhbChhcmdUeXBlLCBwYXJhbVR5cGUpKTtcblxuICAgICAgICAgICAgaWYgKGFyZ1R5cGVNYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIEV4YWN0IG1hdGNoLCB1c2UgYXJndW1lbnQgYXMgaXNcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJnLmdldEZ1bGxUZXh0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBvc3NpYmxlQXJnVHlwZXMuc29tZShhcmdUeXBlID0+IHRoaXMuaXNDYXN0YWJsZShhcmdUeXBlLCBwYXJhbVR5cGUpKSkge1xuICAgICAgICAgICAgICAgIC8vIENhc3QgYXJndW1lbnQgdG8gdGhlIHBhcmFtZXRlciB0eXBlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAoJHthcmcuZ2V0RnVsbFRleHQoKX0pIGFzICR7cGFyYW1UeXBlLmdldFRleHQoKX1gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDYW5ub3QgY2FzdCwgYnV0IHByb2NlZWQgd2l0aCBjYXN0aW5nIHRvIHBhcmFtZXRlciB0eXBlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAoJHthcmcuZ2V0RnVsbFRleHQoKX0pIGFzICR7cGFyYW1UeXBlLmdldFRleHQoKX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJbmNsdWRlIHRoZSBvYmplY3QgYWNjZXNzIGluIHRoZSBuZXcgbWV0aG9kIGNhbGxcbiAgICAgICAgbGV0IG5ld0V4cHJlc3Npb25UZXh0OiBzdHJpbmc7XG4gICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RUZXh0ID0gZXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCkuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgbmV3RXhwcmVzc2lvblRleHQgPSBgJHtvYmplY3RUZXh0fS4ke21ldGhvZFN3YXBWYWx1ZX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3RXhwcmVzc2lvblRleHQgPSBtZXRob2RTd2FwVmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdDYWxsRXhwcmVzc2lvblRleHQgPSBgLy8gQHRzLWlnbm9yZVxcbiR7bmV3RXhwcmVzc2lvblRleHR9KCR7bmV3QXJndW1lbnRzLmpvaW4oJywgJyl9KWA7XG5cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgb3JpZ2luYWwgY2FsbCB3aXRoIHRoZSBuZXcgY2FsbFxuICAgICAgICBjb25zdCBuZXdOb2RlID0gY2FsbEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KG5ld0NhbGxFeHByZXNzaW9uVGV4dCk7XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbmZlclBvc3NpYmxlVHlwZXMoYXJnOiBOb2RlLCB0eXBlQ2hlY2tlcjogVHlwZUNoZWNrZXIsIGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbik6IFR5cGVbXSB7XG4gICAgICAgIGNvbnN0IHR5cGVzOiBUeXBlW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJnVHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGFyZyk7XG5cbiAgICAgICAgbGV0IGluZmVycmVkVHlwZU5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gZ2V0IHRoZSBudW1lcmljIGxpdGVyYWwgaW5mb1xuICAgICAgICBjb25zdCBudW1lcmljSW5mbyA9IHRoaXMuZ2V0TnVtZXJpY1ZhbHVlKGFyZywgY2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBpZiAobnVtZXJpY0luZm8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5mZXJyZWRUeXBlTmFtZXMgPSB0aGlzLmluZmVyVHlwZXNGcm9tTnVtZXJpY0luZm8obnVtZXJpY0luZm8pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBhcmd1bWVudCdzIHR5cGVcbiAgICAgICAgICAgIGNvbnN0IGJyYW5kZWRUeXBlcyA9IHRoaXMuZ2V0QnJhbmRlZFR5cGVzKGFyZ1R5cGUsIHR5cGVDaGVja2VyKTtcbiAgICAgICAgICAgIGlmIChicmFuZGVkVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHR5cGVzLnB1c2goLi4uYnJhbmRlZFR5cGVzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc051bWJlclR5cGUoYXJnVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIGFsbCBudW1iZXIgdHlwZXNcbiAgICAgICAgICAgICAgICBpbmZlcnJlZFR5cGVOYW1lcyA9IFsnYnl0ZScsICdzYnl0ZScsICdzaG9ydCcsICd1c2hvcnQnLCAnaW50JywgJ3VpbnQnLCAnZmxvYXQnLCAnZG91YmxlJ107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR5cGVzLnB1c2goYXJnVHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydCB0eXBlIG5hbWVzIHRvIFR5cGUgb2JqZWN0c1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGVOYW1lIG9mIGluZmVycmVkVHlwZU5hbWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5nZXRUeXBlQnlOYW1lKHR5cGVOYW1lLCB0eXBlQ2hlY2tlcik7XG4gICAgICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgICAgIHR5cGVzLnB1c2godHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHlwZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROdW1lcmljVmFsdWUoYXJnOiBOb2RlLCBjYWxsRXhwcmVzc2lvbjogQ2FsbEV4cHJlc3Npb24pOiBOdW1lcmljTGl0ZXJhbEluZm8gfCB1bmRlZmluZWQge1xuICAgICAgICAvLyBIYW5kbGUgbnVtZXJpYyBsaXRlcmFscyBhbmQgbmVnYXRpdmUgbnVtYmVyc1xuICAgICAgICBjb25zdCBudW1lcmljTGl0ZXJhbEluZm8gPSB0aGlzLmdldE51bWVyaWNMaXRlcmFsSW5mbyhhcmcpO1xuICAgICAgICBpZiAobnVtZXJpY0xpdGVyYWxJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljTGl0ZXJhbEluZm87XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgdmFyaWFibGVzIGFuZCBwcm9wZXJ0aWVzIGJ5IHBlcmZvcm1pbmcgZmxvdyBhbmFseXNpc1xuICAgICAgICBpZiAoTm9kZS5pc0lkZW50aWZpZXIoYXJnKSB8fCBOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGFyZykpIHtcbiAgICAgICAgICAgIGNvbnN0IHN5bWJvbCA9IGFyZy5nZXRTeW1ib2woKTtcbiAgICAgICAgICAgIGlmIChzeW1ib2wpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRlY2xhcmF0aW9ucyAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWNsID0gZGVjbGFyYXRpb25zWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTm9kZS5pc1ZhcmlhYmxlRGVjbGFyYXRpb24oZGVjbCkgfHwgTm9kZS5pc1Byb3BlcnR5RGVjbGFyYXRpb24oZGVjbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gZmxvdyBhbmFseXNpcyB0byBnZXQgdGhlIHZhcmlhYmxlJ3MgdmFsdWUgYXQgdGhlIHBvaW50IG9mIHVzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUluZm8gPSB0aGlzLnBlcmZvcm1GbG93QW5hbHlzaXMoc3ltYm9sLCBkZWNsLCBjYWxsRXhwcmVzc2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlSW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwZXJmb3JtRmxvd0FuYWx5c2lzKFxuICAgICAgICBzeW1ib2w6IFN5bWJvbCxcbiAgICAgICAgZGVjbGFyYXRpb246IFZhcmlhYmxlRGVjbGFyYXRpb24gfCBQcm9wZXJ0eURlY2xhcmF0aW9uLFxuICAgICAgICB1c2FnZU5vZGU6IE5vZGVcbiAgICApOiBOdW1lcmljTGl0ZXJhbEluZm8gfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgY3VycmVudFZhbHVlSW5mbzogTnVtZXJpY0xpdGVyYWxJbmZvIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIEZpcnN0LCBjaGVjayBpZiB0aGUgdmFyaWFibGUvcHJvcGVydHkgaGFzIGFuIGluaXRpYWxpemVyXG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVyID0gZGVjbGFyYXRpb24uZ2V0SW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgaWYgKGluaXRpYWxpemVyKSB7XG4gICAgICAgICAgICBjb25zdCBpbml0VmFsdWVJbmZvID0gdGhpcy5nZXROdW1lcmljVmFsdWVGcm9tRXhwcmVzc2lvbihpbml0aWFsaXplciwgc3ltYm9sLCBkZWNsYXJhdGlvbiwgdXNhZ2VOb2RlKTtcbiAgICAgICAgICAgIGlmIChpbml0VmFsdWVJbmZvKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IGluaXRWYWx1ZUluZm87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIHRoZSBtZXRob2Qgd2hlcmUgdGhlIHVzYWdlIG9jY3Vyc1xuICAgICAgICBjb25zdCBtZXRob2REZWNsYXJhdGlvbiA9IHVzYWdlTm9kZS5nZXRGaXJzdEFuY2VzdG9yQnlLaW5kKFN5bnRheEtpbmQuTWV0aG9kRGVjbGFyYXRpb24pO1xuICAgICAgICBpZiAoIW1ldGhvZERlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFZhbHVlSW5mbzsgLy8gQ2Fubm90IHByb2NlZWQgd2l0aG91dCBtZXRob2QgY29udGV4dFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGVtZW50cyA9IG1ldGhvZERlY2xhcmF0aW9uLmdldFN0YXRlbWVudHMoKSB8fCBbXTtcblxuICAgICAgICBsZXQgdHJhY2tpbmcgPSB0cnVlOyAvLyBTaW5jZSB3ZSBvbmx5IGNhcmUgYWJvdXQgdGhlIG1ldGhvZCBzY29wZSwgd2UgY2FuIHN0YXJ0IHRyYWNraW5nIGltbWVkaWF0ZWx5XG5cbiAgICAgICAgY29uc3QgdXNhZ2VTdGFydCA9IHVzYWdlTm9kZS5nZXRTdGFydCgpO1xuXG4gICAgICAgIGZvciAoY29uc3Qgc3RtdCBvZiBzdGF0ZW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoc3RtdC5nZXRTdGFydCgpID4gdXNhZ2VTdGFydCkge1xuICAgICAgICAgICAgICAgIC8vIFJlYWNoZWQgdGhlIHVzYWdlIHBvaW50XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0cmFja2luZykge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBhc3NpZ25tZW50cyB0byB0aGUgdmFyaWFibGUvcHJvcGVydHlcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25tZW50cyA9IHN0bXQuZ2V0RGVzY2VuZGFudHMoKS5maWx0ZXIobm9kZSA9PlxuICAgICAgICAgICAgICAgICAgICBOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihub2RlKSB8fFxuICAgICAgICAgICAgICAgICAgICBOb2RlLmlzUHJlZml4VW5hcnlFeHByZXNzaW9uKG5vZGUpIHx8XG4gICAgICAgICAgICAgICAgICAgIE5vZGUuaXNQb3N0Zml4VW5hcnlFeHByZXNzaW9uKG5vZGUpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXNzaWdubWVudCBvZiBhc3NpZ25tZW50cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24oYXNzaWdubWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yS2luZCA9IGFzc2lnbm1lbnQuZ2V0T3BlcmF0b3JUb2tlbigpLmdldEtpbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhc3NpZ25tZW50LmdldExlZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYXNzaWdubWVudC5nZXRSaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0Fzc2lnbm1lbnRUb1N5bWJvbChsZWZ0LCBzeW1ib2wpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yS2luZCA9PT0gU3ludGF4S2luZC5FcXVhbHNUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW1wbGUgYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUluZm8gPSB0aGlzLmdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHZhbHVlSW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeW50YXhLaW5kLlBsdXNFcXVhbHNUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5bnRheEtpbmQuTWludXNFcXVhbHNUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5bnRheEtpbmQuQXN0ZXJpc2tFcXVhbHNUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5bnRheEtpbmQuU2xhc2hFcXVhbHNUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN5bnRheEtpbmQuUGVyY2VudEVxdWFsc1Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmluY2x1ZGVzKG9wZXJhdG9yS2luZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcG91bmQgYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZUluZm8gPSB0aGlzLmdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzYWdlTm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlSW5mbyAmJiBjdXJyZW50VmFsdWVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRWYWx1ZUluZm8gPSB0aGlzLmV2YWx1YXRlQ29tcG91bmRBc3NpZ25tZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yS2luZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlSW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRWYWx1ZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvID0gcmVzdWx0VmFsdWVJbmZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVJbmZvID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChOb2RlLmlzUHJlZml4VW5hcnlFeHByZXNzaW9uKGFzc2lnbm1lbnQpIHx8IE5vZGUuaXNQb3N0Zml4VW5hcnlFeHByZXNzaW9uKGFzc2lnbm1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRvcktpbmQgPSBhc3NpZ25tZW50LmdldE9wZXJhdG9yVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhbmQgPSBhc3NpZ25tZW50LmdldE9wZXJhbmQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBc3NpZ25tZW50VG9TeW1ib2wob3BlcmFuZCwgc3ltYm9sKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluY3JlbWVudCBvciBkZWNyZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFZhbHVlSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVsdGEgPSBvcGVyYXRvcktpbmQgPT09IFN5bnRheEtpbmQuUGx1c1BsdXNUb2tlbiA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjdXJyZW50VmFsdWVJbmZvLnZhbHVlICsgZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNEZWNpbWFsOiBjdXJyZW50VmFsdWVJbmZvLmhhc0RlY2ltYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlSW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3VycmVudFZhbHVlSW5mbztcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQXNzaWdubWVudFRvU3ltYm9sKG5vZGU6IE5vZGUsIHN5bWJvbDogU3ltYm9sKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgJ3RoaXMudidcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBub2RlLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgIGlmIChOb2RlLmlzVGhpc0V4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0U3ltYm9sID0gbm9kZS5nZXROYW1lTm9kZSgpLmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsZWZ0U3ltYm9sID09PSBzeW1ib2w7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoTm9kZS5pc0lkZW50aWZpZXIobm9kZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRTeW1ib2wgPSBub2RlLmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgcmV0dXJuIGxlZnRTeW1ib2wgPT09IHN5bWJvbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROdW1lcmljVmFsdWVGcm9tRXhwcmVzc2lvbihcbiAgICAgICAgZXhwcjogTm9kZSxcbiAgICAgICAgc3ltYm9sOiBTeW1ib2wsXG4gICAgICAgIGRlY2xhcmF0aW9uOiBWYXJpYWJsZURlY2xhcmF0aW9uIHwgUHJvcGVydHlEZWNsYXJhdGlvbixcbiAgICAgICAgdXNhZ2VOb2RlOiBOb2RlLFxuICAgICAgICBjdXJyZW50VmFsdWVJbmZvPzogTnVtZXJpY0xpdGVyYWxJbmZvXG4gICAgKTogTnVtZXJpY0xpdGVyYWxJbmZvIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKE5vZGUuaXNOdW1lcmljTGl0ZXJhbChleHByKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TnVtZXJpY0xpdGVyYWxJbmZvKGV4cHIpO1xuICAgICAgICB9IGVsc2UgaWYgKE5vZGUuaXNJZGVudGlmaWVyKGV4cHIpIHx8IE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24oZXhwcikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQXNzaWdubWVudFRvU3ltYm9sKGV4cHIsIHN5bWJvbCkpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHZhcmlhYmxlL3Byb3BlcnR5XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZUluZm87XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJldHJpZXZlIHRoZSB2YWx1ZSBvZiBhbm90aGVyIHZhcmlhYmxlIG9yIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwclN5bWJvbCA9IGV4cHIuZ2V0U3ltYm9sKCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cHJTeW1ib2wpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25zID0gZXhwclN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2xhcmF0aW9ucyAmJiBkZWNsYXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjbCA9IGRlY2xhcmF0aW9uc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOb2RlLmlzVmFyaWFibGVEZWNsYXJhdGlvbihkZWNsKSB8fCBOb2RlLmlzUHJvcGVydHlEZWNsYXJhdGlvbihkZWNsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcmZvcm1GbG93QW5hbHlzaXMoZXhwclN5bWJvbCwgZGVjbCwgZXhwcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24oZXhwcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRJbmZvID0gdGhpcy5nZXROdW1lcmljVmFsdWVGcm9tRXhwcmVzc2lvbihcbiAgICAgICAgICAgICAgICBleHByLmdldExlZnQoKSxcbiAgICAgICAgICAgICAgICBzeW1ib2wsXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb24sXG4gICAgICAgICAgICAgICAgdXNhZ2VOb2RlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCByaWdodEluZm8gPSB0aGlzLmdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgIGV4cHIuZ2V0UmlnaHQoKSxcbiAgICAgICAgICAgICAgICBzeW1ib2wsXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb24sXG4gICAgICAgICAgICAgICAgdXNhZ2VOb2RlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUluZm9cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChsZWZ0SW5mbyAmJiByaWdodEluZm8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRvcktpbmQgPSBleHByLmdldE9wZXJhdG9yVG9rZW4oKS5nZXRLaW5kKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVCaW5hcnlPcGVyYXRpb24ob3BlcmF0b3JLaW5kLCBsZWZ0SW5mbywgcmlnaHRJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBldmFsdWF0ZUNvbXBvdW5kQXNzaWdubWVudChcbiAgICAgICAgb3BlcmF0b3JLaW5kOiBTeW50YXhLaW5kLFxuICAgICAgICBsZWZ0SW5mbzogTnVtZXJpY0xpdGVyYWxJbmZvLFxuICAgICAgICByaWdodEluZm86IE51bWVyaWNMaXRlcmFsSW5mb1xuICAgICk6IE51bWVyaWNMaXRlcmFsSW5mbyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yTWFwOiB7IFtrZXk6IG51bWJlcl06IFN5bnRheEtpbmQgfSA9IHtcbiAgICAgICAgICAgIFtTeW50YXhLaW5kLlBsdXNFcXVhbHNUb2tlbl06IFN5bnRheEtpbmQuUGx1c1Rva2VuLFxuICAgICAgICAgICAgW1N5bnRheEtpbmQuTWludXNFcXVhbHNUb2tlbl06IFN5bnRheEtpbmQuTWludXNUb2tlbixcbiAgICAgICAgICAgIFtTeW50YXhLaW5kLkFzdGVyaXNrRXF1YWxzVG9rZW5dOiBTeW50YXhLaW5kLkFzdGVyaXNrVG9rZW4sXG4gICAgICAgICAgICBbU3ludGF4S2luZC5TbGFzaEVxdWFsc1Rva2VuXTogU3ludGF4S2luZC5TbGFzaFRva2VuLFxuICAgICAgICAgICAgW1N5bnRheEtpbmQuUGVyY2VudEVxdWFsc1Rva2VuXTogU3ludGF4S2luZC5QZXJjZW50VG9rZW4sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJpbmFyeU9wZXJhdG9yS2luZCA9IG9wZXJhdG9yTWFwW29wZXJhdG9yS2luZF07XG4gICAgICAgIGlmIChiaW5hcnlPcGVyYXRvcktpbmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVCaW5hcnlPcGVyYXRpb24oYmluYXJ5T3BlcmF0b3JLaW5kLCBsZWZ0SW5mbywgcmlnaHRJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgZXZhbHVhdGVCaW5hcnlPcGVyYXRpb24oXG4gICAgICAgIG9wZXJhdG9yS2luZDogU3ludGF4S2luZCxcbiAgICAgICAgbGVmdEluZm86IE51bWVyaWNMaXRlcmFsSW5mbyxcbiAgICAgICAgcmlnaHRJbmZvOiBOdW1lcmljTGl0ZXJhbEluZm9cbiAgICApOiBOdW1lcmljTGl0ZXJhbEluZm8gfCB1bmRlZmluZWQge1xuICAgICAgICBsZXQgcmVzdWx0VmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGhhc0RlY2ltYWwgPSBsZWZ0SW5mby5oYXNEZWNpbWFsIHx8IHJpZ2h0SW5mby5oYXNEZWNpbWFsO1xuXG4gICAgICAgIHN3aXRjaCAob3BlcmF0b3JLaW5kKSB7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuUGx1c1Rva2VuOlxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0gbGVmdEluZm8udmFsdWUgKyByaWdodEluZm8udmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuTWludXNUb2tlbjpcbiAgICAgICAgICAgICAgICByZXN1bHRWYWx1ZSA9IGxlZnRJbmZvLnZhbHVlIC0gcmlnaHRJbmZvLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFzdGVyaXNrVG9rZW46XG4gICAgICAgICAgICAgICAgcmVzdWx0VmFsdWUgPSBsZWZ0SW5mby52YWx1ZSAqIHJpZ2h0SW5mby52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5TbGFzaFRva2VuOlxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0gbGVmdEluZm8udmFsdWUgLyByaWdodEluZm8udmFsdWU7XG4gICAgICAgICAgICAgICAgaGFzRGVjaW1hbCA9IHRydWU7IC8vIERpdmlzaW9uIGNhbiByZXN1bHQgaW4gYSBkZWNpbWFsXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuUGVyY2VudFRva2VuOlxuICAgICAgICAgICAgICAgIHJlc3VsdFZhbHVlID0gbGVmdEluZm8udmFsdWUgJSByaWdodEluZm8udmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogcmVzdWx0VmFsdWUsIGhhc0RlY2ltYWx9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE51bWVyaWNMaXRlcmFsSW5mbyhhcmc6IE5vZGUpOiBOdW1lcmljTGl0ZXJhbEluZm8gfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoTm9kZS5pc051bWVyaWNMaXRlcmFsKGFyZykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhcmcuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIodGV4dCk7XG4gICAgICAgICAgICBjb25zdCBoYXNEZWNpbWFsID0gdGV4dC5pbmNsdWRlcygnLicpO1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZSwgaGFzRGVjaW1hbH07XG4gICAgICAgIH0gZWxzZSBpZiAoTm9kZS5pc1ByZWZpeFVuYXJ5RXhwcmVzc2lvbihhcmcpICYmIGFyZy5nZXRPcGVyYXRvclRva2VuKCkgPT09IFN5bnRheEtpbmQuTWludXNUb2tlbikge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmFuZCA9IGFyZy5nZXRPcGVyYW5kKCk7XG4gICAgICAgICAgICBpZiAoTm9kZS5pc051bWVyaWNMaXRlcmFsKG9wZXJhbmQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG9wZXJhbmQuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gLU51bWJlcih0ZXh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNEZWNpbWFsID0gdGV4dC5pbmNsdWRlcygnLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7dmFsdWUsIGhhc0RlY2ltYWx9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbmZlclR5cGVzRnJvbU51bWVyaWNJbmZvKGluZm86IE51bWVyaWNMaXRlcmFsSW5mbyk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3Qge3ZhbHVlLCBoYXNEZWNpbWFsfSA9IGluZm87XG4gICAgICAgIGNvbnN0IHR5cGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICAgICAgaWYgKCFoYXNEZWNpbWFsKSB7XG4gICAgICAgICAgICAvLyBPcmlnaW5hbCBsaXRlcmFsIGRpZCBub3QgaGF2ZSBhIGRlY2ltYWwgcG9pbnQ7IHRyZWF0IGFzIGludGVnZXJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAtMjE0NzQ4MzY0OCAmJiB2YWx1ZSA8PSAyMTQ3NDgzNjQ3KSB7XG4gICAgICAgICAgICAgICAgdHlwZXMuYWRkKCdpbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAtMzI3NjggJiYgdmFsdWUgPD0gMzI3NjcpIHtcbiAgICAgICAgICAgICAgICB0eXBlcy5hZGQoJ3Nob3J0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gLTEyOCAmJiB2YWx1ZSA8PSAxMjcpIHtcbiAgICAgICAgICAgICAgICB0eXBlcy5hZGQoJ3NieXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAyNTUpIHtcbiAgICAgICAgICAgICAgICB0eXBlcy5hZGQoJ2J5dGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDY1NTM1KSB7XG4gICAgICAgICAgICAgICAgdHlwZXMuYWRkKCd1c2hvcnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDQyOTQ5NjcyOTUpIHtcbiAgICAgICAgICAgICAgICB0eXBlcy5hZGQoJ3VpbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9yaWdpbmFsIGxpdGVyYWwgaGFkIGEgZGVjaW1hbCBwb2ludDsgdHJlYXQgYXMgZmxvYXRcbiAgICAgICAgICAgIHR5cGVzLmFkZCgnZmxvYXQnKTtcbiAgICAgICAgICAgIHR5cGVzLmFkZCgnZG91YmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0eXBlcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc051bWJlclR5cGUodHlwZTogVHlwZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB0eXBlVGV4dCA9IHRoaXMuY2xlYW5UeXBlVGV4dCh0eXBlLmdldFRleHQoKSk7XG4gICAgICAgIHJldHVybiB0eXBlVGV4dCA9PT0gJ251bWJlcic7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlQnlOYW1lKHR5cGVOYW1lOiBzdHJpbmcsIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlcik6IFR5cGUgfCB1bmRlZmluZWQge1xuICAgICAgICAvLyBSZXNvbHZlIHRoZSBzeW1ib2wgZm9yIHRoZSB0eXBlIG5hbWUgaW4gdGhlIGdsb2JhbCBzY29wZVxuICAgICAgICBjb25zdCBzeW1ib2wgPSB0eXBlQ2hlY2tlci5yZXNvbHZlTmFtZSh0eXBlTmFtZSwgdW5kZWZpbmVkLCBTeW1ib2xGbGFncy5BbGwsIGZhbHNlKTtcblxuICAgICAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEdsb2JhbCB0eXBlICcke3R5cGVOYW1lfScgbm90IGZvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgdHlwZSBmcm9tIHRoZSBzeW1ib2xcbiAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVDaGVja2VyLmdldERlY2xhcmVkVHlwZU9mU3ltYm9sKHN5bWJvbCk7XG5cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZWxlY3RCZXN0T3ZlcmxvYWQoXG4gICAgICAgIG92ZXJsb2FkczogTWV0aG9kRGVjbGFyYXRpb25bXSxcbiAgICAgICAgYXJndW1lbnRUeXBlc0xpc3Q6IFR5cGVbXVtdLFxuICAgICAgICB0eXBlQ2hlY2tlcjogVHlwZUNoZWNrZXJcbiAgICApOiBNZXRob2REZWNsYXJhdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBiZXN0T3ZlcmxvYWQ6IE1ldGhvZERlY2xhcmF0aW9uIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgaGlnaGVzdFNjb3JlID0gLTE7XG5cbiAgICAgICAgZm9yIChjb25zdCBvdmVybG9hZCBvZiBvdmVybG9hZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gdGhpcy5zY29yZU92ZXJsb2FkKG92ZXJsb2FkLCBhcmd1bWVudFR5cGVzTGlzdCwgdHlwZUNoZWNrZXIpO1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gaGlnaGVzdFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgYmVzdE92ZXJsb2FkID0gb3ZlcmxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYmVzdE92ZXJsb2FkO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2NvcmVPdmVybG9hZChcbiAgICAgICAgb3ZlcmxvYWQ6IE1ldGhvZERlY2xhcmF0aW9uLFxuICAgICAgICBhcmd1bWVudFR5cGVzTGlzdDogVHlwZVtdW10sXG4gICAgICAgIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlclxuICAgICk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBvdmVybG9hZC5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLmxlbmd0aCAhPT0gYXJndW1lbnRUeXBlc0xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7IC8vIERpZmZlcmVudCBudW1iZXIgb2YgYXJndW1lbnRzXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2NvcmUgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtZXRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtVHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKHBhcmFtZXRlcnNbaV0pO1xuICAgICAgICAgICAgY29uc3QgcG9zc2libGVBcmdUeXBlcyA9IGFyZ3VtZW50VHlwZXNMaXN0W2ldO1xuXG4gICAgICAgICAgICBsZXQgYXJnU2NvcmUgPSAtMTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRUeXBlKHBhcmFtVHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjb25zdCBhcmdUeXBlIG9mIHBvc3NpYmxlQXJnVHlwZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlc0FyZUVxdWFsKGFyZ1R5cGUsIHBhcmFtVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhhY3QgdHlwZSBtYXRjaFxuICAgICAgICAgICAgICAgICAgICBhcmdTY29yZSA9IE1hdGgubWF4KGFyZ1Njb3JlLCAyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNDYXN0YWJsZShhcmdUeXBlLCBwYXJhbVR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFR5cGVzIGFyZSBjYXN0YWJsZVxuICAgICAgICAgICAgICAgICAgICBhcmdTY29yZSA9IE1hdGgubWF4KGFyZ1Njb3JlLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcmdTY29yZSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBObyBtYXRjaGluZyBvciBjYXN0YWJsZSB0eXBlIGZvdW5kIGZvciB0aGlzIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29yZSArPSBhcmdTY29yZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVmFsaWRUeXBlKHR5cGU6IFR5cGUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHR5cGUuaXNUeXBlUGFyYW1ldGVyKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGVUZXh0ID0gdGhpcy5jbGVhblR5cGVUZXh0KHR5cGUuZ2V0VGV4dCgpKTtcblxuICAgICAgICBjb25zdCB2YWxpZFNjb3JpbmdUeXBlczogc3RyaW5nW10gPSBbXG4gICAgICAgICAgICBcImJ5dGVcIixcbiAgICAgICAgICAgIFwic2J5dGVcIixcbiAgICAgICAgICAgIFwic2hvcnRcIixcbiAgICAgICAgICAgIFwidXNob3J0XCIsXG4gICAgICAgICAgICBcImludFwiLFxuICAgICAgICAgICAgXCJ1aW50XCIsXG4gICAgICAgICAgICBcImZsb2F0XCIsXG4gICAgICAgICAgICBcImRvdWJsZVwiLFxuICAgICAgICAgICAgXCJudW1iZXJcIlxuICAgICAgICBdXG5cbiAgICAgICAgcmV0dXJuIHZhbGlkU2NvcmluZ1R5cGVzLmluY2x1ZGVzKHR5cGVUZXh0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHR5cGVzQXJlRXF1YWwodHlwZTE6IFR5cGUsIHR5cGUyOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHR5cGUxVGV4dCA9IHRoaXMuY2xlYW5UeXBlVGV4dCh0eXBlMS5nZXRUZXh0KCkpO1xuICAgICAgICBjb25zdCB0eXBlMlRleHQgPSB0aGlzLmNsZWFuVHlwZVRleHQodHlwZTIuZ2V0VGV4dCgpKTtcbiAgICAgICAgcmV0dXJuIHR5cGUxVGV4dCA9PT0gdHlwZTJUZXh0O1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNDYXN0YWJsZShmcm9tVHlwZTogVHlwZSwgdG9UeXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNhc3RhYmlsaXR5TWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZ1tdIH0gPSB7XG4gICAgICAgICAgICBieXRlOiBbJ3Nob3J0JywgJ3VzaG9ydCcsICdpbnQnLCAndWludCcsICdmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgICAgICBzYnl0ZTogWydzaG9ydCcsICdpbnQnLCAnZmxvYXQnLCAnZG91YmxlJywgJ251bWJlciddLFxuICAgICAgICAgICAgc2hvcnQ6IFsnaW50JywgJ2Zsb2F0JywgJ2RvdWJsZScsICdudW1iZXInXSxcbiAgICAgICAgICAgIHVzaG9ydDogWydpbnQnLCAndWludCcsICdmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgICAgICBpbnQ6IFsnZmxvYXQnLCAnZG91YmxlJywgJ251bWJlciddLFxuICAgICAgICAgICAgdWludDogWydmbG9hdCcsICdkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgICAgICBmbG9hdDogWydkb3VibGUnLCAnbnVtYmVyJ10sXG4gICAgICAgICAgICBkb3VibGU6IFsnbnVtYmVyJ10sXG4gICAgICAgICAgICBudW1iZXI6IFsnYnl0ZScsICdzYnl0ZScsICdzaG9ydCcsICd1c2hvcnQnLCAnaW50JywgJ3VpbnQnLCAnZmxvYXQnLCAnZG91YmxlJ10sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZnJvbVR5cGVOYW1lID0gdGhpcy5jbGVhblR5cGVUZXh0KGZyb21UeXBlLmdldFRleHQoKSk7XG4gICAgICAgIGNvbnN0IHRvVHlwZU5hbWUgPSB0aGlzLmNsZWFuVHlwZVRleHQodG9UeXBlLmdldFRleHQoKSk7XG5cbiAgICAgICAgcmV0dXJuIGNhc3RhYmlsaXR5TWFwW2Zyb21UeXBlTmFtZV0/LmluY2x1ZGVzKHRvVHlwZU5hbWUpID8/IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYW5UeXBlVGV4dCh0eXBlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gUmVtb3ZlIGJyYW5kaW5nIGFuZCBleHRyYSBzcGFjZXNcbiAgICAgICAgcmV0dXJuIHR5cGVUZXh0LnJlcGxhY2UoLyZcXHMqXFx7W159XSpcXH0vLCAnJykudHJpbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QnJhbmRlZFR5cGVzKHR5cGU6IFR5cGUsIHR5cGVDaGVja2VyOiBUeXBlQ2hlY2tlcik6IFR5cGVbXSB7XG4gICAgICAgIGNvbnN0IHR5cGVzOiBUeXBlW10gPSBbXTtcblxuICAgICAgICBjb25zdCB0eXBlVGV4dCA9IHR5cGUuZ2V0VGV4dCgpO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBicmFuZGVkIHR5cGVzIGJ5IGxvb2tpbmcgZm9yICcmIHsgX19icmFuZD86IHVuZGVmaW5lZCB9J1xuICAgICAgICBjb25zdCBtYXRjaCA9IHR5cGVUZXh0Lm1hdGNoKC9udW1iZXJcXHMqJlxccypcXHtcXHMqX18oW2EtekEtWl0rKUJyYW5kXFw/Olxccyp1bmRlZmluZWRcXHMqXFx9Lyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgYnJhbmQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gYnJhbmQ7XG5cbiAgICAgICAgICAgIGNvbnN0IGJyYW5kZWRUeXBlID0gdGhpcy5nZXRUeXBlQnlOYW1lKHR5cGVOYW1lLCB0eXBlQ2hlY2tlcik7XG4gICAgICAgICAgICBpZiAoYnJhbmRlZFR5cGUpIHtcbiAgICAgICAgICAgICAgICB0eXBlcy5wdXNoKGJyYW5kZWRUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0eXBlcztcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFN5bnRheEtpbmQsXG4gICAgTm9kZSxcbiAgICBCaW5hcnlFeHByZXNzaW9uLFxuICAgIFByZWZpeFVuYXJ5RXhwcmVzc2lvbixcbiAgICBQb3N0Zml4VW5hcnlFeHByZXNzaW9uLFxuICAgIEV4cHJlc3Npb24sXG59IGZyb20gJ3RzLW1vcnBoJztcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcbmltcG9ydCB7XG4gICAgZ2V0SXNVbml0eUFQSVR5cGUsXG4gICAgZ2V0T3BlcmF0b3JNZXRob2ROYW1lLFxuICAgIGdldFVuYXJ5T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlLFxufSBmcm9tIFwiLi4vQ29tcGlsZXJVdGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgT3BlcmF0b3JPdmVybG9hZGluZ1RyYW5zZm9ybWVyIGltcGxlbWVudHMgSVRyYW5zZm9ybWVyIHtcbiAgICBub2RlVHlwZXMgPSBbU3ludGF4S2luZC5CaW5hcnlFeHByZXNzaW9uLCBTeW50YXhLaW5kLlByZWZpeFVuYXJ5RXhwcmVzc2lvbiwgU3ludGF4S2luZC5Qb3N0Zml4VW5hcnlFeHByZXNzaW9uXTtcblxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgaWYgKE5vZGUuaXNCaW5hcnlFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1CaW5hcnlFeHByZXNzaW9uKG5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoTm9kZS5pc1ByZWZpeFVuYXJ5RXhwcmVzc2lvbihub2RlKSB8fCBOb2RlLmlzUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtVW5hcnlFeHByZXNzaW9uKG5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1CaW5hcnlFeHByZXNzaW9uKG5vZGU6IEJpbmFyeUV4cHJlc3Npb24sIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yVG9rZW4gPSBub2RlLmdldE9wZXJhdG9yVG9rZW4oKTtcbiAgICAgICAgY29uc3Qgb3BlcmF0b3JLaW5kID0gb3BlcmF0b3JUb2tlbi5nZXRLaW5kKCk7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yTWV0aG9kTmFtZSA9IGdldE9wZXJhdG9yTWV0aG9kTmFtZShvcGVyYXRvcktpbmQpO1xuXG4gICAgICAgIGlmIChvcGVyYXRvck1ldGhvZE5hbWUpIHtcblxuICAgICAgICAgICAgLy8gSWdub3JlIHRyYW5zZm9ybWF0aW9ucyBmb3IgJz09IG51bGwnIGFuZCAnPT0gdW5kZWZpbmVkJ1xuICAgICAgICAgICAgaWYgKG9wZXJhdG9yS2luZCA9PT0gU3ludGF4S2luZC5FcXVhbHNFcXVhbHNFcXVhbHNUb2tlblxuICAgICAgICAgICAgICAgIHx8IG9wZXJhdG9yS2luZCA9PT0gU3ludGF4S2luZC5FcXVhbHNFcXVhbHNUb2tlblxuICAgICAgICAgICAgICAgIHx8IG9wZXJhdG9yS2luZCA9PT0gU3ludGF4S2luZC5FeGNsYW1hdGlvbkVxdWFsc0VxdWFsc1Rva2VuXG4gICAgICAgICAgICAgICAgfHwgb3BlcmF0b3JLaW5kID09IFN5bnRheEtpbmQuRXhjbGFtYXRpb25FcXVhbHNUb2tlbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy51bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldFJpZ2h0KCkpO1xuICAgICAgICAgICAgICAgIGlmIChOb2RlLmlzTnVsbExpdGVyYWwocmlnaHQpIHx8IE5vZGUuaXNVbmRlZmluZWRLZXl3b3JkKHJpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMudW53cmFwUGFyZW50aGVzaXplZEV4cHJlc3Npb24obm9kZS5nZXRMZWZ0KCkpO1xuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLnVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGUuZ2V0UmlnaHQoKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkTGVmdCA9IHRoaXMudHJhbnNmb3JtTm9kZUlmTmVlZGVkKGxlZnQsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZFJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1Ob2RlSWZOZWVkZWQocmlnaHQsIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG5cbiAgICAgICAgICAgIGxldCBsZWZ0VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0cmFuc2Zvcm1lZExlZnQpO1xuICAgICAgICAgICAgbGV0IHJpZ2h0VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0cmFuc2Zvcm1lZFJpZ2h0KTtcblxuICAgICAgICAgICAgaWYgKHJpZ2h0VHlwZS5pc0xpdGVyYWwoKSkge1xuICAgICAgICAgICAgICAgIHJpZ2h0VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRCYXNlVHlwZU9mTGl0ZXJhbFR5cGUocmlnaHRUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxlZnRUeXBlLmlzTGl0ZXJhbCgpKSB7XG4gICAgICAgICAgICAgICAgbGVmdFR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0QmFzZVR5cGVPZkxpdGVyYWxUeXBlKGxlZnRUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFnZXRJc1VuaXR5QVBJVHlwZShsZWZ0VHlwZSkgJiYgIWdldElzVW5pdHlBUElUeXBlKHJpZ2h0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbGVmdFRleHQgPSB0cmFuc2Zvcm1lZExlZnQuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgcmlnaHRUZXh0ID0gdHJhbnNmb3JtZWRSaWdodC5nZXRUZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gYCR7bGVmdFR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKX0uJHtvcGVyYXRvck1ldGhvZE5hbWV9KCR7bGVmdFRleHR9LCAke3JpZ2h0VGV4dH0pYDtcblxuICAgICAgICAgICAgLy8gSGFuZGxlIGNvbXBvdW5kIGFzc2lnbm1lbnRzICgrPSwgLT0sIGV0Yy4pXG4gICAgICAgICAgICBpZiAodGhpcy5pc0NvbXBvdW5kQXNzaWdubWVudChvcGVyYXRvcktpbmQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdE5hbWUgPSBsZWZ0LmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVpdmFsZW50T3BlcmF0b3JLaW5kID0gdGhpcy5nZXRFcXVpdmFsZW50T3BlcmF0b3JLaW5kKG9wZXJhdG9yS2luZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXF1aXZhbGVudE9wZXJhdG9yTWV0aG9kTmFtZSA9IGdldE9wZXJhdG9yTWV0aG9kTmFtZShlcXVpdmFsZW50T3BlcmF0b3JLaW5kKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVpdmFsZW50RXhwcmVzc2lvbiA9IGAke2xlZnROYW1lfSA9ICR7bGVmdFR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKX0uJHtlcXVpdmFsZW50T3BlcmF0b3JNZXRob2ROYW1lfSgke2xlZnROYW1lfSwgJHtyaWdodFRleHR9KWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUucmVwbGFjZVdpdGhUZXh0KGVxdWl2YWxlbnRFeHByZXNzaW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIHBhcmVudGhlc2VzIHRvIG1haW50YWluIG9yZGVyIG9mIG9wZXJhdGlvbnNcbiAgICAgICAgICAgIGlmIChOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbih0cmFuc2Zvcm1lZExlZnQpIHx8IE5vZGUuaXNCaW5hcnlFeHByZXNzaW9uKHRyYW5zZm9ybWVkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50aGVzaXplZE5ld1RleHQgPSBgKCR7bmV3VGV4dH0pYDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5yZXBsYWNlV2l0aFRleHQocGFyZW50aGVzaXplZE5ld1RleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbm9kZS5yZXBsYWNlV2l0aFRleHQobmV3VGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybVVuYXJ5RXhwcmVzc2lvbihub2RlOiBQcmVmaXhVbmFyeUV4cHJlc3Npb24gfCBQb3N0Zml4VW5hcnlFeHByZXNzaW9uLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBjb25zdCBvcGVyYW5kID0gdGhpcy51bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLmdldE9wZXJhbmQoKSk7XG4gICAgICAgIGNvbnN0IG9wZXJhdG9yS2luZCA9IG5vZGUuZ2V0T3BlcmF0b3JUb2tlbigpO1xuICAgICAgICBjb25zdCBvcGVyYXRvck1ldGhvZE5hbWUgPSBnZXRPcGVyYXRvck1ldGhvZE5hbWUob3BlcmF0b3JLaW5kKTtcblxuICAgICAgICBpZiAob3BlcmF0b3JNZXRob2ROYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBvcGVyYW5kVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbihvcGVyYW5kKTtcblxuICAgICAgICAgICAgaWYgKGdldFVuYXJ5T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlKG9wZXJhbmRUeXBlLCBvcGVyYXRvck1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmFuZFRleHQgPSBvcGVyYW5kLmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gYCR7b3BlcmFuZFR5cGUuZ2V0U3ltYm9sKCk/LmdldE5hbWUoKX0uJHtvcGVyYXRvck1ldGhvZE5hbWV9KCR7b3BlcmFuZFRleHR9KWA7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgcGFyZW50aGVzZXMgdG8gbWFpbnRhaW4gb3JkZXIgb2Ygb3BlcmF0aW9uc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudGhlc2l6ZWROZXdUZXh0ID0gYCgke25ld1RleHR9KWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUucmVwbGFjZVdpdGhUZXh0KHBhcmVudGhlc2l6ZWROZXdUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtTm9kZUlmTmVlZGVkKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogRXhwcmVzc2lvbiB7XG4gICAgICAgIGNvbnN0IHVud3JhcHBlZE5vZGUgPSB0aGlzLnVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGUpO1xuICAgICAgICBpZiAoTm9kZS5pc0JpbmFyeUV4cHJlc3Npb24odW53cmFwcGVkTm9kZSkgfHwgTm9kZS5pc1ByZWZpeFVuYXJ5RXhwcmVzc2lvbih1bndyYXBwZWROb2RlKSB8fCBOb2RlLmlzUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbih1bndyYXBwZWROb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtTm9kZSh1bndyYXBwZWROb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpIGFzIEV4cHJlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVud3JhcHBlZE5vZGUgYXMgRXhwcmVzc2lvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVud3JhcFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKG5vZGU6IE5vZGUpOiBOb2RlIHtcbiAgICAgICAgaWYgKE5vZGUuaXNQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudW53cmFwUGFyZW50aGVzaXplZEV4cHJlc3Npb24obm9kZS5nZXRFeHByZXNzaW9uKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNDb21wb3VuZEFzc2lnbm1lbnQob3BlcmF0b3JLaW5kOiBTeW50YXhLaW5kKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBvcGVyYXRvcktpbmQgPj0gU3ludGF4S2luZC5GaXJzdENvbXBvdW5kQXNzaWdubWVudCAmJiBvcGVyYXRvcktpbmQgPD0gU3ludGF4S2luZC5MYXN0Q29tcG91bmRBc3NpZ25tZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RXF1aXZhbGVudE9wZXJhdG9yS2luZChjb21wb3VuZE9wZXJhdG9yS2luZDogU3ludGF4S2luZCk6IFN5bnRheEtpbmQge1xuICAgICAgICBzd2l0Y2ggKGNvbXBvdW5kT3BlcmF0b3JLaW5kKSB7XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuUGx1c0VxdWFsc1Rva2VuOlxuICAgICAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLlBsdXNUb2tlbjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5NaW51c0VxdWFsc1Rva2VuOlxuICAgICAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLk1pbnVzVG9rZW47XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuQXN0ZXJpc2tFcXVhbHNUb2tlbjpcbiAgICAgICAgICAgICAgICByZXR1cm4gU3ludGF4S2luZC5Bc3Rlcmlza1Rva2VuO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLlNsYXNoRXF1YWxzVG9rZW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuU2xhc2hUb2tlbjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5QZXJjZW50RXF1YWxzVG9rZW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuUGVyY2VudFRva2VuO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkFtcGVyc2FuZEVxdWFsc1Rva2VuOlxuICAgICAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLkFtcGVyc2FuZFRva2VuO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkJhckVxdWFsc1Rva2VuOlxuICAgICAgICAgICAgICAgIHJldHVybiBTeW50YXhLaW5kLkJhclRva2VuO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkNhcmV0RXF1YWxzVG9rZW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuQ2FyZXRUb2tlbjtcbiAgICAgICAgICAgIGNhc2UgU3ludGF4S2luZC5MZXNzVGhhbkxlc3NUaGFuRXF1YWxzVG9rZW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuTGVzc1RoYW5MZXNzVGhhblRva2VuO1xuICAgICAgICAgICAgY2FzZSBTeW50YXhLaW5kLkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5FcXVhbHNUb2tlbjpcbiAgICAgICAgICAgICAgICByZXR1cm4gU3ludGF4S2luZC5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuVG9rZW47XG4gICAgICAgICAgICBjYXNlIFN5bnRheEtpbmQuR3JlYXRlclRoYW5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuRXF1YWxzVG9rZW46XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5bnRheEtpbmQuR3JlYXRlclRoYW5HcmVhdGVyVGhhbkdyZWF0ZXJUaGFuVG9rZW47XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgY29tcG91bmQgb3BlcmF0b3I6ICR7U3ludGF4S2luZFtjb21wb3VuZE9wZXJhdG9yS2luZF19YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1N5bnRheEtpbmQsIE5vZGUsIEF3YWl0RXhwcmVzc2lvbiwgVHlwZUNoZWNrZXIsIENhbGxFeHByZXNzaW9uLCBUeXBlLCBQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb259IGZyb20gJ3RzLW1vcnBoJztcbmltcG9ydCB7VHJhbnNmb3JtYXRpb25Db250ZXh0fSBmcm9tIFwiLi9UcmFuc2Zvcm1hdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7SVRyYW5zZm9ybWVyfSBmcm9tIFwiLi9JVHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIFByb21pc2VXcmFwcGVyVHJhbnNmb3JtZXIgaW1wbGVtZW50cyBJVHJhbnNmb3JtZXIge1xuICAgIG5vZGVUeXBlcyA9IFtTeW50YXhLaW5kLkF3YWl0RXhwcmVzc2lvbiwgU3ludGF4S2luZC5DYWxsRXhwcmVzc2lvbl07XG5cbiAgICB0cmFuc2Zvcm1Ob2RlKG5vZGU6IE5vZGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogTm9kZSB7XG4gICAgICAgIGNvbnN0IHR5cGVDaGVja2VyID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyO1xuXG4gICAgICAgIGlmIChOb2RlLmlzQXdhaXRFeHByZXNzaW9uKG5vZGUpKSB7XG4gICAgICAgICAgICBjb25zdCBhd2FpdEV4cHJlc3Npb24gPSBub2RlIGFzIEF3YWl0RXhwcmVzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBhd2FpdEV4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGV4cHJlc3Npb24pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb21pc2UodHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnQgPSB0aGlzLmdldFByb21pc2VUeXBlQXJndW1lbnQodHlwZSwgdHlwZUNoZWNrZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRFeHByZXNzaW9uVGV4dCA9IHR5cGVBcmd1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IGBhd2FpdCAkcHJvbWlzZSgke2V4cHJlc3Npb24uZ2V0VGV4dCgpfSkgYXMgJHt0eXBlQXJndW1lbnR9YFxuICAgICAgICAgICAgICAgICAgICA6IGBhd2FpdCAkcHJvbWlzZSgke2V4cHJlc3Npb24uZ2V0VGV4dCgpfSlgO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KGAke3dyYXBwZWRFeHByZXNzaW9uVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChOb2RlLmlzQ2FsbEV4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxFeHByZXNzaW9uID0gbm9kZSBhcyBDYWxsRXhwcmVzc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb24gPSBjYWxsRXhwcmVzc2lvbi5nZXRFeHByZXNzaW9uKCk7XG5cbiAgICAgICAgICAgIGlmIChOb2RlLmlzUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IGV4cHJlc3Npb24uZ2V0TmFtZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdEV4cHJlc3Npb24gPSBleHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24ob2JqZWN0RXhwcmVzc2lvbik7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Byb21pc2UodHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9taXNlTWV0aG9kKG1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnQgPSB0aGlzLmdldFByb21pc2VUeXBlQXJndW1lbnQodHlwZSwgdHlwZUNoZWNrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlZEV4cHJlc3Npb25UZXh0ID0gYCRwcm9taXNlKCR7b2JqZWN0RXhwcmVzc2lvbi5nZXRUZXh0KCl9KSR7Y2FsbEV4cHJlc3Npb24uZ2V0VGV4dCgpLnN1YnN0cmluZyhvYmplY3RFeHByZXNzaW9uLmdldFRleHQoKS5sZW5ndGgpfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb24ucmVwbGFjZVdpdGhUZXh0KHdyYXBwZWRFeHByZXNzaW9uVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzUHJvbWlzZSh0eXBlOiBUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHR5cGVTeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgICAgICBpZiAoIXR5cGVTeW1ib2wpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gdHlwZVN5bWJvbC5nZXROYW1lKCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHR5cGVOYW1lID09PSAnVGFzaycgfHxcbiAgICAgICAgICAgIHR5cGVOYW1lID09PSAnVGFzayQxJyB8fFxuICAgICAgICAgICAgdHlwZU5hbWUgPT09ICdVbmlUYXNrJyB8fFxuICAgICAgICAgICAgdHlwZU5hbWUgPT09ICdVbmlUYXNrJDEnIHx8XG4gICAgICAgICAgICB0eXBlTmFtZSA9PT0gJ1lpZWxkQXdhaXRhYmxlJ1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNQcm9taXNlTWV0aG9kKG1ldGhvZE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwcm9taXNlTWV0aG9kcyA9IFsndGhlbicsICdjYXRjaCcsICdmaW5hbGx5J107XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2VNZXRob2RzLmluY2x1ZGVzKG1ldGhvZE5hbWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UHJvbWlzZVR5cGVBcmd1bWVudCh0eXBlOiBUeXBlLCB0eXBlQ2hlY2tlcjogVHlwZUNoZWNrZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB0eXBlQXJndW1lbnRzID0gdHlwZS5nZXRUeXBlQXJndW1lbnRzKCk7XG4gICAgICAgIGlmICh0eXBlQXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50ID0gdHlwZUFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gdHlwZUFyZ3VtZW50LmdldFN5bWJvbCgpO1xuICAgICAgICAgICAgaWYoc3ltYm9sKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBzeW1ib2wuZ2V0TmFtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlQXJndW1lbnQuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFN5bnRheEtpbmQsIE5vZGUsIFR5cGVDaGVja2VyLCBQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24sIEJpbmFyeUV4cHJlc3Npb24gfSBmcm9tICd0cy1tb3JwaCc7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQge0lUcmFuc2Zvcm1lcn0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBSZWZUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQmluYXJ5RXhwcmVzc2lvbiwgU3ludGF4S2luZC5Qcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb25dO1xuICAgIFxuICAgIHRyYW5zZm9ybU5vZGUobm9kZTogTm9kZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBOb2RlIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBuZXdOb2RlID0gbm9kZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChOb2RlLmlzQmluYXJ5RXhwcmVzc2lvbihub2RlKSAmJiBub2RlLmdldE9wZXJhdG9yVG9rZW4oKS5nZXRLaW5kKCkgPT09IFN5bnRheEtpbmQuRXF1YWxzVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGJpbmFyeUV4cHJlc3Npb24gPSBub2RlIGFzIEJpbmFyeUV4cHJlc3Npb247XG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gYmluYXJ5RXhwcmVzc2lvbi5nZXRMZWZ0KCk7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGJpbmFyeUV4cHJlc3Npb24uZ2V0UmlnaHQoKTtcblxuICAgICAgICAgICAgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24obGVmdCkgJiYgbGVmdC5nZXROYW1lKCkgPT09ICd2YWx1ZScgJiYgdGhpcy5pc1JlZlR5cGUobGVmdC5nZXRFeHByZXNzaW9uKCksIHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZFeHByZXNzaW9uID0gbGVmdC5nZXRFeHByZXNzaW9uKCkuZ2V0VGV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlRXhwcmVzc2lvbiA9IHJpZ2h0LmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBuZXdOb2RlID0gbm9kZS5yZXBsYWNlV2l0aFRleHQoYCRzZXQoJHtyZWZFeHByZXNzaW9ufSwgJHt2YWx1ZUV4cHJlc3Npb259KWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKE5vZGUuaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24obm9kZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbiA9IG5vZGUgYXMgUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uO1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5QWNjZXNzRXhwcmVzc2lvbi5nZXROYW1lKCkgPT09ICd2YWx1ZScgJiYgdGhpcy5pc1JlZlR5cGUocHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKSwgdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZkV4cHJlc3Npb24gPSBwcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24uZ2V0RXhwcmVzc2lvbigpLmdldFRleHQoKTtcbiAgICAgICAgICAgICAgICBuZXdOb2RlID0gbm9kZS5yZXBsYWNlV2l0aFRleHQoYCR1bnJlZigke3JlZkV4cHJlc3Npb259KWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzUmVmVHlwZShub2RlOiBOb2RlLCB0eXBlQ2hlY2tlcjogVHlwZUNoZWNrZXIpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKG5vZGUpO1xuICAgICAgICBjb25zdCB0eXBlU3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICAgICAgcmV0dXJuIHR5cGVTeW1ib2wgPyB0eXBlU3ltYm9sLmdldE5hbWUoKSA9PT0gJyRSZWYnIDogZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU3ludGF4S2luZCwgTm9kZSwgQ2FsbEV4cHJlc3Npb24sIFR5cGVDaGVja2VyLCBUeXBlIH0gZnJvbSAndHMtbW9ycGgnO1xuaW1wb3J0IHtcbiAgICBjb252ZXJ0VG9Bc3NldHNSZWxhdGl2ZVBhdGgsIEdlbmllc1NjcmlwdFR5cGUsIGdldEZ1bGxUeXBlTmFtZSxcbiAgICBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUsXG4gICAgZ2V0SXNVbml0eUFQSVR5cGVcbn0gZnJvbSAnLi4vQ29tcGlsZXJVdGlscyc7XG5pbXBvcnQge1RyYW5zZm9ybWF0aW9uQ29udGV4dH0gZnJvbSBcIi4vVHJhbnNmb3JtYXRpb25Db250ZXh0XCI7XG5pbXBvcnQge0lUcmFuc2Zvcm1lcn0gZnJvbSBcIi4vSVRyYW5zZm9ybWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTY3JpcHRhYmxlT2JqZWN0Q3JlYXRlSW5zdGFuY2VUcmFuc2Zvcm1lciBpbXBsZW1lbnRzIElUcmFuc2Zvcm1lciB7XG4gICAgbm9kZVR5cGVzID0gW1N5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb25dO1xuXG4gICAgdHJhbnNmb3JtTm9kZShub2RlOiBOb2RlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IE5vZGUge1xuICAgICAgICBsZXQgbmV3Tm9kZSA9IG5vZGU7XG5cbiAgICAgICAgaWYgKE5vZGUuaXNDYWxsRXhwcmVzc2lvbihub2RlKSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbEV4cHJlc3Npb24gPSBub2RlIGFzIENhbGxFeHByZXNzaW9uO1xuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGNhbGxFeHByZXNzaW9uLmdldEV4cHJlc3Npb24oKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBjYWxsRXhwcmVzc2lvbi5nZXRUeXBlQXJndW1lbnRzKCk7XG4gICAgICAgICAgICBjb25zdCBtZXRob2RBcmd1bWVudHMgPSBjYWxsRXhwcmVzc2lvbi5nZXRBcmd1bWVudHMoKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCB8fCB0aGlzLmlzVHlwZW9mQXJndW1lbnQobWV0aG9kQXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWVOb2RlID0gZXhwcmVzc2lvbi5nZXRMYXN0Q2hpbGRCeUtpbmQoU3ludGF4S2luZC5JZGVudGlmaWVyKTtcbiAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZE5hbWVOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lTm9kZS5nZXRUZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09ICdDcmVhdGVJbnN0YW5jZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDaGlsZCA9IGV4cHJlc3Npb24uZ2V0Rmlyc3RDaGlsZCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xhc3NUeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1NjcmlwdGFibGVPYmplY3QoY2xhc3NUeXBlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5UeXBlID0gdHJhbnNmb3JtYXRpb25Db250ZXh0LnR5cGVDaGVja2VyLmdldFR5cGVBdExvY2F0aW9uKGNhbGxFeHByZXNzaW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudCA9IHR5cGVBcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZUFyZ3VtZW50VHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0eXBlQXJndW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSB0aGlzLnByb2Nlc3NUeXBlQXJndW1lbnQoY2FsbEV4cHJlc3Npb24sIHR5cGVBcmd1bWVudFR5cGUsIGZhbHNlLCBtZXRob2ROYW1lLCBmaXJzdENoaWxkLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1R5cGVvZkFyZ3VtZW50KG1ldGhvZEFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlQXJndW1lbnQgPSB0aGlzLmdldFR5cGVGcm9tVHlwZW9mQXJndW1lbnQobWV0aG9kQXJndW1lbnRzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZUFyZ3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudFR5cGUgPSB0cmFuc2Zvcm1hdGlvbkNvbnRleHQudHlwZUNoZWNrZXIuZ2V0VHlwZUF0TG9jYXRpb24odHlwZUFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZSA9IHRoaXMucHJvY2Vzc1R5cGVBcmd1bWVudChjYWxsRXhwcmVzc2lvbiwgdHlwZUFyZ3VtZW50VHlwZSwgdHJ1ZSwgbWV0aG9kTmFtZSwgZmlyc3RDaGlsZCwgcmV0dXJuVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1R5cGVvZkFyZ3VtZW50KGFyZ3M6IE5vZGVbXSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gYXJncy5sZW5ndGggPiAwICYmIGFyZ3NbMF0uZ2V0VGV4dCgpLnN0YXJ0c1dpdGgoJyR0eXBlb2YoJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUeXBlRnJvbVR5cGVvZkFyZ3VtZW50KGFyZzogTm9kZSk6IE5vZGUgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBjYWxsRXhwcmVzc2lvbiA9IGFyZy5nZXRGaXJzdENoaWxkQnlLaW5kKFN5bnRheEtpbmQuQ2FsbEV4cHJlc3Npb24pO1xuICAgICAgICBpZiAoY2FsbEV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVBcmd1bWVudCA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpWzBdO1xuICAgICAgICAgICAgaWYgKE5vZGUuaXNUeXBlTm9kZSh0eXBlQXJndW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVBcmd1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R5cGVBcmd1bWVudChjYWxsRXhwcmVzc2lvbjogQ2FsbEV4cHJlc3Npb24sIHR5cGVBcmd1bWVudFR5cGU6IFR5cGUsIGlzVHlwZU9mQXJnIDogYm9vbGVhbiwgbWV0aG9kTmFtZTogc3RyaW5nLCBmaXJzdENoaWxkOiBOb2RlLCByZXR1cm5UeXBlOiBUeXBlKTogTm9kZSB7XG4gICAgICAgIGlmIChnZXRJc1VuaXR5QVBJVHlwZSh0eXBlQXJndW1lbnRUeXBlKSkge1xuXG4gICAgICAgICAgICBpZihpc1R5cGVPZkFyZylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbEV4cHJlc3Npb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSh0eXBlQXJndW1lbnRUeXBlKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NhbGxFeHByZXNzaW9uVGV4dCA9IHRoaXMuY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uKGNhbGxFeHByZXNzaW9uLCBgJHR5cGVvZigke3R5cGVOYW1lfSlgLCBtZXRob2ROYW1lLCBmaXJzdENoaWxkLCByZXR1cm5UeXBlKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsRXhwcmVzc2lvbi5yZXBsYWNlV2l0aFRleHQobmV3Q2FsbEV4cHJlc3Npb25UZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdFR5cGUgPSBnZXRHZW5pZXNTY3JpcHRUeXBlRnJvbVR5cGUodHlwZUFyZ3VtZW50VHlwZSk7XG4gICAgICAgICAgICBpZiAoc2NyaXB0VHlwZSA9PT0gR2VuaWVzU2NyaXB0VHlwZS5TY3JpcHRhYmxlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gdGhpcy5nZXRSZWxhdGl2ZVBhdGgodHlwZUFyZ3VtZW50VHlwZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FsbEV4cHJlc3Npb25UZXh0ID0gdGhpcy5jcmVhdGVPdmVybG9hZGVkQ2FsbEV4cHJlc3Npb24oY2FsbEV4cHJlc3Npb24sIGBcIiR7cmVsYXRpdmVQYXRofVwiYCwgbWV0aG9kTmFtZSwgZmlyc3RDaGlsZCwgcmV0dXJuVHlwZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uLnJlcGxhY2VXaXRoVGV4dChuZXdDYWxsRXhwcmVzc2lvblRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGxFeHByZXNzaW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNTY3JpcHRhYmxlT2JqZWN0KHR5cGU6IFR5cGUsIHRyYW5zZm9ybWF0aW9uQ29udGV4dDogVHJhbnNmb3JtYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdHlwZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghc3ltYm9sKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgaWYgKHN5bWJvbC5nZXROYW1lKCkgPT09ICdTY3JpcHRhYmxlT2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5pbmhlcml0c0Zyb20odHlwZSwgWydTY3JpcHRhYmxlT2JqZWN0J10sIHRyYW5zZm9ybWF0aW9uQ29udGV4dCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbmhlcml0c0Zyb20odHlwZTogVHlwZSwgYmFzZU5hbWVzOiBzdHJpbmdbXSwgdHJhbnNmb3JtYXRpb25Db250ZXh0OiBUcmFuc2Zvcm1hdGlvbkNvbnRleHQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYmFzZVR5cGVzID0gdGhpcy5nZXRCYXNlVHlwZXModHlwZSwgdHJhbnNmb3JtYXRpb25Db250ZXh0KTtcbiAgICAgICAgZm9yIChjb25zdCBiYXNlVHlwZSBvZiBiYXNlVHlwZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VUeXBlTmFtZSA9IGJhc2VUeXBlLmdldFN5bWJvbCgpPy5nZXROYW1lKCk7XG4gICAgICAgICAgICBpZiAoYmFzZVR5cGVOYW1lICYmIGJhc2VOYW1lcy5pbmNsdWRlcyhiYXNlVHlwZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pbmhlcml0c0Zyb20oYmFzZVR5cGUsIGJhc2VOYW1lcywgdHJhbnNmb3JtYXRpb25Db250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEJhc2VUeXBlcyh0eXBlOiBUeXBlLCB0cmFuc2Zvcm1hdGlvbkNvbnRleHQ6IFRyYW5zZm9ybWF0aW9uQ29udGV4dCk6IFR5cGVbXSB7XG4gICAgICAgIGNvbnN0IGJhc2VUeXBlczogVHlwZVtdID0gW107XG4gICAgICAgIGNvbnN0IHN5bWJvbCA9IHR5cGUuZ2V0U3ltYm9sKCk7XG4gICAgICAgIGlmICghc3ltYm9sKSByZXR1cm4gYmFzZVR5cGVzO1xuXG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9ucyA9IHN5bWJvbC5nZXREZWNsYXJhdGlvbnMoKTtcbiAgICAgICAgaWYgKCFkZWNsYXJhdGlvbnMpIHJldHVybiBiYXNlVHlwZXM7XG5cbiAgICAgICAgZm9yIChjb25zdCBkZWNsYXJhdGlvbiBvZiBkZWNsYXJhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChOb2RlLmlzQ2xhc3NEZWNsYXJhdGlvbihkZWNsYXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZXJpdGFnZUNsYXVzZXMgPSBkZWNsYXJhdGlvbi5nZXRIZXJpdGFnZUNsYXVzZXMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGhlcml0YWdlQ2xhdXNlIG9mIGhlcml0YWdlQ2xhdXNlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlcyA9IGhlcml0YWdlQ2xhdXNlLmdldFR5cGVOb2RlcygpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR5cGVOb2RlIG9mIHR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlVHlwZSA9IHRyYW5zZm9ybWF0aW9uQ29udGV4dC50eXBlQ2hlY2tlci5nZXRUeXBlQXRMb2NhdGlvbih0eXBlTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVHlwZXMucHVzaChiYXNlVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VUeXBlcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFJlbGF0aXZlUGF0aCh0eXBlOiBUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgc3ltYm9sID0gdHlwZS5nZXRTeW1ib2woKTtcbiAgICAgICAgaWYgKCFzeW1ib2wpIHJldHVybiAnJztcblxuICAgICAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBzeW1ib2wuZ2V0RGVjbGFyYXRpb25zKCk7XG4gICAgICAgIGlmIChkZWNsYXJhdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG5cbiAgICAgICAgY29uc3Qgc291cmNlRmlsZSA9IGRlY2xhcmF0aW9uc1swXS5nZXRTb3VyY2VGaWxlKCk7XG4gICAgICAgIGNvbnN0IHNvdXJjZUZpbGVQYXRoID0gc291cmNlRmlsZS5nZXRGaWxlUGF0aCgpO1xuXG4gICAgICAgIHJldHVybiBjb252ZXJ0VG9Bc3NldHNSZWxhdGl2ZVBhdGgoc291cmNlRmlsZS5nZXREaXJlY3RvcnlQYXRoKCksIHNvdXJjZUZpbGVQYXRoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFR5cGVOYW1lKHR5cGU6IFR5cGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzeW1ib2wgPSB0eXBlLmdldFN5bWJvbCgpO1xuICAgICAgICBpZiAoc3ltYm9sKSB7XG4gICAgICAgICAgICByZXR1cm4gc3ltYm9sLmdldE5hbWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVPdmVybG9hZGVkQ2FsbEV4cHJlc3Npb24oY2FsbEV4cHJlc3Npb246IENhbGxFeHByZXNzaW9uLCB0eXBlQXJndW1lbnRUZXh0OiBzdHJpbmcsIG1ldGhvZE5hbWU6IHN0cmluZywgZmlyc3RDaGlsZDogTm9kZSwgcmV0dXJuVHlwZTogVHlwZSwgYWRkVHNJZ25vcmU6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG1ldGhvZEFyZ3VtZW50cyA9IGNhbGxFeHByZXNzaW9uLmdldEFyZ3VtZW50cygpLm1hcChhcmcgPT4gYXJnLmdldFRleHQoKSkuam9pbignLCAnKTtcbiAgICAgICAgY29uc3QgY2FzdFR5cGUgPSByZXR1cm5UeXBlLmdldFRleHQoKTtcblxuICAgICAgICBsZXQgbmV3Q2FsbCA9IGAoJHtmaXJzdENoaWxkLmdldEZ1bGxUZXh0KCl9LiR7bWV0aG9kTmFtZX0oJHt0eXBlQXJndW1lbnRUZXh0fSR7bWV0aG9kQXJndW1lbnRzID8gJywgJyArIG1ldGhvZEFyZ3VtZW50cyA6ICcnfSkgYXMgJHtjYXN0VHlwZX0pYDtcblxuICAgICAgICBpZiAoYWRkVHNJZ25vcmUpIHtcbiAgICAgICAgICAgIG5ld0NhbGwgPSBgJHtuZXdDYWxsfWA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3Q2FsbDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGxFeHByZXNzaW9uLCBNZXRob2REZWNsYXJhdGlvbiwgU291cmNlRmlsZSwgVHlwZUNoZWNrZXJ9IGZyb20gXCJ0cy1tb3JwaFwiO1xuXG5pbnRlcmZhY2UgU3dhcE92ZXJsb2FkSW5mbyB7XG4gICAgZGVjbGFyYXRpb246IE1ldGhvZERlY2xhcmF0aW9uO1xuICAgIG1ldGhvZFN3YXBWYWx1ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtYXRpb25Db250ZXh0XG57XG4gICAgcHVibGljIHNvdXJjZUZpbGVHZW5lcmljVHlwZU1hcDogTWFwPFNvdXJjZUZpbGUsIE1hcDxzdHJpbmcsIHN0cmluZz4+ID0gbmV3IE1hcDxTb3VyY2VGaWxlLCBNYXA8c3RyaW5nLCBzdHJpbmc+PigpO1xuICAgIHB1YmxpYyBsYXN0R2VuZXJpY1R5cGVWYXJJbmRleDogTWFwPFNvdXJjZUZpbGUsIG51bWJlcj4gPSBuZXcgTWFwPFNvdXJjZUZpbGUsIG51bWJlcj4oKTtcbiAgICBwdWJsaWMgdHlwZUNoZWNrZXIgOiBUeXBlQ2hlY2tlcjtcbiAgICBwcml2YXRlIG92ZXJsb2FkTWFwOiBNYXA8Q2FsbEV4cHJlc3Npb24sIFN3YXBPdmVybG9hZEluZm8+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHR5cGVDaGVja2VyIDogVHlwZUNoZWNrZXIpIHtcbiAgICAgICAgdGhpcy50eXBlQ2hlY2tlciA9IHR5cGVDaGVja2VyO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0U3dhcE92ZXJsb2FkKGNhbGxFeHByZXNzaW9uOiBDYWxsRXhwcmVzc2lvbiwgb3ZlcmxvYWRJbmZvOiBTd2FwT3ZlcmxvYWRJbmZvKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3ZlcmxvYWRNYXAuc2V0KGNhbGxFeHByZXNzaW9uLCBvdmVybG9hZEluZm8pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTd2FwT3ZlcmxvYWQoY2FsbEV4cHJlc3Npb246IENhbGxFeHByZXNzaW9uKTogU3dhcE92ZXJsb2FkSW5mbyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsb2FkTWFwLmdldChjYWxsRXhwcmVzc2lvbik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInRzLW1vcnBoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInR5cGVzY3JpcHRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHlwZXNjcmlwdC9saWIvdHNzZXJ2ZXJsaWJyYXJ5XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjkpO1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJHZW5pZXNTY3JpcHRVaUV2ZW50cyIsIkdlbmllc1NjcmlwdFR5cGUiLCJleHRlbmRzTW9ub0JlaGF2aW91ciIsImNsYXNzRGVjbCIsImJhc2VDbGFzcyIsImdldEJhc2VDbGFzcyIsImdldE5hbWUiLCJleHRlbmRzU2NyaXB0YWJsZU9iamVjdCIsImluaGVyaXRzRnJvbSIsInR5cGUiLCJiYXNlTmFtZXMiLCJ0cmFuc2Zvcm1hdGlvbkNvbnRleHQiLCJiYXNlVHlwZXMiLCJzeW1ib2wiLCJnZXRTeW1ib2wiLCJkZWNsYXJhdGlvbnMiLCJnZXREZWNsYXJhdGlvbnMiLCJkZWNsYXJhdGlvbiIsIk5vZGUiLCJpc0NsYXNzRGVjbGFyYXRpb24iLCJoZXJpdGFnZUNsYXVzZXMiLCJnZXRIZXJpdGFnZUNsYXVzZXMiLCJoZXJpdGFnZUNsYXVzZSIsInR5cGVzIiwiZ2V0VHlwZU5vZGVzIiwidHlwZU5vZGUiLCJiYXNlVHlwZSIsInR5cGVDaGVja2VyIiwiZ2V0VHlwZUF0TG9jYXRpb24iLCJwdXNoIiwiZ2V0QmFzZVR5cGVzIiwiYmFzZVR5cGVOYW1lIiwiaW5jbHVkZXMiLCJnZXRGdWxsVHlwZU5hbWUiLCJmb3JDc2hhcnAiLCJpbmNsdWRlQXJndW1lbnRzIiwidGV4dCIsImFsaWFzU3ltYm9sIiwiZ2V0QWxpYXNTeW1ib2wiLCJnZXRUZXh0IiwiZ2V0SXNVbml0eUFQSVR5cGUiLCJnZXRGdWxseVF1YWxpZmllZE5hbWUiLCJyZXBsYWNlIiwiaXNFeHBvcnRlZCIsImZvckVhY2giLCJkZWNsIiwiaXNJbnRlcmZhY2VEZWNsYXJhdGlvbiIsImxlbmd0aCIsInNvdXJjZUZpbGUiLCJnZXRTb3VyY2VGaWxlIiwic291cmNlRmlsZVBhdGgiLCJnZXRGaWxlUGF0aCIsInJlbGF0aXZlUGF0aCIsImNvbnZlcnRUb0Fzc2V0c1JlbGF0aXZlUGF0aCIsImdldERpcmVjdG9yeVBhdGgiLCJwYXJzZWRQYXRoIiwicGF0aCIsInBhcnNlIiwiZmlsZVBhdGhXaXRob3V0RXh0Iiwiam9pbiIsImRpciIsIm5hbWUiLCJpbmRleE9mIiwic2xpY2UiLCJyZWdleCIsInRlc3QiLCJ0eXBlQXJndW1lbnRzIiwiZ2V0VHlwZUFyZ3VtZW50cyIsImFyZyIsImluZGV4IiwiYXJnVGV4dCIsImV4dHJhY3RQcm9wZXJ0aWVzIiwiY2xzIiwiYmFzZVBhdGgiLCJ0eXBlQXJndW1lbnRNYXAiLCJNYXAiLCJwcm9wZXJ0aWVzIiwiZ2V0UHJvcGVydGllcyIsInByb3AiLCJ2aXNpYmlsaXR5IiwiZ2V0U2NvcGUiLCJkZWNvcmF0b3JzIiwiZXh0cmFjdERlY29yYXRvcnMiLCJzb21lIiwiZCIsIlR5cGUiLCJTZXJpYWxpemVGaWVsZERlY29yYXRvciIsIk5vblNlcmlhbGl6ZWREZWNvcmF0b3IiLCJyZXNvbHZlR2VuZXJpY1R5cGUiLCJnZXRUeXBlIiwiaXNBcnJheSIsInJlc29sdmVkVHlwZSIsInJlc29sdmVBcnJheUVsZW1lbnRUeXBlIiwidHlwZU5hbWUiLCJwcm9wTmFtZSIsImZ1bGxQYXRoIiwiZ2V0SW5pdGlhbGl6ZXIiLCJleHByZXNzaW9uIiwiZ2V0S2luZCIsIlN5bnRheEtpbmQiLCJOZXdFeHByZXNzaW9uIiwibmV3RXhwcmVzc2lvbiIsImdldEFyZ3VtZW50cyIsIm1hcCIsImluaXRpYWxpemVyRXhwcmVzc2lvbnMiLCJoYXNJbml0aWFsaXplciIsImluaXRpYWxpemVyIiwiQXJyYXlMaXRlcmFsRXhwcmVzc2lvbiIsImFycmF5TGl0ZXJhbCIsImkiLCJnZXRFbGVtZW50cyIsImVsZW1lbnQiLCJwcm9wZXJ0eUluZm8iLCJQYXRoIiwiTmFtZSIsIlR5cGVOYW1lIiwiQ2hpbGRQcm9wZXJ0aWVzIiwiSXNBcnJheSIsIklzRW51bSIsIkVudW1LZXlzIiwiRW51bVZhbHVlcyIsIkRlY29yYXRvcnMiLCJJc0dlbmllc0JlaGF2aW91clJlZiIsIklzR2VuaWVzU2NyaXB0YWJsZU9iamVjdFJlZiIsIkluaXRpYWxpemVycyIsIkFycmF5RWxlbWVudEluaXRpYWxpemVyIiwidW5kZWZpbmVkIiwiQXJyYXlEaW1lbnNpb24iLCJkaW1lbnNpb24iLCJnZXRBcnJheUVsZW1lbnRJbml0aWFsaXplciIsImZpbGxFeHRyYVByb3BlcnR5SW5mbyIsImlzRW51bSIsImlzVW5pdHlUeXBlIiwiZ2V0SXNVbml0eUFQSURlY2xhcmF0aW9uIiwiZ2VuaWVzU2NyaXB0VHlwZSIsImdldEdlbmllc1NjcmlwdFR5cGVGcm9tTm9kZSIsIk1vbm9iZWhhdmlvdXIiLCJTY3JpcHRhYmxlT2JqZWN0IiwiTm9uZSIsImtleXMiLCJ2YWx1ZXMiLCJmaW5kIiwiZGVjIiwiRW51bURlY2xhcmF0aW9uIiwiZ2V0TWVtYmVycyIsIm1lbWJlciIsImdldFZhbHVlIiwiZXh0cmFjdEVudW1EZXRhaWxzIiwidmFsdWUiLCJ0b1N0cmluZyIsImZpbGxFbnVtSW5mbyIsInR5cGVQYXJhbXMiLCJnZXRUeXBlUGFyYW1ldGVycyIsInR5cGVBcmdzIiwibmV3VHlwZUFyZ3VtZW50TWFwIiwicGFyYW0iLCJ1bmlxdWVQYXJhbU5hbWUiLCJzZXQiLCJjaGlsZFByb3BlcnRpZXMiLCJ1bnNoaWZ0IiwibmV3QmFzZSIsInVuZGVybHlpbmdUeXBlTmFtZSIsInByb3BQYXRoIiwiZ2V0QXJyYXlFbGVtZW50VHlwZSIsImN1cnJlbnREaW1lbnNpb24iLCJpc1R5cGVQYXJhbWV0ZXIiLCJwYXJlbnREZWNsIiwiZ2V0UGFyZW50IiwidW5pcXVlVHlwZU5hbWUiLCJoYXMiLCJnZXQiLCJnZXRJc1VuaXR5QVBJU291cmNlRmlsZSIsImZpcnN0Tm9kZSIsImdldEZpcnN0Q2hpbGQiLCJjb25zb2xlIiwibG9nIiwibGVhZGluZ0NvbW1lbnRzIiwiZ2V0TGVhZGluZ0NvbW1lbnRSYW5nZXMiLCJHZW5pZXNEZWNsYXJhdGlvbkZpbGVBbm5vdGF0aW9uIiwiQ2xhc3NEZWNsYXJhdGlvbiIsImlzTW9ub2JlaGF2aW91ciIsImlzU2NyaXB0YWJsZU9iamVjdCIsImdldEdlbmllc1NjcmlwdFR5cGVGcm9tVHlwZSIsImFic29sdXRlUGF0aCIsInJlc29sdmUiLCJhc3NldHNQYXRoIiwicmVsYXRpdmVUb0Fzc2V0cyIsInJlbGF0aXZlIiwic3RhcnRzV2l0aCIsInNlcCIsInNwbGl0IiwiZ2V0RGVjb3JhdG9ycyIsIkFyZ3MiLCJhIiwiR2VuaWVzSW5zdGFuY2VQcm9wTmFtZSIsIk1vbm9iZWhhdmlvdXJUeXBlTmFtZSIsIlNjcmlwdGFibGVPYmplY3RUeXBlTmFtZSIsIkhpZGVJbkluc3BlY3RvckRlY29yYXRvciIsIkhlYWRlckRlY29yYXRvciIsIlNwYWNlRGVjb3JhdG9yIiwiVG9vbHRpcERlY29yYXRvciIsIkdFVF9JVEVNX05BTUUiLCJTRVRfSVRFTV9OQU1FIiwiY29tcG9uZW50TWV0aG9kcyIsIlNldCIsIkFsbG93ZWRVaUludGVyZmFjZXMiLCJVaUludGVyZmFjZVRvRW51bU1hcCIsIlBvaW50ZXJDbGljayIsIlBvaW50ZXJEb3duIiwiUG9pbnRlckVudGVyIiwiUG9pbnRlckV4aXQiLCJQb2ludGVyVXAiLCJCZWdpbkRyYWciLCJEZXNlbGVjdCIsIkRyYWciLCJEcm9wIiwiRW5kRHJhZyIsIkluaXRpYWxpemVQb3RlbnRpYWxEcmFnIiwiU2Nyb2xsIiwiU2VsZWN0IiwiU3VibWl0IiwiVXBkYXRlU2VsZWN0ZWQiLCJNb3ZlIiwiQ2FuY2VsIiwiY29uZGl0aW9uIiwiZGVjb3JhdG9yIiwicmVtb3ZlIiwiY2xhc3NEZWNsYXJhdGlvbiIsInJlc3VsdFNldCIsImN1cnJlbnRDbGFzcyIsImNsYXNzVHlwZU5hbWUiLCJhZGQiLCJnZXRJbXBsZW1lbnRzIiwiaW1wbGVtZW50Q2xhdXNlIiwicXVldWUiLCJjdXJyZW50SWZhY2VUeXBlIiwic2hpZnQiLCJpZmFjZU5hbWUiLCJBcnJheSIsImZyb20iLCJvcGVyYXRvcktpbmQiLCJFcXVhbHNFcXVhbHNUb2tlbiIsIkV4Y2xhbWF0aW9uRXF1YWxzVG9rZW4iLCJHcmVhdGVyVGhhblRva2VuIiwiTGVzc1RoYW5Ub2tlbiIsIkdyZWF0ZXJUaGFuRXF1YWxzVG9rZW4iLCJMZXNzVGhhbkVxdWFsc1Rva2VuIiwiQW1wZXJzYW5kVG9rZW4iLCJCYXJUb2tlbiIsIlBsdXNUb2tlbiIsIk1pbnVzVG9rZW4iLCJTbGFzaFRva2VuIiwiUGVyY2VudFRva2VuIiwiQXN0ZXJpc2tUb2tlbiIsIkxlc3NUaGFuTGVzc1RoYW5Ub2tlbiIsIkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5Ub2tlbiIsIkNhcmV0VG9rZW4iLCJFeGNsYW1hdGlvblRva2VuIiwiVGlsZGVUb2tlbiIsIlBsdXNQbHVzVG9rZW4iLCJNaW51c01pbnVzVG9rZW4iLCJvcGVyYXRvck1ldGhvZE5hbWUiLCJwYXJhbWV0ZXJUeXBlIiwidHlwZVN5bWJvbCIsImxlZnRUZXh0IiwicmlnaHRUZXh0IiwibWV0aG9kcyIsImdldE1ldGhvZHMiLCJmaWx0ZXIiLCJtIiwibWV0aG9kIiwicGFyYW1ldGVycyIsImdldFBhcmFtZXRlcnMiLCJsZWZ0UGFyYW1ldGVyVHlwZSIsInJpZ2h0UGFyYW1ldGVyVHlwZSIsImdldFJldHVyblR5cGUiLCJUeXBlRm9ybWF0RmxhZ3MiLCJ0eXBlTW9kdWxlIiwic2NyaXB0VHlwZSIsIkVycm9yIiwidHlwZUZ1bGx5UXVhbGlmaWVkTmFtZSIsImxhc3REb3RJbmRleCIsImxhc3RJbmRleE9mIiwic3Vic3RyaW5nIiwiZXhpc3RpbmdJbXBvcnQiLCJnZXRJbXBvcnREZWNsYXJhdGlvbnMiLCJpbXBvcnREZWNsIiwiZ2V0TW9kdWxlU3BlY2lmaWVyVmFsdWUiLCJnZXROYW1lZEltcG9ydHMiLCJuYW1lZEltcG9ydCIsImFkZE5hbWVkSW1wb3J0IiwiaW1wb3J0U3RydWN0dXJlIiwia2luZCIsIlN0cnVjdHVyZUtpbmQiLCJJbXBvcnREZWNsYXJhdGlvbiIsIm1vZHVsZVNwZWNpZmllciIsIm5hbWVkSW1wb3J0cyIsImFkZEltcG9ydERlY2xhcmF0aW9uIiwiYXJnVHlwZSIsImdUeXBlIiwiZGlyZWN0b3J5UGF0aCIsImltcG9ydERlY2xhcmF0aW9uIiwic2V0TW9kdWxlU3BlY2lmaWVyIiwiQ1VTVE9NX0RJQUdOT1NUSUNfQ09ERVMiLCJBTExPV0VEX0lOSEVSSVRBTkNFX1RZUEVTIiwiQ09NUE9ORU5UX01FVEhPRFMiLCJhZGREaWFnbm9zdGljIiwiZGlhZ25vc3RpY3MiLCJub2RlIiwibWVzc2FnZVRleHQiLCJjb2RlIiwic3RhcnQiLCJnZXRTdGFydCIsImdldFdpZHRoIiwiZGlhZ25vc3RpYyIsImZpbGUiLCJjb21waWxlck5vZGUiLCJjYXRlZ29yeSIsIkRpYWdub3N0aWNDYXRlZ29yeSIsInNvdXJjZSIsImdldENsYXNzZXMiLCJpbXBsZW1lbnRlZEludGVyZmFjZXMiLCJiYXNlQ2xhc3NOYW1lIiwiZGlhZ25vc3RpY01lc3NhZ2UiLCJpbnRmIiwicHJvY2Vzc0NsYXNzRGlhZ25vc3RpY3MiLCJnZXREZXNjZW5kYW50c09mS2luZCIsIkNhbGxFeHByZXNzaW9uIiwiY2FsbEV4cHIiLCJnZXRFeHByZXNzaW9uIiwibWV0aG9kRGVjbGFyYXRpb25zIiwiaXNQcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24iLCJpc0lkZW50aWZpZXIiLCJtZXRob2RTeW1ib2wiLCJpc01ldGhvZERlY2xhcmF0aW9uIiwibWV0aG9kTmFtZSIsImdldE1ldGhvZE5hbWUiLCJjYWxsQXJnVHlwZXMiLCJnZXRQcm9qZWN0IiwiZ2V0VHlwZUNoZWNrZXIiLCJwYXJhbVR5cGUiLCJpc1R5cGVBc3NpZ25hYmxlVG8iLCJoYXNNYXRjaGluZ05vbkdlbmVyaWNPdmVybG9hZCIsInZhbGlkQXJncyIsInR5cGVBcmdOb2RlIiwidHlwZUFyZ1R5cGUiLCJpc1ZhbGlkQ29tcG9uZW50VHlwZUFyZyIsImdldElzVmFsaWRVbml0eUdlbmVyaWNUeXBlQXJnIiwicHJvY2Vzc0dlbmVyaWNNZXRob2RDYWxsIiwicHJvY2Vzc0NhbGxFeHByZXNzaW9uRGlhZ25vc3RpY3MiLCJuZXdFeHByIiwiY2xhc3NEZWNsYXJhdGlvbnMiLCJleHBlY3RlZFR5cGVBcmdzQ291bnQiLCJwcm92aWRlZFR5cGVBcmdzQ291bnQiLCJwcm9jZXNzVHlwZVVzYWdlRGlhZ25vc3RpY3MiLCJjb25zdHJ1Y3RvciIsInRzQ29uZmlnUGF0aCIsInByb2plY3QiLCJQcm9qZWN0IiwidHNDb25maWdGaWxlUGF0aCIsInNraXBBZGRpbmdGaWxlc0Zyb21Uc0NvbmZpZyIsIlRyYW5zZm9ybWF0aW9uQ29udGV4dCIsInRyYW5zZm9ybWVycyIsInBoYXNlIiwidHJhbnNmb3JtZXIiLCJSZWZUcmFuc2Zvcm1lciIsIkV2ZW50Q29udGV4dFRyYW5zZm9ybWVyIiwiRGVsZWdhdGVUb0Fycm93RnVuY3Rpb25UcmFuc2Zvcm1lciIsIkJyYWNrZXRBY2Nlc3NUcmFuc2Zvcm1lciIsIlByb21pc2VXcmFwcGVyVHJhbnNmb3JtZXIiLCJDb21wb25lbnRDYWxsVHJhbnNmb3JtZXIiLCJTY3JpcHRhYmxlT2JqZWN0Q3JlYXRlSW5zdGFuY2VUcmFuc2Zvcm1lciIsIkV4dGVuc2lvbk1ldGhvZFRyYW5zZm9ybWVyIiwiR2VuaWVzSW5zdGFuY2VUcmFuc2Zvcm1lciIsIkdlbmVyaWNUeXBlVHJhbnNmb3JtZXIiLCJPcGVyYXRvck92ZXJsb2FkaW5nVHJhbnNmb3JtZXIiLCJOdW1lcmljT3ZlcmxvYWRSZXNvbHV0aW9uVHJhbnNmb3JtZXIiLCJHZW5lcmljTWV0aG9kVHJhbnNmb3JtZXIiLCJjb21waWxlIiwiZmlsZXNUb0NvbXBpbGUiLCJwcm9qZWN0RmlsZXMiLCJhZGRTb3VyY2VGaWxlc0F0UGF0aHMiLCJjb2xsZWN0ZWRGaWxlcyIsInByb2Nlc3NlZCIsImRlcGVuZGVuY3lHcmFwaCIsImZpbGVQYXRoIiwiZ2V0U291cmNlRmlsZU9yVGhyb3ciLCJjb2xsZWN0RmlsZXMiLCJzb3J0ZWRGaWxlcyIsInRvcG9sb2dpY2FsU29ydCIsIm91dHB1dHMiLCJzIiwic2V0RGVmYXVsdEV4cG9ydCIsInVwZGF0ZUltcG9ydHNUb1JlbGF0aXZlUGF0aHMiLCJpbml0aWFsaXplQ29tcGlsZU91dHB1dCIsImVtaXQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVmYXVsdEV4cG9ydFN5bWJvbCIsImdldERlZmF1bHRFeHBvcnRTeW1ib2wiLCJkZWZhdWx0RXhwb3J0ZWRDbGFzcyIsInRzIiwiaXNEZWZhdWx0RXhwb3J0Iiwic2V0SXNEZWZhdWx0RXhwb3J0IiwiZ3JvdXBUcmFuc2Zvcm1lcnNCeVBoYXNlIiwicmVkdWNlIiwiYWNjIiwiY3VyciIsInJ1blRyYW5zZm9ybWVycyIsInRyYW5zZm9ybWVyc0J5UGhhc2UiLCJPYmplY3QiLCJzb3J0IiwiYiIsIk51bWJlciIsInBoYXNlTnVtYmVyIiwicmV0cnlDb3VudCIsImhhc0ZvcmdvdHRlbk5vZGUiLCJub2Rlc1RvUHJvY2VzcyIsImdldERlc2NlbmRhbnRzIiwibW9kaWZpZWROb2RlIiwid2FzRm9yZ290dGVuIiwibm9kZVR5cGVzIiwidHJhbnNmb3JtTm9kZSIsImVycm9ycyIsImdldEdlbmllc0RpYWdub3N0aWNzIiwiaXNTY3JpcHRhYmxlT2JqIiwiZGVmYXVsdFR5cGVOYW1lIiwiaW5oZXJpdGFuY2VDaGFpbiIsInN1cHBvcnRlZFVpRXZlbnRzIiwidHJhdmVyc2VQcm90b3R5cGVDaGFpbiIsImYiLCJGaWxlUGF0aCIsIklzU3VjY2Vzc2Z1bCIsIkVycm9ycyIsIkpzU291cmNlIiwiSXNNb25vYmVoYXZpb3VyIiwiSXNTY3JpcHRhYmxlT2JqIiwiUHJvcGVydGllcyIsIklkIiwiRGVmYXVsdFR5cGVOYW1lIiwiSW5oZXJpdGFuY2VDaGFpbiIsIlN1cHBvcnRlZFVpRXZlbnRzIiwiZGVjb3JhdG9yc1RvUmVtb3ZlIiwicmVtb3ZlRGVjb3JhdG9ycyIsInByb3BlcnR5IiwiZ2V0RGlhZ25vc3RpY3MiLCJmaWxlT3V0cHV0IiwiZ2V0RW1pdE91dHB1dCIsImdldE91dHB1dEZpbGVzIiwiY29tcGlsZU91dHB1dCIsImFsbEVycm9ycyIsImNvbmNhdCIsImdldEdlbmllc1NlbWFudGljRGlhZ25vc3RpY3MiLCJsaW5lIiwiY29sdW1uIiwiZ2V0TGluZUFuZENvbHVtbkF0UG9zIiwibWVzc2FnZSIsImZsYXR0ZW5EaWFnbm9zdGljTWVzc2FnZVRleHQiLCJnZXRQcmVFbWl0RGlhZ25vc3RpY3MiLCJkaWFnIiwiY29tcGlsZXJPYmplY3QiLCJjb2xsZWN0ZWQiLCJnZXRSZWZlcmVuY2luZ1NvdXJjZUZpbGVzIiwicmVmRmlsZSIsImZpbGVzIiwidG9wb2xvZ2ljYWxTb3J0V2l0aFRhcmphbiIsImVycm9yIiwidG9wb2xvZ2ljYWxTb3J0V2l0aEN5Y2xlcyIsImluZGV4TWFwIiwibG93TGlua01hcCIsInN0YWNrIiwib25TdGFjayIsInNjY0xpc3QiLCJzdHJvbmdDb25uZWN0IiwiZGVwIiwiTWF0aCIsIm1pbiIsInNjYyIsInciLCJwb3AiLCJkZWxldGUiLCJzb3J0ZWQiLCJhcmdzIiwicHJvY2VzcyIsImFyZ3YiLCJjb21waWxlRmlsZXMiLCJjdXJyZW50RmxhZyIsImV4aXQiLCJyZXN1bHQiLCJzdGRvdXQiLCJ3cml0ZSIsIm1haW4iLCJFbGVtZW50QWNjZXNzRXhwcmVzc2lvbiIsImlzRWxlbWVudEFjY2Vzc0V4cHJlc3Npb24iLCJlbGVtZW50QWNjZXNzIiwiYXJndW1lbnRFeHByZXNzaW9uIiwiZ2V0QXJndW1lbnRFeHByZXNzaW9uIiwiZ2V0SXRlbU1ldGhvZHMiLCJzZXRJdGVtTWV0aG9kcyIsIm1ldGhvZFNpZ25hdHVyZXMiLCJzaWduYXR1cmUiLCJnZXRTaWduYXR1cmUiLCJnZXREZWNsYXJhdGlvbiIsInBhcmVudCIsImlzQmluYXJ5RXhwcmVzc2lvbiIsImdldE9wZXJhdG9yVG9rZW4iLCJFcXVhbHNUb2tlbiIsImdldExlZnQiLCJ2YWx1ZUV4cHJlc3Npb24iLCJnZXRSaWdodCIsInBhcmFtcyIsImluZGV4UGFyYW1UeXBlIiwidmFsdWVQYXJhbVR5cGUiLCJpbmRleEFyZ1R5cGUiLCJ2YWx1ZUFyZ1R5cGUiLCJleHByZXNzaW9uVGV4dCIsImluZGV4VGV4dCIsInZhbHVlVGV4dCIsInNldEl0ZW1DYWxsIiwicmVwbGFjZVdpdGhUZXh0IiwiZ2V0SXRlbUNhbGwiLCJuZXdOb2RlIiwiaXNDYWxsRXhwcmVzc2lvbiIsImNhbGxFeHByZXNzaW9uIiwibWV0aG9kQXJndW1lbnRzIiwiaXNUeXBlb2ZBcmd1bWVudCIsIm1ldGhvZE5hbWVOb2RlIiwiZ2V0TGFzdENoaWxkQnlLaW5kIiwiSWRlbnRpZmllciIsImZpcnN0Q2hpbGQiLCJjbGFzc1R5cGUiLCJpc09ySW5oZXJpdHNGcm9tR2FtZU9iamVjdE9yQ29tcG9uZW50IiwicmV0dXJuVHlwZSIsInR5cGVBcmd1bWVudCIsInR5cGVBcmd1bWVudFR5cGUiLCJwcm9jZXNzVHlwZUFyZ3VtZW50IiwiZ2V0VHlwZUZyb21UeXBlb2ZBcmd1bWVudCIsImdldEZpcnN0Q2hpbGRCeUtpbmQiLCJpc1R5cGVOb2RlIiwiaXNUeXBlT2ZBcmciLCJpc0ludGVyZmFjZSIsImdldFR5cGVOYW1lIiwiY3JlYXRlT3ZlcmxvYWRlZENhbGxFeHByZXNzaW9uIiwidHlwZUFyZ3VtZW50VGV4dCIsImFkZFRzSWdub3JlIiwiY2FzdFR5cGUiLCJyZW1vdmVUeXBlQXJndW1lbnQiLCJpbnNlcnRBcmd1bWVudCIsIm5ld0NhbGxFeHByZXNzaW9uVGV4dCIsImluc2VydFRleHQiLCJhc0tpbmRPclRocm93Iiwib2JqZWN0RXhwcmVzc2lvbiIsIm9iamVjdFR5cGUiLCJpc1NpZ25hbEJ1c1R5cGUiLCJpc0dlbmllc0V2ZW50VHlwZSIsImdldFJlc29sdmVkU2lnbmF0dXJlIiwicGFyYW1ldGVyIiwiZ2V0VHlwZU9mU3ltYm9sQXRMb2NhdGlvbiIsImlzRGVsZWdhdGVUeXBlIiwiaXNBcnJvd0Z1bmN0aW9uIiwid3JhcEluQXJyb3dGdW5jdGlvbiIsImdldENhbGxTaWduYXR1cmVzIiwiY2FsbFNpZ25hdHVyZXMiLCJwYXJhbVRleHQiLCJhcnJvd0Z1bmN0aW9uVGV4dCIsImlzU2lnbmFsQnVzTWV0aG9kIiwiaXNHZW5pZXNFdmVudE1ldGhvZCIsIm1ldGhvZEFyZ0luZGV4IiwibWV0aG9kQXJnIiwiY29udGV4dEV4cHJlc3Npb24iLCJnZXRDb250ZXh0RXhwcmVzc2lvbiIsImFkZEFyZ3VtZW50IiwiUHJvcGVydHlBY2Nlc3NFeHByZXNzaW9uIiwicHJvcGVydHlBY2Nlc3MiLCJpbnN0YW5jZSIsInZhbGlkTWV0aG9kU2lnbmF0dXJlcyIsIk1ldGhvZFNpZ25hdHVyZSIsInNlbGVjdGVkTWV0aG9kU2lnbmF0dXJlIiwiZ2V0SnNEb2NzIiwiZmxhdE1hcCIsImdldFRhZ3MiLCJ0YWciLCJnZXRUYWdOYW1lIiwiZXh0ZW5zaW9uVGFnIiwiZXh0ZW5zaW9uQ29tbWVudCIsImdldENvbW1lbnRUZXh0IiwiZXh0ZW5zaW9uQ2xhc3MiLCJleHRlbnNpb25NZXRob2QiLCJ0eXBlUGFyYW1ldGVycyIsInBhcnNlRXh0ZW5zaW9uQ29tbWVudCIsImV4dHJhY3RBbmRPcmRlclR5cGVBcmd1bWVudHMiLCJwYXJ0cyIsImNsYXNzU2hvcnROYW1lIiwibmFtZXNwYWNlIiwiZW5zdXJlSW1wb3J0IiwiaW5zdGFuY2VUZXh0IiwiaXNHZW5pZXNTY3JpcHRUeXBlIiwiYXJnc1RleHQiLCJnZXRGdWxsVGV4dCIsIm5ld0V4cHJlc3Npb25UZXh0IiwiY29tbWVudCIsIm1hdGNoIiwiZ3JvdXBzIiwiYXJndW1lbnRzIiwidHJpbSIsImNsYXNzTmFtZSIsIm5hbWVTcGFjZSIsImltcG9ydERlY2xhcmF0aW9ucyIsImhhc0ltcG9ydCIsImdldE1vZHVsZVNwZWNpZmllciIsImdldExpdGVyYWxUZXh0IiwiaW5zdGFuY2VUeXBlIiwiZ2V0U3ltYm9sT3JUaHJvdyIsImdldERlY2xhcmVkVHlwZSIsInR5cGVBcmdNYXAiLCJ0eXBlQXJnIiwiY2FsbFR5cGVBcmdzIiwiY2FsbFR5cGVQYXJhbXMiLCJzb3VyY2VGaWxlR2VuZXJpY01hcCIsIm92ZXJsb2FkSW5mbyIsImdldFN3YXBPdmVybG9hZCIsIm1ldGhvZFN3YXBWYWx1ZSIsIm1ldGhvZERlY2xhcmF0aW9uIiwiZGVjbGFyaW5nVHlwZSIsInR5cGVBcmdzTm9kZXMiLCJ0IiwicmVwbGFjZVdpdGhOb25HZW5lcmljQ2FsbCIsIm5ld1ZhclN0YXRlbWVudHMiLCJnZW5lcmljTWV0aG9kVmFyTmFtZSIsImNyZWF0ZUdlbmVyaWNNZXRob2RWYXJpYWJsZSIsImxhc3RJbXBvcnRJbmRleCIsImxhc3RHZW5lcmljVHlwZVZhckluZGV4IiwiZ2V0TGFzdEltcG9ydEluZGV4Iiwic3RhdGVtZW50c0xlbmd0aCIsImdldFN0YXRlbWVudHMiLCJpbnNlcnRWYXJpYWJsZVN0YXRlbWVudHMiLCJpc1N0YXRpYyIsImdldFR5cGVLZXkiLCJ0QXJncyIsImdldEtleSIsInZhclN0YXRlbWVudHMiLCJnZW5lcmljVHlwZU5hbWUiLCJnZW5lcmljS2V5IiwiZ2VuZXJpY01hcCIsImdlbmVyaWNEZWNsYXJhdGlvbiIsImdldFR5cGVOYW1lQW5kRW5zdXJlSW1wb3J0ZWQiLCJnZW5lcmljVmFyTmFtZSIsImRlY2xhcmF0aW9uS2luZCIsIlZhcmlhYmxlRGVjbGFyYXRpb25LaW5kIiwiQ29uc3QiLCJzb3VyY2VGaWxlR2VuZXJpY1R5cGVNYXAiLCJtYXBwaW5nIiwidHlwZUtleSIsInN0YXRlbWVudHMiLCJzdGF0ZW1lbnQiLCJwYXJlbnRDbGFzcyIsImNzaGFycFR5cGVOYW1lIiwicCIsImV2ZXJ5IiwibWV0aG9kQ2FsbCIsInR5cGVBcmdzVGV4dCIsImNyZWF0ZUdlbmVyaWNWYXJpYWJsZSIsImV4cHJlc3Npb25UeXBlIiwibmV3QXJnVGV4dCIsImdldE5hbWVOb2RlIiwib3ZlcmxvYWREZWNsYXJhdGlvbnMiLCJhcmd1bWVudFR5cGVzTGlzdCIsImluZmVyUG9zc2libGVUeXBlcyIsImJlc3RPdmVybG9hZCIsInNlbGVjdEJlc3RPdmVybG9hZCIsImpzRG9jcyIsImpzRG9jIiwidGFncyIsInNldFN3YXBPdmVybG9hZCIsIm5ld0FyZ3VtZW50cyIsInBvc3NpYmxlQXJnVHlwZXMiLCJ0eXBlc0FyZUVxdWFsIiwiaXNDYXN0YWJsZSIsImluZmVycmVkVHlwZU5hbWVzIiwibnVtZXJpY0luZm8iLCJnZXROdW1lcmljVmFsdWUiLCJpbmZlclR5cGVzRnJvbU51bWVyaWNJbmZvIiwiYnJhbmRlZFR5cGVzIiwiZ2V0QnJhbmRlZFR5cGVzIiwiaXNOdW1iZXJUeXBlIiwiZ2V0VHlwZUJ5TmFtZSIsIm51bWVyaWNMaXRlcmFsSW5mbyIsImdldE51bWVyaWNMaXRlcmFsSW5mbyIsImlzVmFyaWFibGVEZWNsYXJhdGlvbiIsImlzUHJvcGVydHlEZWNsYXJhdGlvbiIsInZhbHVlSW5mbyIsInBlcmZvcm1GbG93QW5hbHlzaXMiLCJ1c2FnZU5vZGUiLCJjdXJyZW50VmFsdWVJbmZvIiwiaW5pdFZhbHVlSW5mbyIsImdldE51bWVyaWNWYWx1ZUZyb21FeHByZXNzaW9uIiwiZ2V0Rmlyc3RBbmNlc3RvckJ5S2luZCIsIk1ldGhvZERlY2xhcmF0aW9uIiwidXNhZ2VTdGFydCIsInN0bXQiLCJhc3NpZ25tZW50cyIsImlzUHJlZml4VW5hcnlFeHByZXNzaW9uIiwiaXNQb3N0Zml4VW5hcnlFeHByZXNzaW9uIiwiYXNzaWdubWVudCIsImxlZnQiLCJyaWdodCIsImlzQXNzaWdubWVudFRvU3ltYm9sIiwiUGx1c0VxdWFsc1Rva2VuIiwiTWludXNFcXVhbHNUb2tlbiIsIkFzdGVyaXNrRXF1YWxzVG9rZW4iLCJTbGFzaEVxdWFsc1Rva2VuIiwiUGVyY2VudEVxdWFsc1Rva2VuIiwiZXZhbHVhdGVDb21wb3VuZEFzc2lnbm1lbnQiLCJvcGVyYW5kIiwiZ2V0T3BlcmFuZCIsImRlbHRhIiwiaGFzRGVjaW1hbCIsImlzVGhpc0V4cHJlc3Npb24iLCJleHByIiwiaXNOdW1lcmljTGl0ZXJhbCIsImV4cHJTeW1ib2wiLCJsZWZ0SW5mbyIsInJpZ2h0SW5mbyIsImV2YWx1YXRlQmluYXJ5T3BlcmF0aW9uIiwiYmluYXJ5T3BlcmF0b3JLaW5kIiwicmVzdWx0VmFsdWUiLCJpbmZvIiwiY2xlYW5UeXBlVGV4dCIsInJlc29sdmVOYW1lIiwiU3ltYm9sRmxhZ3MiLCJBbGwiLCJnZXREZWNsYXJlZFR5cGVPZlN5bWJvbCIsIm92ZXJsb2FkcyIsImhpZ2hlc3RTY29yZSIsIm92ZXJsb2FkIiwic2NvcmUiLCJzY29yZU92ZXJsb2FkIiwiYXJnU2NvcmUiLCJpc1ZhbGlkVHlwZSIsIm1heCIsInR5cGVUZXh0IiwidHlwZTEiLCJ0eXBlMiIsImZyb21UeXBlIiwidG9UeXBlIiwiZnJvbVR5cGVOYW1lIiwidG9UeXBlTmFtZSIsImJ5dGUiLCJzYnl0ZSIsInNob3J0IiwidXNob3J0IiwiaW50IiwidWludCIsImZsb2F0IiwiZG91YmxlIiwibnVtYmVyIiwiYnJhbmRlZFR5cGUiLCJCaW5hcnlFeHByZXNzaW9uIiwiUHJlZml4VW5hcnlFeHByZXNzaW9uIiwiUG9zdGZpeFVuYXJ5RXhwcmVzc2lvbiIsInRyYW5zZm9ybUJpbmFyeUV4cHJlc3Npb24iLCJ0cmFuc2Zvcm1VbmFyeUV4cHJlc3Npb24iLCJnZXRPcGVyYXRvck1ldGhvZE5hbWUiLCJFcXVhbHNFcXVhbHNFcXVhbHNUb2tlbiIsIkV4Y2xhbWF0aW9uRXF1YWxzRXF1YWxzVG9rZW4iLCJ1bndyYXBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIsImlzTnVsbExpdGVyYWwiLCJpc1VuZGVmaW5lZEtleXdvcmQiLCJ0cmFuc2Zvcm1lZExlZnQiLCJ0cmFuc2Zvcm1Ob2RlSWZOZWVkZWQiLCJ0cmFuc2Zvcm1lZFJpZ2h0IiwibGVmdFR5cGUiLCJyaWdodFR5cGUiLCJpc0xpdGVyYWwiLCJnZXRCYXNlVHlwZU9mTGl0ZXJhbFR5cGUiLCJuZXdUZXh0IiwiaXNDb21wb3VuZEFzc2lnbm1lbnQiLCJsZWZ0TmFtZSIsImVxdWl2YWxlbnRPcGVyYXRvcktpbmQiLCJnZXRFcXVpdmFsZW50T3BlcmF0b3JLaW5kIiwiZXF1aXZhbGVudE9wZXJhdG9yTWV0aG9kTmFtZSIsImVxdWl2YWxlbnRFeHByZXNzaW9uIiwicGFyZW50aGVzaXplZE5ld1RleHQiLCJvcGVyYW5kVHlwZSIsImdldFVuYXJ5T3BlcmF0b3JNZXRob2RSZXR1cm5UeXBlIiwib3BlcmFuZFRleHQiLCJ1bndyYXBwZWROb2RlIiwiaXNQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIsIkZpcnN0Q29tcG91bmRBc3NpZ25tZW50IiwiTGFzdENvbXBvdW5kQXNzaWdubWVudCIsImNvbXBvdW5kT3BlcmF0b3JLaW5kIiwiQW1wZXJzYW5kRXF1YWxzVG9rZW4iLCJCYXJFcXVhbHNUb2tlbiIsIkNhcmV0RXF1YWxzVG9rZW4iLCJMZXNzVGhhbkxlc3NUaGFuRXF1YWxzVG9rZW4iLCJHcmVhdGVyVGhhbkdyZWF0ZXJUaGFuRXF1YWxzVG9rZW4iLCJHcmVhdGVyVGhhbkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5FcXVhbHNUb2tlbiIsIkdyZWF0ZXJUaGFuR3JlYXRlclRoYW5HcmVhdGVyVGhhblRva2VuIiwiQXdhaXRFeHByZXNzaW9uIiwiaXNBd2FpdEV4cHJlc3Npb24iLCJhd2FpdEV4cHJlc3Npb24iLCJpc1Byb21pc2UiLCJnZXRQcm9taXNlVHlwZUFyZ3VtZW50Iiwid3JhcHBlZEV4cHJlc3Npb25UZXh0IiwiaXNQcm9taXNlTWV0aG9kIiwiYmluYXJ5RXhwcmVzc2lvbiIsImlzUmVmVHlwZSIsInJlZkV4cHJlc3Npb24iLCJwcm9wZXJ0eUFjY2Vzc0V4cHJlc3Npb24iLCJnZXRSZWxhdGl2ZVBhdGgiLCJuZXdDYWxsIiwib3ZlcmxvYWRNYXAiLCJyZXF1aXJlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9